{"version":3,"sources":["images/logo.png","utils/config.js","components/ContainerBox.js","actions/employeeActions.js","actions/actionTypes.js","store/initialState.js","reducers/index.js","reducers/employeeReducer.js","store/store.js","utils/employeeUtils.js","components/Commands.js","components/BoostrapDatePicker.js","components/Filters.js","utils/commonUtils.js","components/Employees.js","components/Report.js","components/RegisterEmployee.js","components/NotFound.js","components/ViewEmployee.js","components/DeleteEmployee.js","components/EditEmployee.js","components/ExportExcel.js","utils/userUtils.js","components/LogIn.js","components/CheckCard.js","components/CommentEmployee.js","components/ScheduleCell.js","components/Schedule.js","components/Cell.js","components/ScheduleNew.js","components/table/Cell.js","components/table/Row.js","components/table/Table.js","components/table/InputCell.js","components/CustomSchedule.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","production","serverURL","employeeUpdateInterval","workLogUpdateInterval","request","axios","create","baseURL","withCredentials","ContainerBox","props","react_default","a","createElement","className","header","children","showEmployeeWorkLog","employee","type","payload","hideEmployeeWorkLog","showDeleteEmployee","hideDeleteEmployee","showEditEmployee","hideEditEmployee","showRegisterEmployee","hideRegisterEmployee","showExportExcel","hideExportExcel","showCheckCard","hideCheckCard","showCommentEmployee","hideCommentEmployee","initialState","employees","employeeWorkLog","show","id","deleteEmployee","editEmployee","registerEmployee","exportExcel","checkCard","commentEmployee","rootReducer","combineReducers","state","arguments","length","undefined","action","Object","objectSpread","toConsumableArray","map","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","storeUpdateEmployees","getServerEmployees","then","res","dispatch","data","storeUpdateEmployee","getServerEmployee","post","getSchedules","month","saveSchedules","schedules","getServerEmployeeWorkLog","order","deleteServerWorkLog","working","employeeId","editServerWorkLog","startDate","endDate","addServerEmployee","deleteServerEmployee","exportServerEmployees","settings","get","responseType","cardScanned","uid","admin","getEmployeeByUID","setEmployeeUID","removeEmployeeUID","awaitCard","CommandButton","forwardRef","ref","Button","variant","onClick","index_esm","connect","es_Row","Col","xs","Dropdown","Toggle","as","Menu","flip","alignRight","Item","eventKey","archived","height","width","active","OverlayTrigger","placement","overlay","Tooltip","BoostrapDatePicker","react_datepicker_es","assign","customInput","Form","Control","locale","en","Filters","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","saveSettings","cookies","Cookies","showFilters","showArchive","showInactive","showWorking","showNotWorking","nameFilter","positionFilter","companyFilter","set","onFilterChange","filterData","tableData","applyNameFilter","applyPositionFilter","applyCompanyFilter","applyCheckboxFilters","checkboxFilter","onDataFiltered","filter","row","name","surname","toString","toLowerCase","indexOf","company","position","onToggleFilters","setState","onToggleArchive","onToggleInactive","onToggleShowWorking","onToggleShowNotWorking","onChangeNameFilter","e","target","value","onChangePositionFilter","onChangeCompanyFilter","onChangeDateStart","date","startOfDay","Date","setHours","onChangeDateEnd","endOfDay","onClickFilter","index","yesterday","setDate","getDate","last7Days","last30Days","dropdown","currentFilter","filters","clearAllFilters","prevProps","prevState","_this2","dateFilter","Fragment","Group","Row","Label","column","components_BoostrapDatePicker","dateFormat","selected","onChange","maxDate","minDate","DropdownButton","title","key","Collapse","in","Check","label","checked","placeholder","Text","React","PureComponent","pingServer","addZero","i","millisecondConverter","ms","seconds","Math","floor","minutes","hours","daysInMonth","year","isWeekend","day","getDay","convertSpecialCharacters","string","special","normal","output","letter","toUpperCase","charAt","Employees","pageSize","onTableChange","formatTable","callback","workLogFrom","workLogTo","promise","workLogToday","workLog","forEach","start_time","getTime","push","comments","today","workLogs","commands","Promise","all","workLogUserId","showWorkLogModal","companyFormatter","cell","style","maxWidth","columns","dataField","text","sort","classes","headerClasses","sortFunc","b","formatter","commentBorderStyle","borderBottom","comment","size","commentId","Badge","fontSize","color","trigger","rootClose","Popover","aData","end_time","bData","badges","totalWorkTime","totalWorkTimeConverted","workTime","workTimeConverted","workTimeStartFormatted","getHours","getMinutes","workTimeEndFormatted","workTimeFormatted","totalWorkTimeFormatted","borderTop","components_Commands","pagination","paginationFactory","page","alwaysShowAllBtns","showTotal","sizePerPage","sizePerPageRenderer","_ref","options","onSizePerPageChange","currSizePerPage","option","onClickPageSize","sizePerPageList","components_ContainerBox","components_Filters","react_bootstrap_table_next_lib_default","bootstrap4","keyField","bordered","hover","defaultSorted","remote","rowStyle","backgroundColor","Component","startDateFormatted","getMonth","getFullYear","endDateFormatted","displayOneDay","REGISTER_STATE","DATA_INPUT","RFID_WAIT","COMPLETE","RegisterEmployee","onNameChange","event","onSurnameChange","onCompanyChange","onPositionChange","onNumberChange","number","onPersonalCodeChange","personalCode","onAddCardChange","addCard","onFormSubmit","preventDefault","stopPropagation","registrationState","hideRegisterEmployeeAndDelete","newEmployee","onExited","checkInterval","Modal","onHide","onExit","deleteAndCancel","onSubmit","Header","closeButton","Title","Body","required","disabled","controlId","Alert","onClose","Footer","Buttons","NotFound","ViewEmployee","fetchWorkLog","clearInterval","updateInterval","setInterval","editWorkLog","handleDateChangeStart","handleDateChangeEnd","deleteWorkLog","confirmEditWorkLog","cancelEditWorkLog","onStartDateChange","onEndDateChange","results","filterResults","lastStartDate","totalDayWorkTime","totalDays","workLogFiltered","log","startTimePure","stillWorking","endTimePure","startTimeFormatted","endTimeFormatted","employee_id","workRow","timeIntervals","showTimeSelect","timeFormat","dateRow","totalDayRow","totalRow","dateFormatted","nextStartDate","totalDayWorkTimeConverted","totalDayWorkTimeFormatted","fromDateFormatted","toDateFormatted","colSpan","es_Table","DeleteEmployee","CHANGE_CARD_STATE","OFF","DELETED","EditEmployee","onEnter","changeCard","status","uid_added","deleteCard","uidAddedDate","uidAdded","ExportExcel","handleDateChange","onToggleIncludeNoHours","includeNoHours","onToggleIncludeInactive","includeInactive","onToggleIncludeArchived","includeArchived","onEmployeeCheck","newList","employeeList","onCheckAll","checkAll","export","response","content","headers","download","showMonthYearPicker","checkSession","authenticate","username","password","rememberMe","logOut","getUserByKey","DEBUG","LogIn","onUsernameChange","onPasswordChange","onRememberMeChange","logIn","location","reload","authenticationError","centered","src","logo","alt","CheckCard","res2","hideModal","notFound","onEntered","CommentEmployee","onCommentChange","onExpiryDateChange","expires","onManualDeleteChange","manualDelete","rows","ScheduleCell","transparentColor","dayColor","nightColor","dayOffColor","vacationColor","sickListColor","nextProps","nextState","JSON","stringify","schedule","days","extraData","colIndex","selectedFields","console","rowIndex","onFocus","onClickScheduleInput","scheduleIndex","onChangeScheduleInput","isKeyDown","keyDown","saving","cloneDeep","start","end","min","max","i2","newSchedules","findIndex","newDays","Array","fill","currentMonth","nameFormatter","dayFormatter","components_ScheduleCell","hidden","setMonth","formatExtraData","headerStyle","parsedSchedule","parse","addEventListener","keyCode","_this3","condensed","Cell","onBlur","innerHTML","dayIndex","contentEditable","suppressContentEditableWarning","dangerouslySetInnerHTML","__html","formatTableData","onCellChange","performanceStart","now","scheduleCellRenderer","parseInt","original","components_Cell","newScheduleCellRenderer","lineHeight","accessor","getProps","rowInfo","padding","targetValue","counter","react_table_es","showPagination","showPaginationTop","getTrProps","instance","splitData","cellRenderer","rowId","colId","table_Cell","Table","renderColumns","renderRows","table_Row","InputCell","CustomSchedule","table_InputCell","table_Table","App","establishConnection","serverConnectionEstablished","server","scannerConnectionEstablished","scanner","pingInterval","loading","authenticated","onAuthentification","user","scanCard","Spinner","animation","BrowserRouter","Container","fluid","Navbar","bg","fixed","expand","Brand","aria-controls","Nav","lib","exact","to","Link","Switch","Route","path","component","Report","Schedule","ScheduleNew","components_ViewEmployee","components_RegisterEmployee","components_DeleteEmployee","components_EditEmployee","components_ExportExcel","components_CheckCard","components_CommentEmployee","components_LogIn","Boolean","hostname","match","ReactDOM","render","es","components_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d1ac708a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.96ebfbf9.png\";","import axios from \"axios\";\r\n\r\nexport const production = false;\r\n\r\nexport const serverURL = production\r\n\t? \"http://192.168.1.150:8080\"\r\n\t: \"http://localhost:8080\";\r\nexport const employeeUpdateInterval = 10000;\r\nexport const workLogUpdateInterval = 10000;\r\n\r\nexport const request = axios.create({\r\n\tbaseURL: serverURL,\r\n\twithCredentials: true,\r\n});\r\n","import React from \"react\";\r\n\r\nconst ContainerBox = (props) => {\r\n\treturn (\r\n\t\t<div className=\"container-box\">\r\n\t\t\t<div className=\"container-box-header\">\r\n\t\t\t\t{props.header}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"container-box-body\">\r\n\t\t\t\t{props.children}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ContainerBox;\r\n","import { \r\n\tUPDATE_EMPLOYEES,\r\n\tUPDATE_EMPLOYEE,\r\n\tSHOW_DELETE_EMPLOYEE, \r\n\tHIDE_DELETE_EMPLOYEE, \r\n\tSHOW_EDIT_EMPLOYEE, \r\n\tHIDE_EDIT_EMPLOYEE,\r\n\tSHOW_REGISTER_EMPLOYEE,\r\n\tHIDE_REGISTER_EMPLOYEE,\r\n\tSHOW_EXPORT_EXCEL,\r\n\tHIDE_EXPORT_EXCEL,\r\n\tSHOW_CHECK_CARD,\r\n\tHIDE_CHECK_CARD,\r\n\tSHOW_EMPLOYEE_WORK_LOG,\r\n\tHIDE_EMPLOYEE_WORK_LOG,\r\n\tSHOW_COMMENT_EMPLOYEE,\r\n\tHIDE_COMMENT_EMPLOYEE,\r\n\tSET_SCHEDULE_DAY,\r\n} from \"./actionTypes\";\r\n\r\nexport const updateEmployees = (employees) => {\r\n\treturn {\r\n\t\ttype: UPDATE_EMPLOYEES,\r\n\t\tpayload: employees,\r\n\t}\r\n}\r\n\r\nexport const updateEmployee = (employee) => {\r\n\treturn {\r\n\t\ttype: UPDATE_EMPLOYEE,\r\n\t\tpayload: employee,\r\n\t}\r\n}\r\n\r\nexport const showEmployeeWorkLog = (employee) => {\r\n\treturn {\r\n\t\ttype: SHOW_EMPLOYEE_WORK_LOG,\r\n\t\tpayload: employee,\r\n\t}\r\n}\r\n\r\nexport const hideEmployeeWorkLog = () => {\r\n\treturn {\r\n\t\ttype: HIDE_EMPLOYEE_WORK_LOG,\r\n\t}\r\n}\r\n\r\nexport const showDeleteEmployee = (employee) => {\r\n\treturn {\r\n\t\ttype: SHOW_DELETE_EMPLOYEE,\r\n\t\tpayload: employee,\r\n\t}\r\n}\r\n\r\nexport const hideDeleteEmployee = () => {\r\n\treturn {\r\n\t\ttype: HIDE_DELETE_EMPLOYEE,\r\n\t}\r\n}\r\n\r\nexport const showEditEmployee = (employee) => {\r\n\treturn {\r\n\t\ttype: SHOW_EDIT_EMPLOYEE,\r\n\t\tpayload: employee,\r\n\t}\r\n}\r\n\r\nexport const hideEditEmployee = () => {\r\n\treturn {\r\n\t\ttype: HIDE_EDIT_EMPLOYEE,\r\n\t}\r\n}\r\n\r\nexport const showRegisterEmployee = () => {\r\n\treturn {\r\n\t\ttype: SHOW_REGISTER_EMPLOYEE,\r\n\t}\r\n}\r\n\r\nexport const hideRegisterEmployee = () => {\r\n\treturn {\r\n\t\ttype: HIDE_REGISTER_EMPLOYEE,\r\n\t}\r\n}\r\n\r\nexport const showExportExcel = () => {\r\n\treturn {\r\n\t\ttype: SHOW_EXPORT_EXCEL,\r\n\t}\r\n}\r\n\r\nexport const hideExportExcel = () => {\r\n\treturn {\r\n\t\ttype: HIDE_EXPORT_EXCEL,\r\n\t}\r\n}\r\n\r\nexport const showCheckCard = () => {\r\n\treturn {\r\n\t\ttype: SHOW_CHECK_CARD,\r\n\t}\r\n}\r\n\r\nexport const hideCheckCard = () => {\r\n\treturn {\r\n\t\ttype: HIDE_CHECK_CARD,\r\n\t}\r\n}\r\n\r\nexport const showCommentEmployee = (employee) => {\r\n\treturn {\r\n\t\ttype: SHOW_COMMENT_EMPLOYEE,\r\n\t\tpayload: employee,\r\n\t}\r\n}\r\n\r\nexport const hideCommentEmployee = () => {\r\n\treturn {\r\n\t\ttype: HIDE_COMMENT_EMPLOYEE,\r\n\t}\r\n}","export const UPDATE_EMPLOYEES = \"UPDATE_EMPLOYEES\";\r\nexport const UPDATE_EMPLOYEE = \"UPDATE_EMPLOYEE\";\r\n\r\nexport const SHOW_EMPLOYEE_WORK_LOG = \"SHOW_EMPLOYEE_WORK_LOG\";\r\nexport const HIDE_EMPLOYEE_WORK_LOG = \"HIDE_EMPLOYEE_WORK_LOG\";\r\n\r\nexport const SHOW_DELETE_EMPLOYEE = \"SHOW_DELETE_EMPLOYEE\";\r\nexport const HIDE_DELETE_EMPLOYEE = \"HIDE_DELETE_EMPLOYEE\";\r\n\r\nexport const SHOW_EDIT_EMPLOYEE = \"SHOW_EDIT_EMPLOYEE\";\r\nexport const HIDE_EDIT_EMPLOYEE = \"HIDE_EDIT_EMPLOYEE\";\r\n\r\nexport const SHOW_REGISTER_EMPLOYEE = \"SHOW_REGISTER_EMPLOYEE\";\r\nexport const HIDE_REGISTER_EMPLOYEE = \"HIDE_REGISTER_EMPLOYEE\";\r\n\r\nexport const SHOW_EXPORT_EXCEL = \"SHOW_EXPORT_EXCEL\";\r\nexport const HIDE_EXPORT_EXCEL = \"HIDE_EXPORT_EXCEL\";\r\n\r\nexport const SHOW_CHECK_CARD = \"SHOW_CHECK_CARD\";\r\nexport const HIDE_CHECK_CARD = \"HIDE_CHECK_CARD\";\r\n\r\nexport const SHOW_COMMENT_EMPLOYEE = \"SHOW_COMMENT_EMPLOYEE\";\r\nexport const HIDE_COMMENT_EMPLOYEE = \"HIDE_COMMENT_EMPLOYEE\";","const initialState = {\r\n\temployees: [],\r\n\temployeeWorkLog: {\r\n\t\tshow: false,\r\n\t\tid: null,\r\n\t},\r\n\tdeleteEmployee: {\r\n\t\tshow: false,\r\n\t\temployee: {},\r\n\t},\r\n\teditEmployee: {\r\n\t\tshow: false,\r\n\t\temployee: {},\r\n\t},\r\n\tregisterEmployee: {\r\n\t\tshow: false,\r\n\t},\r\n\texportExcel: {\r\n\t\tshow: false,\r\n\t},\r\n\tcheckCard: {\r\n\t\tshow: false,\r\n\t},\r\n\tcommentEmployee: {\r\n\t\tshow: false,\r\n\t\temployee: {},\r\n\t},\r\n};\r\n\r\nexport default initialState;","import { combineReducers } from 'redux';\r\n\r\nimport { employees } from './employeeReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n\temployees: employees,\r\n});\r\n\r\nexport default rootReducer;","import initialState from \"../store/initialState\";\r\n\r\nimport { \r\n\tUPDATE_EMPLOYEES,\r\n\tUPDATE_EMPLOYEE,\r\n\tSHOW_DELETE_EMPLOYEE, \r\n\tHIDE_DELETE_EMPLOYEE, \r\n\tSHOW_EDIT_EMPLOYEE, \r\n\tHIDE_EDIT_EMPLOYEE,\r\n\tSHOW_REGISTER_EMPLOYEE,\r\n\tHIDE_REGISTER_EMPLOYEE,\r\n\tSHOW_EXPORT_EXCEL,\r\n\tHIDE_EXPORT_EXCEL,\r\n\tSHOW_CHECK_CARD,\r\n\tHIDE_CHECK_CARD,\r\n\tSHOW_EMPLOYEE_WORK_LOG,\r\n\tHIDE_EMPLOYEE_WORK_LOG,\r\n\tSHOW_COMMENT_EMPLOYEE,\r\n\tHIDE_COMMENT_EMPLOYEE,\r\n\tSET_SCHEDULE_DAY,\r\n} from '../actions/actionTypes';\r\n\r\nexport const employees = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_EMPLOYEES:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\temployees: [...action.payload],\r\n\t\t\t}\r\n\t\tcase UPDATE_EMPLOYEE: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\temployees: state.employees.map((employee) => {\r\n\t\t\t\t\treturn employee.id === action.payload.id\r\n\t\t\t\t\t? action.payload\r\n\t\t\t\t\t: employee\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase SHOW_EMPLOYEE_WORK_LOG:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\temployeeWorkLog: {\r\n\t\t\t\t\t...state.employeeWorkLog,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\tid: action.payload,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_EMPLOYEE_WORK_LOG:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\temployeeWorkLog: {\r\n\t\t\t\t\t...state.employeeWorkLog,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t\tid: null,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_DELETE_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tdeleteEmployee: {\r\n\t\t\t\t\t...state.deleteEmployee,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\temployee: action.payload,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_DELETE_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tdeleteEmployee: {\r\n\t\t\t\t\t...state.deleteEmployee,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t\temployee: {},\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_EDIT_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\teditEmployee: {\r\n\t\t\t\t\t...state.editEmployee,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\temployee: action.payload,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_EDIT_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\teditEmployee: {\r\n\t\t\t\t\t...state.editEmployee,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t\temployee: {},\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_REGISTER_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tregisterEmployee: {\r\n\t\t\t\t\t...state.registerEmployee,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_REGISTER_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tregisterEmployee: {\r\n\t\t\t\t\t...state.registerEmployee,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_EXPORT_EXCEL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\texportExcel: {\r\n\t\t\t\t\t...state.exportExcel,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_EXPORT_EXCEL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\texportExcel: {\r\n\t\t\t\t\t...state.exportExcel,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_CHECK_CARD:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcheckCard: {\r\n\t\t\t\t\t...state.checkCard,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_CHECK_CARD:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcheckCard: {\r\n\t\t\t\t\t...state.checkCard,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_COMMENT_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcommentEmployee: {\r\n\t\t\t\t\t...state.commentEmployee,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\temployee: action.payload,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_COMMENT_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcommentEmployee: {\r\n\t\t\t\t\t...state.commentEmployee,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t\temployee: {},\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import { createStore } from \"redux\";\r\nimport rootReducer from \"../reducers\";\r\n\r\nconst store = configureStore();\r\n\r\nfunction configureStore() {\r\n\treturn createStore(\r\n\t\trootReducer,\r\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n\t);\r\n}\r\n\r\nexport default store;","import { request } from \"./config\";\r\nimport store from \"../store/store\";\r\nimport { updateEmployees, updateEmployee } from \"../actions/employeeActions\";\r\n\r\nexport const storeUpdateEmployees = () => {\r\n\treturn getServerEmployees().then((res) => {\r\n\t\tstore.dispatch(updateEmployees(res.data));\r\n\t});\r\n}\r\n\r\nexport const storeUpdateEmployee = (id) => {\r\n\treturn getServerEmployee(id).then((res) => {\r\n\t\tstore.dispatch(updateEmployee(res.data));\r\n\t});\r\n}\r\n\r\n// ------------ Server requests ------------\r\nexport const getServerEmployees = () => {\r\n\treturn request.post(\"/getEmployees\");\r\n}\r\n\r\nexport const getServerEmployee = (id) => {\r\n\treturn request.post(\"/getEmployee\", { \r\n\t\tid \r\n\t});\r\n}\r\n\r\nexport const getSchedules = (month) => {\r\n\treturn request.post(\"/getSchedules\", {\r\n\t\tmonth\r\n\t});\r\n}\r\n\r\nexport const saveSchedules = (schedules) => {\r\n\treturn request.post(\"/saveSchedules\", {\r\n\t\tschedules\r\n\t});\r\n}\r\n\r\nexport const getServerEmployeeWorkLog = (id, order = \"DESC\") => {\r\n\treturn request.post(\"/getEmployeeWorkLog\", { \r\n\t\tid,\r\n\t\torder\r\n\t});\r\n}\r\n\r\nexport const getServerEmployeeWorkLogFromTo = (id, from, to) => {\r\n\treturn request.post(\"/getEmployeeWorkLogFromTo\", { \r\n\t\tid,\r\n\t\tfrom,\r\n\t\tto\r\n\t});\r\n}\r\n\r\nexport const deleteServerWorkLog = (id, working, employeeId) => {\r\n\treturn request.post(\"/deleteWorkLog\", { \r\n\t\tid,\r\n\t\tworking,\r\n\t\temployeeId,\r\n\t});\r\n}\r\n\r\nexport const editServerWorkLog = (id, startDate, endDate, working) => {\r\n\treturn request.post(\"/editWorkLog\", { \r\n\t\tid,\r\n\t\tstartDate,\r\n\t\tendDate,\r\n\t\tworking,\r\n\t});\r\n}\r\n\r\nexport const addServerEmployee = (employee) => {\r\n\treturn request.post(\"/addEmployee\", {\r\n\t\temployee\r\n\t});\r\n}\r\n\r\nexport const setServerEmployeeWorking = (id, working) => {\r\n\treturn request.post(\"/setEmployeeWorking\", {\r\n\t\tid, \r\n\t\tworking\r\n\t});\r\n}\r\n\r\nexport const setServerEmployeeArchived = (id, archived) => {\r\n\treturn request.post(\"/setArchivedEmployee\", {\r\n\t\tid, \r\n\t\tarchived\r\n\t});\r\n}\r\n\r\nexport const setServerEmployeeActive = (id, active) => {\r\n\treturn request.post(\"/setActiveEmployee\", {\r\n\t\tid, \r\n\t\tactive\r\n\t});\r\n}\r\n\r\nexport const deleteServerEmployee = (id) => {\r\n\treturn request.post(\"/deleteEmployee\", {\r\n\t\tid\r\n\t});\r\n}\r\n\r\nexport const editServerEmployee = (employee) => {\r\n\treturn request.post(\"/editEmployee\", {\r\n\t\temployee\r\n\t});\r\n}\r\n\r\nexport const exportServerEmployees = (settings) => {\r\n\treturn request.post(\"/export\", {\r\n\t\tsettings\r\n\t}).then(() => {\r\n\t\treturn request.get(\"/export\", {\r\n\t\t\tresponseType: \"blob\"\r\n\t\t})\r\n\t});\r\n}\r\n\r\nexport const addEmployeeComment = (employee, comment) => {\r\n\treturn request.post(\"/addEmployeeComment\", {\r\n\t\temployee,\r\n\t\tcomment,\r\n\t});\r\n}\r\n\r\nexport const getEmployeeComments = (id) => {\r\n\treturn request.post(\"/getEmployeeComments\", {\r\n\t\tid,\r\n\t});\r\n}\r\n\r\nexport const deleteEmployeeComment = (commentId) => {\r\n\treturn request.post(\"/deleteEmployeeComment\", {\r\n\t\tcommentId,\r\n\t});\r\n}\r\n\r\n// ------------ Card manipulation ------------\r\n\r\nexport const cardScanned = (uid) => {\r\n\treturn request.post(\"/cardScanned\", { \r\n\t\tuid: uid,\r\n\t\tadmin: 1,\r\n\t});\r\n}\r\n\r\nexport const getEmployeeByUID = (uid) => {\r\n\treturn request.post(\"/getEmployeeByUID\", {\r\n\t\tuid,\r\n\t});\r\n}\r\n\r\nexport const setEmployeeUID = (uid, id) => {\r\n\treturn request.post(\"/setEmployeeUID\", {\r\n\t\tuid,\r\n\t\tid\r\n\t});\r\n}\r\n\r\nexport const removeEmployeeUID = (id) => {\r\n\treturn request.post(\"/removeEmployeeUID\", {\r\n\t\tid\r\n\t});\r\n}\r\n\r\nexport const awaitCard = () => {\r\n\treturn request.post(\"/awaitCard\");\r\n}\r\n","import React, { forwardRef } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Button, Dropdown, Row, Col, Tooltip, OverlayTrigger} from \"react-bootstrap\";\r\n\r\nimport { \r\n\tshowDeleteEmployee,\r\n\tshowEditEmployee,\r\n\tshowCommentEmployee,\r\n} from \"../actions/employeeActions\";\r\n\r\nimport { \r\n\tsetServerEmployeeWorking, \r\n\tsetServerEmployeeArchived, \r\n\tsetServerEmployeeActive,\r\n\tstoreUpdateEmployee\r\n} from \"../utils/employeeUtils\";\r\n\r\nimport { FiMoreHorizontal, FiTrash, FiEdit,FiArchive, FiX,FiCheck } from \"react-icons/fi\";\r\n\r\nconst CommandButton = forwardRef((props, ref) => {\r\n\treturn <Button ref={ref} variant=\"link\" onClick={props.onClick}>\r\n\t\t<FiMoreHorizontal/>\r\n\t</Button>\r\n});\r\n\r\nconst Commands = (props) => {\r\n\treturn (\r\n\t\t<Row className=\"justify-content-end\">\r\n\t\t\t<Col xs=\"auto\" className=\"d-inline-block\">\r\n\t\t\t\t<Dropdown>\r\n\t\t\t\t\t<Dropdown.Toggle as={CommandButton}/>\r\n\t\t\t\t\t<Dropdown.Menu flip={true} alignRight={true}>\r\n\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\teventKey=\"1\"\r\n\t\t\t\t\t\t\tonClick={() => props.showEditEmployee(props.employee)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FiEdit className=\"mr-2 mb-1\"/>\r\n\t\t\t\t\t\t\tRediģēt\r\n\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\teventKey=\"2\"\r\n\t\t\t\t\t\t\tonClick={() => setServerEmployeeArchived(props.employee.id, !props.employee.archived).then(() => {\r\n\t\t\t\t\t\t\t\tstoreUpdateEmployee(props.employee.id);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FiArchive height=\"100%\" width=\"auto\" className=\"mr-2 mb-1\"/>\r\n\t\t\t\t\t\t\t{ props.employee.archived ? \"Izņemt no arhīva\" : \"Arhivēt\" }\r\n\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\teventKey=\"3\"\r\n\t\t\t\t\t\t\tonClick={() => setServerEmployeeActive(props.employee.id, !props.employee.active).then(() => {\r\n\t\t\t\t\t\t\t\tstoreUpdateEmployee(props.employee.id);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tprops.employee.active \r\n\t\t\t\t\t\t\t\t? <FiX height=\"100%\" width=\"auto\" className=\"mr-2 mb-1\"/>\r\n\t\t\t\t\t\t\t\t: <FiCheck height=\"100%\" width=\"auto\" className=\"mr-2 mb-1\"/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tprops.employee.active \r\n\t\t\t\t\t\t\t\t? \"Deaktivizēt\" \r\n\t\t\t\t\t\t\t\t: \"Aktivizēt\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\teventKey=\"4\"\r\n\t\t\t\t\t\t\tonClick={() => props.showDeleteEmployee(props.employee)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FiTrash height=\"100%\" width=\"auto\" className=\"mr-2 mb-1\"/>\r\n\t\t\t\t\t\t\tDzēst\r\n\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\teventKey=\"5\"\r\n\t\t\t\t\t\t\tonClick={() => props.showCommentEmployee(props.employee)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FiEdit className=\"mr-2 mb-1\"/>\r\n\t\t\t\t\t\t\tPievienot Komentāru\r\n\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t</Dropdown.Menu>\r\n\t\t\t\t</Dropdown>\r\n\t\t\t</Col>\r\n\t\t\t<Col xs=\"auto\" className=\"d-inline-block\">\r\n\t\t\t\t<OverlayTrigger\r\n\t\t\t\t\tplacement={\"top\"}\r\n\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t<Tooltip>\r\n\t\t\t\t\t\t\tAtzīmēt kā {props.employee.working ? \"izgājušu\" : \"ienākušu\"}\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() => setServerEmployeeWorking(props.employee.id, !props.employee.working).then(() => {\r\n\t\t\t\t\t\t\tstoreUpdateEmployee(props.employee.id);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tvariant={props.employee.working ? \"danger\" : \"success\"}\r\n\t\t\t\t\t>\r\n\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tprops.employee.working \r\n\t\t\t\t\t\t\t? <FiX/>\r\n\t\t\t\t\t\t\t: <FiCheck/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</OverlayTrigger>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t);\r\n};\r\n\r\nfunction mapStateToProps() {\r\n\treturn {};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowDeleteEmployee: (employee) => dispatch(showDeleteEmployee(employee)),\r\n\t\tshowEditEmployee: (employee) => dispatch(showEditEmployee(employee)),\r\n\t\tshowCommentEmployee: (employee) => dispatch(showCommentEmployee(employee)),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Commands);\r\n","import React from \"react\";\r\nimport { Form } from \"react-bootstrap\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport en from 'date-fns/locale/en-GB';\r\n\r\nconst BoostrapDatePicker = (props) => {\r\n    return (\r\n        <DatePicker\r\n            {...props}\r\n            className=\"text-center\"\r\n            customInput={<Form.Control/>}\r\n            locale={en}\r\n        />\r\n    );\r\n}\r\n\r\nexport default BoostrapDatePicker;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Cookies from 'universal-cookie';\r\n\r\nimport { Form, Button, Collapse, Row, Col, Dropdown, DropdownButton } from \"react-bootstrap\";\r\nimport BoostrapDatePicker from \"./BoostrapDatePicker\";\r\n\r\nimport {\r\n\tshowRegisterEmployee,\r\n\tshowExportExcel,\r\n\tshowCheckCard\r\n} from \"../actions/employeeActions\";\r\n\r\nimport { FiMinimize2, FiMaximize2 } from \"react-icons/fi\";\r\n\r\nclass Filters extends React.PureComponent {\r\n    constructor() {\r\n        super();\r\n\r\n        const cookies = new Cookies();\r\n        let settings = cookies.get(\"settings\");\r\n        \r\n        const startDate = new Date();\r\n        startDate.setHours(0,0,0);\r\n\r\n        const endDate = new Date();\r\n        endDate.setHours(23,59,59);\r\n\r\n\t\tif(settings) {\r\n\t\t\tsettings = {\r\n                ...settings,\r\n\t\t\t\tstartDate: settings.startDate ? new Date(settings.startDate) : new Date(startDate),\r\n\t\t\t\tendDate: settings.endDate ? new Date(settings.endDate) : new Date(endDate),\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tsettings = {\r\n\t\t\t\tshowFilters: false,\r\n\t\t\t\tshowArchive: false,\r\n\t\t\t\tshowInactive: false,\r\n\t\t\t\tshowWorking: false,\r\n\t\t\t\tshowNotWorking: false,\r\n\t\t\t\tnameFilter: \"\",\r\n\t\t\t\tpositionFilter: \"\",\r\n                companyFilter: \"\",\r\n                startDate: startDate,\r\n                endDate: endDate,\r\n\t\t\t}\r\n\r\n\t\t\tcookies.set(\"settings\", settings);\r\n        }\r\n\r\n        this.state = {\r\n            ...settings,\r\n\t\t\tdropdown: {\r\n\t\t\t\tcurrentFilter: \"Šodiena\",\r\n\t\t\t\tfilters: [\"Šodiena\", \"Vakardiena\", \"Pēdējās 7 dienas\", \"Pēdējās 30 dienas\"]\r\n\t\t\t}\r\n        }\r\n    }\r\n    \r\n    componentDidMount() {\r\n        this.props.filterData(this.filterData);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.filterData(undefined);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if(\r\n\t\t\tprevState.showArchive !== this.state.showArchive\r\n\t\t\t|| prevState.showInactive !== this.state.showInactive\r\n\t\t\t|| prevState.showWorking !== this.state.showWorking\r\n\t\t\t|| prevState.showNotWorking !== this.state.showNotWorking\r\n\t\t\t|| prevState.nameFilter !== this.state.nameFilter\r\n\t\t\t|| prevState.positionFilter !== this.state.positionFilter\r\n            || prevState.companyFilter !== this.state.companyFilter\r\n            || prevState.startDate !== this.state.startDate\r\n            || prevState.endDate !== this.state.endDate) {\r\n\t\t\tthis.onFilterChange();\r\n        }\r\n        \r\n        if(\r\n\t\t\tprevState.showFilters !== this.state.showFilters\r\n\t\t\t||prevState.showArchive !== this.state.showArchive\r\n\t\t\t|| prevState.showInactive !== this.state.showInactive\r\n\t\t\t|| prevState.showWorking !== this.state.showWorking\r\n\t\t\t|| prevState.showNotWorking !== this.state.showNotWorking\r\n\t\t\t|| prevState.nameFilter !== this.state.nameFilter\r\n\t\t\t|| prevState.positionFilter !== this.state.positionFilter\r\n            || prevState.companyFilter !== this.state.companyFilter\r\n            || prevState.startDate !== this.state.startDate\r\n            || prevState.endDate !== this.state.endDate) {\r\n\t\t\tthis.saveSettings();\r\n\t\t}\r\n    }\r\n\r\n    saveSettings = () => {\r\n\t\tconst cookies = new Cookies();\r\n\t\tconst settings = {\r\n            ...cookies.get(\"settings\"),\r\n\t\t\tshowFilters: this.state.showFilters,\r\n\t\t\tshowArchive: this.state.showArchive,\r\n\t\t\tshowInactive: this.state.showInactive,\r\n\t\t\tshowWorking: this.state.showWorking,\r\n\t\t\tshowNotWorking: this.state.showNotWorking,\r\n\t\t\tnameFilter: this.state.nameFilter,\r\n\t\t\tpositionFilter: this.state.positionFilter,\r\n            companyFilter: this.state.companyFilter,\r\n            startDate: this.state.startDate,\r\n            endDate: this.state.endDate,\r\n\t\t}\r\n\r\n\t\tcookies.set(\"settings\", settings);\r\n    }\r\n\r\n    onFilterChange = () => {\r\n        this.props.onFilterChange(this.state);\r\n    }\r\n\r\n    filterData = (tableData) => {\r\n\t\tthis.applyNameFilter(tableData, (nameFilter) => {\r\n\t\t\tthis.applyPositionFilter(nameFilter, (positionFilter) => {\r\n\t\t\t\tthis.applyCompanyFilter(positionFilter, (companyFilter) => {\r\n\t\t\t\t\tthis.applyCheckboxFilters(companyFilter, (checkboxFilter) => {\r\n\t\t\t\t\t\tthis.props.onDataFiltered(checkboxFilter);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n    }\r\n    \r\n    applyNameFilter = (data, callback = () => null) => {\r\n\t\tconst result = data.filter((row) => {\r\n\t\t\treturn (row.name.name + \" \" + row.name.surname).toString().toLowerCase().indexOf(this.state.nameFilter.toLowerCase()) > -1;\r\n\t\t});\r\n\t\tcallback(result);\r\n\t}\r\n\r\n\tapplyCompanyFilter = (data, callback = () => null) => {\r\n\t\tconst result = data.filter((row) => {\r\n\t\t\tconst company = row.company ? row.company : \"\";\r\n\t\t\treturn company.toString().toLowerCase().indexOf(this.state.companyFilter.toLowerCase()) > -1;\r\n\t\t});\r\n\t\tcallback(result);\r\n\t}\r\n\r\n\tapplyPositionFilter = (data, callback = () => null) => {\r\n\t\tconst result = data.filter((row) => {\r\n\t\t\tconst position = row.position ? row.position : \"\";\r\n\t\t\treturn position.toString().toLowerCase().indexOf(this.state.positionFilter.toLowerCase()) > -1;\r\n\t\t});\r\n\t\tcallback(result);\r\n\t}\r\n\r\n\tapplyCheckboxFilters = (data, callback = () => null) => {\r\n\t\tconst result = data.filter((row) => {\r\n\t\t\tif(row.archived && !this.state.showArchive) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(!row.active && !this.state.showInactive) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(row.working && this.state.showNotWorking) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(!row.working && this.state.showWorking) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tcallback(result);\r\n\t}\r\n\r\n    onToggleFilters = () => {\r\n\t\tthis.setState({ showFilters: !this.state.showFilters });\r\n\t}\r\n\r\n    onToggleArchive = () => {\r\n\t\tthis.setState({ showArchive: !this.state.showArchive });\r\n\t}\r\n\r\n\tonToggleInactive = () => {\r\n\t\tthis.setState({ showInactive: !this.state.showInactive });\r\n\t}\r\n\r\n\tonToggleShowWorking = () => {\r\n\t\tthis.setState({ showWorking: !this.state.showWorking });\r\n\t}\r\n\r\n\tonToggleShowNotWorking = () => {\r\n\t\tthis.setState({ showNotWorking: !this.state.showNotWorking });\r\n\t}\r\n\r\n\tonChangeNameFilter = (e) => {\r\n\t\tthis.setState({ nameFilter: e.target.value });\r\n\t}\r\n\r\n\tonChangePositionFilter = (e) => {\r\n\t\tthis.setState({ positionFilter: e.target.value });\r\n\t}\r\n\r\n\tonChangeCompanyFilter = (e) => {\r\n\t\tthis.setState({ companyFilter: e.target.value });\r\n    }\r\n    \r\n    onChangeDateStart = (date) => {\r\n\t\tconst startOfDay = new Date(date);\r\n\t\tstartOfDay.setHours(0,0,0);\r\n\t\tthis.setState({\r\n\t\t\tstartDate: startOfDay,\r\n\t\t});\r\n\t}\r\n\r\n\tonChangeDateEnd = (date) => {\r\n\t\tconst endOfDay = new Date(date);\r\n\t\tendOfDay.setHours(23,59,59);\r\n\t\tthis.setState({\r\n\t\t\tendDate: endOfDay,\r\n\t\t});\r\n    }\r\n    \r\n    onClickFilter = (index) => {\r\n\t\tswitch(index) {\r\n\t\t\tcase 0: {\r\n\t\t\t\tthis.onChangeDateStart(new Date());\r\n\t\t\t\tthis.onChangeDateEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 1: {\r\n\t\t\t\tconst yesterday = new Date();\r\n\t\t\t\tyesterday.setDate(yesterday.getDate() - 1);\r\n\t\t\t\tthis.onChangeDateStart(yesterday);\r\n\t\t\t\tthis.onChangeDateEnd(yesterday);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 2: {\r\n\t\t\t\tconst last7Days = new Date();\r\n\t\t\t\tlast7Days.setDate(last7Days.getDate() - 7);\r\n\t\t\t\tthis.onChangeDateStart(last7Days);\r\n\t\t\t\tthis.onChangeDateEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 3: {\r\n\t\t\t\tconst last30Days = new Date();\r\n\t\t\t\tlast30Days.setDate(last30Days.getDate() - 30);\r\n\t\t\t\tthis.onChangeDateStart(last30Days);\r\n\t\t\t\tthis.onChangeDateEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault: {\r\n\t\t\t\tthis.onChangeDateStart(new Date());\r\n\t\t\t\tthis.onChangeDateEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tdropdown: {\r\n\t\t\t\t...this.state.dropdown,\r\n\t\t\t\tcurrentFilter: this.state.dropdown.filters[index],\r\n\t\t\t}\t\t\t\r\n\t\t})\r\n\t}\r\n\r\n\tclearAllFilters = () => {\r\n\t\tconst startDate = new Date();\r\n\t\tstartDate.setHours(0,0,0);\r\n\r\n\t\tconst endDate = new Date();\r\n\t\tendDate.setHours(23,59,59);\r\n\r\n\t\tthis.setState({\r\n\t\t\tnameFilter: \"\",\r\n\t\t\tpositionFilter: \"\",\r\n\t\t\tcompanyFilter: \"\",\r\n\t\t\tshowArchive: false,\r\n\t\t\tshowInactive: false,\r\n\t\t\tshowWorking: false,\r\n\t\t\tshowNotWorking: false,\r\n\t\t\tstartDate: startDate,\r\n\t\t\tendDate: endDate,\r\n\t\t});\r\n    }\r\n    \r\n\trender() {\r\n        const dateFilter = (\r\n            <>\r\n                <Col xs={\"auto\"}>\r\n                    <Form.Group as={Row}>\r\n                        <Form.Label column xs={\"auto\"} className=\"pr-0\">Dati no</Form.Label>\r\n                        <Col>\r\n                            <BoostrapDatePicker\r\n                                dateFormat=\"dd.MM.yyyy.\"\r\n                                selected={this.state.startDate}\r\n                                onChange={this.onChangeDateStart}\r\n                                maxDate={new Date()}\r\n                            />\r\n                        </Col>\r\n                    </Form.Group>\r\n                </Col>\r\n                <Col xs={\"auto\"}>\r\n                    <Form.Group as={Row}>\r\n                        <Form.Label column xs={\"auto\"} className=\"pl-0 pr-0\">līdz</Form.Label>\r\n                        <Col>\r\n                            <BoostrapDatePicker\r\n                                dateFormat=\"dd.MM.yyyy.\"\r\n                                selected={this.state.endDate}\r\n                                onChange={this.onChangeDateEnd}\r\n                                minDate={this.state.startDate}\r\n                                maxDate={new Date()}\r\n                            />\r\n                        </Col>\r\n                    </Form.Group>\r\n                </Col>\r\n                <Col xs={\"auto\"}>\r\n                    <DropdownButton\r\n                        alignRight\r\n                        variant=\"secondary\"\r\n                        title={this.state.dropdown.currentFilter}\r\n                    >\r\n                    {\r\n                        this.state.dropdown.filters.map((filter, index) => {\r\n                            return <Dropdown.Item key={index} onClick={() => this.onClickFilter(index)}>{filter}</Dropdown.Item>\r\n                        })\r\n                    }\r\n                    </DropdownButton>\r\n                </Col>\r\n            </>\r\n        );\r\n\r\n\t\treturn (\r\n            <Row>\r\n                <Col>\r\n                    <Row>\r\n                        <Col>\r\n                            <Button \r\n                                variant=\"link\" \r\n                                onClick={this.onToggleFilters}\r\n                                className=\"float-left\"\r\n                            >\r\n                                {\r\n                                    this.state.showFilters\r\n                                    ? <FiMinimize2 className=\"mr-2 mb-1\"/>\r\n                                    : <FiMaximize2 className=\"mr-2 mb-1\"/>\r\n                                }\r\n                                Filtri\r\n                            </Button>\r\n                            <Dropdown alignRight className=\"float-right\">\r\n                                <Dropdown.Toggle variant=\"link\">\r\n                                    Opcijas\r\n                                </Dropdown.Toggle>\r\n\r\n                                <Dropdown.Menu>\r\n                                    <Dropdown.Item onClick={this.props.showRegisterEmployee}>Pievienot darbinieku</Dropdown.Item>\r\n                                    <Dropdown.Item onClick={this.props.showCheckCard}>Atrast darbinieku pēc kartes</Dropdown.Item>\r\n                                    <Dropdown.Item onClick={this.props.showExportExcel}>Eksportēt Excel</Dropdown.Item>\r\n                                </Dropdown.Menu>\r\n                            </Dropdown>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col>\r\n                            <Collapse in={this.state.showFilters}>\r\n                                <div>\r\n                                    <Row>\r\n                                        <Col>\r\n                                            <Form.Group>\r\n                                                <Form.Check \r\n                                                    type=\"checkbox\" \r\n                                                    label=\"Rādīt arhīvā esošos darbiniekus\"\r\n                                                    checked={this.state.showArchive}\r\n                                                    onChange={this.onToggleArchive}\r\n                                                />\r\n                                            </Form.Group>\r\n                                            <Form.Group>\r\n                                                <Form.Check \r\n                                                    type=\"checkbox\" \r\n                                                    label=\"Rādīt deaktivizētus darbiniekus\"\r\n                                                    checked={this.state.showInactive}\r\n                                                    onChange={this.onToggleInactive}\r\n                                                />\r\n                                            </Form.Group>\r\n                                            <Form.Group>\r\n                                                <Form.Check \r\n                                                    type=\"checkbox\" \r\n                                                    label=\"Rādīt tikai ienākušos darbiniekus\"\r\n                                                    checked={this.state.showWorking}\r\n                                                    onChange={this.onToggleShowWorking}\r\n                                                />\r\n                                            </Form.Group>\r\n                                            <Form.Group>\r\n                                                <Form.Check \r\n                                                    type=\"checkbox\" \r\n                                                    label=\"Rādīt tikai izgājušos darbiniekus\"\r\n                                                    checked={this.state.showNotWorking}\r\n                                                    onChange={this.onToggleShowNotWorking}\r\n                                                />\r\n                                            </Form.Group>\r\n                                        </Col>\r\n                                        <Col>\r\n                                            <Form.Group>\r\n                                                <Form.Control\r\n                                                    placeholder=\"Vārds...\"\r\n                                                    onChange={this.onChangeNameFilter}\r\n                                                    value={this.state.nameFilter}\r\n                                                />\r\n                                                <Form.Text>\r\n                                                    Meklēt darbinieku pēc vārda vai uzvārda\r\n                                                </Form.Text>\r\n                                            </Form.Group>\r\n                                            <Form.Group>\r\n                                                <Form.Control\r\n                                                    placeholder=\"Amats...\"\r\n                                                    onChange={this.onChangePositionFilter}\r\n                                                    value={this.state.positionFilter}\r\n                                                />\r\n                                                <Form.Text>\r\n                                                    Meklēt darbinieku pēc amata\r\n                                                </Form.Text>\r\n                                            </Form.Group>\r\n                                            <Form.Group>\r\n                                                <Form.Control\r\n                                                    placeholder=\"Uzņēmums...\"\r\n                                                    onChange={this.onChangeCompanyFilter}\r\n                                                    value={this.state.companyFilter}\r\n                                                />\r\n                                                <Form.Text>\r\n                                                    Meklēt darbinieku pēc uzņēmuma\r\n                                                </Form.Text>\r\n                                            </Form.Group>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <Row className=\"mb-2\">\r\n                                        {\r\n                                            this.props.dateFilter\r\n                                            ? dateFilter\r\n                                            : null\r\n                                        }\r\n                                        <Col>\r\n                                            <Button\r\n                                                variant=\"danger\"\r\n                                                onClick={this.clearAllFilters}\r\n                                                className=\"float-right\"\r\n                                            >\r\n                                                <nobr>Notīrīt visus filtrus</nobr>\r\n                                            </Button>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </div>\r\n                            </Collapse>\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n            </Row>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowRegisterEmployee: () => dispatch(showRegisterEmployee()),\r\n\t\tshowExportExcel: () => dispatch(showExportExcel()),\r\n\t\tshowCheckCard: () => dispatch(showCheckCard())\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Filters);\r\n","import { request } from \"./config\";\r\n\r\nexport const pingServer = () => {\r\n\treturn request.post(\"/ping\");\r\n}\r\n\r\nexport const addZero = (i) => {\r\n\tif (i < 10) {\r\n\t\ti = \"0\" + i;\r\n\t}\r\n\treturn i;\r\n}\r\n\r\nexport const millisecondConverter = (ms) => {\r\n\tlet seconds = Math.floor(ms/1000);\r\n\tlet minutes = Math.floor(seconds/60);\r\n\tlet hours = Math.floor(minutes/60);\r\n\r\n\tminutes = minutes-(hours*60);\r\n\tseconds = seconds-(hours*60*60)-(minutes*60);\r\n\r\n\treturn {\r\n\t\tseconds,\r\n\t\tminutes,\r\n\t\thours\r\n\t}\r\n}\r\n\r\nexport const daysInMonth = (month, year) => {\r\n    return new Date(year, month + 1, 0).getDate();\r\n}\r\n\r\nexport const getMonthName = (month) => {\r\n\tconst months = [\r\n\t\t\"Janvāris\",\r\n\t\t\"Februāris\",\r\n\t\t\"Marts\",\r\n\t\t\"Aprīlis\",\r\n\t\t\"Maijs\",\r\n\t\t\"Jūnijs\",\r\n\t\t\"Jūlijs\",\r\n\t\t\"Augusts\",\r\n\t\t\"Septembris\",\r\n\t\t\"Oktobris\",\r\n\t\t\"Novembris\",\r\n\t\t\"Decembris\"\r\n\t];\r\n\r\n\treturn months[month];\r\n}\r\n\r\nexport const isWeekend = (date) => {\r\n\tconst day = date.getDay();\r\n\treturn ((day === 5) || (day === 6));\r\n}\r\n\r\nexport const convertSpecialCharacters = (string) => {\r\n\tconst special = [\"Ā\", \"Č\", \"Ē\", \"Ģ\", \"Ī\", \"Ķ\", \"Ļ\", \"Ņ\", \"Š\", \"Ū\", \"Ž\"];\r\n\tconst normal = [\"A\", \"C\", \"E\", \"G\", \"I\", \"K\", \"L\", \"N\", \"S\", \"U\", \"Z\"];\r\n\r\n\tlet output = \"\";\r\n\tfor (let i = 0; i < string.length; i++) {\r\n\t\tconst letter = string.toUpperCase().charAt(i);\r\n\t\tif(special.indexOf(letter) !== -1) {\r\n\t\t\toutput += normal[special.indexOf(letter)]; \r\n\t\t} else {\r\n\t\t\toutput += letter;\r\n\t\t}\r\n\t}\r\n\treturn output;\r\n}\r\n\r\nexport const getDifference = (a, b) => {\r\n    let i = 0;\r\n    let j = 0;\r\n    let result = \"\";\r\n\r\n    while (j < b.length)\r\n    {\r\n        if (a[i] !== b[j] || i === a.length)\r\n            result += b[j];\r\n        else\r\n            i++;\r\n        j++;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport const keyboardMap = [\r\n\t\"\", // [0]\r\n\t\"\", // [1]\r\n\t\"\", // [2]\r\n\t\"CANCEL\", // [3]\r\n\t\"\", // [4]\r\n\t\"\", // [5]\r\n\t\"HELP\", // [6]\r\n\t\"\", // [7]\r\n\t\"BACK_SPACE\", // [8]\r\n\t\"TAB\", // [9]\r\n\t\"\", // [10]\r\n\t\"\", // [11]\r\n\t\"CLEAR\", // [12]\r\n\t\"ENTER\", // [13]\r\n\t\"ENTER_SPECIAL\", // [14]\r\n\t\"\", // [15]\r\n\t\"SHIFT\", // [16]\r\n\t\"CONTROL\", // [17]\r\n\t\"ALT\", // [18]\r\n\t\"PAUSE\", // [19]\r\n\t\"CAPS_LOCK\", // [20]\r\n\t\"KANA\", // [21]\r\n\t\"EISU\", // [22]\r\n\t\"JUNJA\", // [23]\r\n\t\"FINAL\", // [24]\r\n\t\"HANJA\", // [25]\r\n\t\"\", // [26]\r\n\t\"ESCAPE\", // [27]\r\n\t\"CONVERT\", // [28]\r\n\t\"NONCONVERT\", // [29]\r\n\t\"ACCEPT\", // [30]\r\n\t\"MODECHANGE\", // [31]\r\n\t\"SPACE\", // [32]\r\n\t\"PAGE_UP\", // [33]\r\n\t\"PAGE_DOWN\", // [34]\r\n\t\"END\", // [35]\r\n\t\"HOME\", // [36]\r\n\t\"LEFT\", // [37]\r\n\t\"UP\", // [38]\r\n\t\"RIGHT\", // [39]\r\n\t\"DOWN\", // [40]\r\n\t\"SELECT\", // [41]\r\n\t\"PRINT\", // [42]\r\n\t\"EXECUTE\", // [43]\r\n\t\"PRINTSCREEN\", // [44]\r\n\t\"INSERT\", // [45]\r\n\t\"DELETE\", // [46]\r\n\t\"\", // [47]\r\n\t\"0\", // [48]\r\n\t\"1\", // [49]\r\n\t\"2\", // [50]\r\n\t\"3\", // [51]\r\n\t\"4\", // [52]\r\n\t\"5\", // [53]\r\n\t\"6\", // [54]\r\n\t\"7\", // [55]\r\n\t\"8\", // [56]\r\n\t\"9\", // [57]\r\n\t\"COLON\", // [58]\r\n\t\"SEMICOLON\", // [59]\r\n\t\"LESS_THAN\", // [60]\r\n\t\"EQUALS\", // [61]\r\n\t\"GREATER_THAN\", // [62]\r\n\t\"QUESTION_MARK\", // [63]\r\n\t\"AT\", // [64]\r\n\t\"A\", // [65]\r\n\t\"B\", // [66]\r\n\t\"C\", // [67]\r\n\t\"D\", // [68]\r\n\t\"E\", // [69]\r\n\t\"F\", // [70]\r\n\t\"G\", // [71]\r\n\t\"H\", // [72]\r\n\t\"I\", // [73]\r\n\t\"J\", // [74]\r\n\t\"K\", // [75]\r\n\t\"L\", // [76]\r\n\t\"M\", // [77]\r\n\t\"N\", // [78]\r\n\t\"O\", // [79]\r\n\t\"P\", // [80]\r\n\t\"Q\", // [81]\r\n\t\"R\", // [82]\r\n\t\"S\", // [83]\r\n\t\"T\", // [84]\r\n\t\"U\", // [85]\r\n\t\"V\", // [86]\r\n\t\"W\", // [87]\r\n\t\"X\", // [88]\r\n\t\"Y\", // [89]\r\n\t\"Z\", // [90]\r\n\t\"OS_KEY\", // [91] Windows Key (Windows) or Command Key (Mac)\r\n\t\"\", // [92]\r\n\t\"CONTEXT_MENU\", // [93]\r\n\t\"\", // [94]\r\n\t\"SLEEP\", // [95]\r\n\t\"NUMPAD0\", // [96]\r\n\t\"NUMPAD1\", // [97]\r\n\t\"NUMPAD2\", // [98]\r\n\t\"NUMPAD3\", // [99]\r\n\t\"NUMPAD4\", // [100]\r\n\t\"NUMPAD5\", // [101]\r\n\t\"NUMPAD6\", // [102]\r\n\t\"NUMPAD7\", // [103]\r\n\t\"NUMPAD8\", // [104]\r\n\t\"NUMPAD9\", // [105]\r\n\t\"MULTIPLY\", // [106]\r\n\t\"ADD\", // [107]\r\n\t\"SEPARATOR\", // [108]\r\n\t\"SUBTRACT\", // [109]\r\n\t\"DECIMAL\", // [110]\r\n\t\"DIVIDE\", // [111]\r\n\t\"F1\", // [112]\r\n\t\"F2\", // [113]\r\n\t\"F3\", // [114]\r\n\t\"F4\", // [115]\r\n\t\"F5\", // [116]\r\n\t\"F6\", // [117]\r\n\t\"F7\", // [118]\r\n\t\"F8\", // [119]\r\n\t\"F9\", // [120]\r\n\t\"F10\", // [121]\r\n\t\"F11\", // [122]\r\n\t\"F12\", // [123]\r\n\t\"F13\", // [124]\r\n\t\"F14\", // [125]\r\n\t\"F15\", // [126]\r\n\t\"F16\", // [127]\r\n\t\"F17\", // [128]\r\n\t\"F18\", // [129]\r\n\t\"F19\", // [130]\r\n\t\"F20\", // [131]\r\n\t\"F21\", // [132]\r\n\t\"F22\", // [133]\r\n\t\"F23\", // [134]\r\n\t\"F24\", // [135]\r\n\t\"\", // [136]\r\n\t\"\", // [137]\r\n\t\"\", // [138]\r\n\t\"\", // [139]\r\n\t\"\", // [140]\r\n\t\"\", // [141]\r\n\t\"\", // [142]\r\n\t\"\", // [143]\r\n\t\"NUM_LOCK\", // [144]\r\n\t\"SCROLL_LOCK\", // [145]\r\n\t\"WIN_OEM_FJ_JISHO\", // [146]\r\n\t\"WIN_OEM_FJ_MASSHOU\", // [147]\r\n\t\"WIN_OEM_FJ_TOUROKU\", // [148]\r\n\t\"WIN_OEM_FJ_LOYA\", // [149]\r\n\t\"WIN_OEM_FJ_ROYA\", // [150]\r\n\t\"\", // [151]\r\n\t\"\", // [152]\r\n\t\"\", // [153]\r\n\t\"\", // [154]\r\n\t\"\", // [155]\r\n\t\"\", // [156]\r\n\t\"\", // [157]\r\n\t\"\", // [158]\r\n\t\"\", // [159]\r\n\t\"CIRCUMFLEX\", // [160]\r\n\t\"EXCLAMATION\", // [161]\r\n\t\"DOUBLE_QUOTE\", // [162]\r\n\t\"HASH\", // [163]\r\n\t\"DOLLAR\", // [164]\r\n\t\"PERCENT\", // [165]\r\n\t\"AMPERSAND\", // [166]\r\n\t\"UNDERSCORE\", // [167]\r\n\t\"OPEN_PAREN\", // [168]\r\n\t\"CLOSE_PAREN\", // [169]\r\n\t\"ASTERISK\", // [170]\r\n\t\"PLUS\", // [171]\r\n\t\"PIPE\", // [172]\r\n\t\"HYPHEN_MINUS\", // [173]\r\n\t\"OPEN_CURLY_BRACKET\", // [174]\r\n\t\"CLOSE_CURLY_BRACKET\", // [175]\r\n\t\"TILDE\", // [176]\r\n\t\"\", // [177]\r\n\t\"\", // [178]\r\n\t\"\", // [179]\r\n\t\"\", // [180]\r\n\t\"VOLUME_MUTE\", // [181]\r\n\t\"VOLUME_DOWN\", // [182]\r\n\t\"VOLUME_UP\", // [183]\r\n\t\"\", // [184]\r\n\t\"\", // [185]\r\n\t\"SEMICOLON\", // [186]\r\n\t\"EQUALS\", // [187]\r\n\t\"COMMA\", // [188]\r\n\t\"MINUS\", // [189]\r\n\t\"PERIOD\", // [190]\r\n\t\"SLASH\", // [191]\r\n\t\"BACK_QUOTE\", // [192]\r\n\t\"\", // [193]\r\n\t\"\", // [194]\r\n\t\"\", // [195]\r\n\t\"\", // [196]\r\n\t\"\", // [197]\r\n\t\"\", // [198]\r\n\t\"\", // [199]\r\n\t\"\", // [200]\r\n\t\"\", // [201]\r\n\t\"\", // [202]\r\n\t\"\", // [203]\r\n\t\"\", // [204]\r\n\t\"\", // [205]\r\n\t\"\", // [206]\r\n\t\"\", // [207]\r\n\t\"\", // [208]\r\n\t\"\", // [209]\r\n\t\"\", // [210]\r\n\t\"\", // [211]\r\n\t\"\", // [212]\r\n\t\"\", // [213]\r\n\t\"\", // [214]\r\n\t\"\", // [215]\r\n\t\"\", // [216]\r\n\t\"\", // [217]\r\n\t\"\", // [218]\r\n\t\"OPEN_BRACKET\", // [219]\r\n\t\"BACK_SLASH\", // [220]\r\n\t\"CLOSE_BRACKET\", // [221]\r\n\t\"QUOTE\", // [222]\r\n\t\"\", // [223]\r\n\t\"META\", // [224]\r\n\t\"ALTGR\", // [225]\r\n\t\"\", // [226]\r\n\t\"WIN_ICO_HELP\", // [227]\r\n\t\"WIN_ICO_00\", // [228]\r\n\t\"\", // [229]\r\n\t\"WIN_ICO_CLEAR\", // [230]\r\n\t\"\", // [231]\r\n\t\"\", // [232]\r\n\t\"WIN_OEM_RESET\", // [233]\r\n\t\"WIN_OEM_JUMP\", // [234]\r\n\t\"WIN_OEM_PA1\", // [235]\r\n\t\"WIN_OEM_PA2\", // [236]\r\n\t\"WIN_OEM_PA3\", // [237]\r\n\t\"WIN_OEM_WSCTRL\", // [238]\r\n\t\"WIN_OEM_CUSEL\", // [239]\r\n\t\"WIN_OEM_ATTN\", // [240]\r\n\t\"WIN_OEM_FINISH\", // [241]\r\n\t\"WIN_OEM_COPY\", // [242]\r\n\t\"WIN_OEM_AUTO\", // [243]\r\n\t\"WIN_OEM_ENLW\", // [244]\r\n\t\"WIN_OEM_BACKTAB\", // [245]\r\n\t\"ATTN\", // [246]\r\n\t\"CRSEL\", // [247]\r\n\t\"EXSEL\", // [248]\r\n\t\"EREOF\", // [249]\r\n\t\"PLAY\", // [250]\r\n\t\"ZOOM\", // [251]\r\n\t\"\", // [252]\r\n\t\"PA1\", // [253]\r\n\t\"WIN_OEM_CLEAR\", // [254]\r\n\t\"\" // [255]\r\n];\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport Cookies from 'universal-cookie';\r\n\r\nimport { Badge, Button, Row, Col, Dropdown, OverlayTrigger, Popover } from \"react-bootstrap\";\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\r\n\r\nimport ContainerBox from \"./ContainerBox\";\r\nimport Commands from \"./Commands\";\r\nimport Filters from \"./Filters\";\r\n\r\nimport {\r\n\tshowRegisterEmployee,\r\n\tshowExportExcel,\r\n\tshowCheckCard,\r\n\tshowEmployeeWorkLog\r\n} from \"../actions/employeeActions\";\r\n\r\nimport {\r\n\tstoreUpdateEmployee,\r\n\tdeleteEmployeeComment,\r\n} from \"../utils/employeeUtils\";\r\nimport { addZero, millisecondConverter, convertSpecialCharacters } from \"../utils/commonUtils\";\r\n\r\nimport { FiUser, FiMessageSquare, FiXCircle } from \"react-icons/fi\";\r\n\r\nclass Employees extends React.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tconst cookies = new Cookies();\r\n\t\tlet settings = cookies.get(\"settings\");\r\n\r\n\t\tif(!settings) {\r\n\t\t\tsettings = {\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t}\r\n\r\n\t\t\tcookies.set(\"settings\", settings);\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\tworkLogUserId: null,\r\n\t\t\tshowWorkLogModal: false,\r\n\t\t\ttableData: [],\r\n\t\t\tpageSize: 10,\r\n\t\t\t...settings\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.onTableChange();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif(prevProps.employees !== this.props.employees) {\r\n\t\t\tthis.onTableChange();\r\n\t\t}\r\n\r\n\t\tif(prevState.pageSize !== this.state.pageSize) {\r\n\t\t\tthis.saveSettings();\r\n\t\t}\r\n\t}\r\n\r\n\tsaveSettings = () => {\r\n\t\tconst cookies = new Cookies();\r\n\t\tconst settings = {\r\n\t\t\t...cookies.get(\"settings\"),\r\n\t\t\tpageSize: this.state.pageSize,\r\n\t\t}\r\n\r\n\t\tcookies.set(\"settings\", settings);\r\n\t}\r\n\r\n\tonTableChange = () => {\r\n\t\tthis.formatTable((tableData) => {\r\n\t\t\tthis.filterData(tableData);\r\n\t\t});\r\n\t}\r\n\r\n\tonFilterChange = () => {\r\n\t\tthis.onTableChange();\r\n\t}\r\n\r\n\tonDataFiltered = (data) => {\r\n\t\tthis.setState({\r\n\t\t\ttableData: data\r\n\t\t});\r\n\t}\r\n\r\n\tformatTable = (callback = () => null) => {\r\n\t\tconst workLogFrom = new Date();\r\n\t\tworkLogFrom.setHours(0, 0, 0);\r\n\r\n\t\tconst workLogTo = new Date();\r\n\t\tworkLogTo.setHours(23, 59, 59);\r\n\r\n\t\tconst promise = this.props.employees.map((employee) => {\r\n\t\t\tconst workLogToday = [];\r\n\t\t\temployee.workLog.forEach((workLog) => {\r\n\t\t\t\tif(new Date(workLog.start_time).getTime() >= workLogFrom.getTime() && new Date(workLog.start_time).getTime() <= workLogTo.getTime()) {\r\n\t\t\t\t\treturn workLogToday.push(workLog);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\treturn({\r\n\t\t\t\tid: employee.id,\r\n\t\t\t\tposition: employee.position ? employee.position.toString() : \"\",\r\n\t\t\t\tcompany: employee.company ? employee.company.toString() : \"\",\r\n\t\t\t\tarchived: employee.archived,\r\n\t\t\t\tactive: employee.active,\r\n\t\t\t\tworking: employee.working,\r\n\t\t\t\tname: {\r\n\t\t\t\t\tid: employee.id,\r\n\t\t\t\t\tname: employee.name,\r\n\t\t\t\t\tsurname: employee.surname,\r\n\t\t\t\t\tworking: employee.working,\r\n\t\t\t\t\tcomments: employee.comments,\r\n\t\t\t\t},\r\n\t\t\t\ttoday: {\r\n\t\t\t\t\tworking: employee.working,\r\n\t\t\t\t\tworkLogs: workLogToday,\r\n\t\t\t\t},\r\n\t\t\t\tcommands: employee,\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tPromise.all(promise).then((data) => {\r\n\t\t\tcallback(data);\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst nameFormatter = (cell, row) => {\r\n\t\t\tconst commentBorderStyle = {\r\n\t\t\t\tborderBottom: \"solid 1px gray\"\r\n\t\t\t}\r\n\r\n\t\t\tconst comments = cell.comments.length \r\n\t\t\t? cell.comments.map((comment, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Row \r\n\t\t\t\t\t\tkey={index} \r\n\t\t\t\t\t\tstyle={index < cell.comments.length - 1 ? commentBorderStyle : null} \r\n\t\t\t\t\t\tclassName=\"ml-1 mr-1 pt-1 pb-2\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Col className=\"align-self-center\">\r\n\t\t\t\t\t\t\t<span>{comment.text}</span>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs=\"auto\">\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tsize={\"sm\"}\r\n\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\tonClick={() => deleteEmployeeComment(comment.id).then(() => {\r\n\t\t\t\t\t\t\t\t\tstoreUpdateEmployee(cell.id);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<FiXCircle className=\"mb-1\" />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t\t: null;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<nobr>\r\n\t\t\t\t\t\t<Badge \r\n\t\t\t\t\t\t\tstyle={{ fontSize: \"14px\" }}\r\n\t\t\t\t\t\t\tvariant={ cell.working ? \"success\" : \"danger\" }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FiUser/>\r\n\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t<Button \r\n\t\t\t\t\t\t\tvariant=\"link\" \r\n\t\t\t\t\t\t\tonClick={() => this.props.showEmployeeWorkLog(cell.id)}\r\n\t\t\t\t\t\t\tstyle={{ color: \"#0000FF\" }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{cell.surname + \" \" + cell.name}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcell.comments.length\r\n\t\t\t\t\t\t\t? \r\n\t\t\t\t\t\t\t<OverlayTrigger\r\n\t\t\t\t\t\t\t\ttrigger=\"click\"\r\n\t\t\t\t\t\t\t\trootClose\r\n\t\t\t\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t\t\t\t<Popover>\r\n\t\t\t\t\t\t\t\t\t\t{comments}\r\n\t\t\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tsize={\"sm\"}\r\n\t\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<FiMessageSquare/>\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t\t: \r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</nobr>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tconst companyFormatter = (cell, row) => {\r\n\t\t\treturn (\r\n\t\t\t\t<span className=\"d-none d-md-inline-block text-truncate\" style={{ maxWidth: \"14vw\" }}>\r\n\t\t\t\t\t{cell}\r\n\t\t\t\t</span>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst todayFormatter = (cell, row) => {\r\n\t\t\tlet badges = [];\r\n\t\t\tlet totalWorkTime = 0;\r\n\t\t\tlet totalWorkTimeConverted = {\r\n\t\t\t\thours: 0,\r\n\t\t\t\tminutes: 0,\r\n\t\t\t\tseconds: 0\r\n\t\t\t};\r\n\r\n\t\t\tcell.workLogs.forEach((workLog, index) => {\r\n\t\t\t\tlet workTime = 0;\r\n\t\t\t\tlet workTimeConverted = {\r\n\t\t\t\t\thours: 0,\r\n\t\t\t\t\tminutes: 0,\r\n\t\t\t\t\tseconds: 0\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(workLog.end_time === null) {\r\n\t\t\t\t\tworkLog.end_time = new Date();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Calculate each row data\r\n\t\t\t\tworkTime = new Date(workLog.end_time) - new Date(workLog.start_time);\r\n\t\t\t\tworkTimeConverted = millisecondConverter(workTime);\r\n\r\n\t\t\t\tconst workTimeStartFormatted =\r\n\t\t\t\t\t  addZero(new Date(workLog.start_time).getHours()) + \":\" \r\n\t\t\t\t\t+ addZero(new Date(workLog.start_time).getMinutes());\r\n\t\t\t\t\r\n\t\t\t\tconst workTimeEndFormatted =\r\n\t\t\t\t\t  addZero(new Date(workLog.end_time).getHours()) + \":\" \r\n\t\t\t\t\t+ addZero(new Date(workLog.end_time).getMinutes());\r\n\t\r\n\t\t\t\tconst workTimeFormatted =\r\n\t\t\t\t\tworkTimeConverted.hours + \" st. \" \r\n\t\t\t\t\t+ workTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\t// Calculate the total\r\n\t\t\t\ttotalWorkTime += new Date(workLog.end_time) - new Date(workLog.start_time);\r\n\t\t\t\ttotalWorkTimeConverted = millisecondConverter(totalWorkTime);\r\n\r\n\t\t\t\t// Each work log entry formatted and applied in HTML format\r\n\t\t\t\tbadges.push(\r\n\t\t\t\t\t<Row key={index} style={{ fontSize: \"14px\" }}>\r\n\t\t\t\t\t\t<Col xs={6}>\r\n\t\t\t\t\t\t\t<nobr>\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t{workTimeStartFormatted}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcell.working && index === cell.workLogs.length - 1\r\n\t\t\t\t\t\t\t\t\t? null\r\n\t\t\t\t\t\t\t\t\t: <span>\r\n\t\t\t\t\t\t\t\t\t\t&#8594; {workTimeEndFormatted}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</nobr>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={\"auto\"} className=\"text-center\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tworkTimeFormatted !== null\r\n\t\t\t\t\t\t\t\t? <span>\r\n\t\t\t\t\t\t\t\t\t{workTimeFormatted}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\t\t//Total row formatted\r\n\t\t\tif(badges.length) {\r\n\t\t\t\tconst totalWorkTimeFormatted =\r\n\t\t\t\ttotalWorkTimeConverted.hours + \" st. \" \r\n\t\t\t\t+ totalWorkTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\tbadges.push(\r\n\t\t\t\t\t<Row key={badges.length} style={{ fontSize: \"14px\" }}>\r\n\t\t\t\t\t\t<Col xs={6}>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={\"auto\"} className=\"text-center\" style={{ borderTop: \"solid 1px\" }}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttotalWorkTimeFormatted !== null\r\n\t\t\t\t\t\t\t\t? <span>\r\n\t\t\t\t\t\t\t\t\t<b>{totalWorkTimeFormatted}</b>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\treturn (badges);\r\n\t\t};\r\n\r\n\t\tconst commandFormatter = (cell, row) => {\r\n\t\t\treturn (\r\n\t\t\t\t<Commands employee={cell}/>\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tconst columns = [{\r\n\t\t\tdataField: \"id\",\r\n\t\t\ttext: \"#\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle d-none d-md-table-cell\",\r\n\t\t\theaderClasses: \"d-none d-md-table-cell\",\r\n\t\t\t// hidden: true,\r\n\t\t}, {\r\n\t\t\tdataField: \"name\",\r\n\t\t\ttext: \"Darbinieks\",\r\n\t\t\tsort: true,\r\n\t\t\tsortFunc: (a, b, order) => {\r\n\t\t\t\tif(convertSpecialCharacters(a.surname) < convertSpecialCharacters(b.surname)) {\r\n\t\t\t\t\treturn order === \"asc\" ? -1 : 1;\r\n\t\t\t\t} else if(convertSpecialCharacters(a.surname) > convertSpecialCharacters(b.surname)) {\r\n\t\t\t\t\treturn order === \"asc\" ? 1 : -1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t},\r\n\t\t\tclasses: \"align-middle\",\r\n\t\t\tformatter: nameFormatter,\r\n\t\t}, {\r\n\t\t\tdataField: \"company\",\r\n\t\t\ttext: \"Uzņēmums\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle d-none d-lg-table-cell\",\r\n\t\t\theaderClasses: \"d-none d-lg-table-cell\",\r\n\t\t\tformatter: companyFormatter\r\n\t\t}, {\r\n\t\t\tdataField: \"position\",\r\n\t\t\ttext: \"Amats\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle d-none d-lg-table-cell\",\r\n\t\t\theaderClasses: \"d-none d-lg-table-cell\",\r\n\t\t\tformatter: companyFormatter\r\n\t\t}, {\r\n\t\t\tdataField: \"today\",\r\n\t\t\ttext: \"Šodien\",\r\n\t\t\tsort: true,\r\n\t\t\tsortFunc: (a, b, order) => {\r\n\t\t\t\tif(a.workLogs.length && b.workLogs.length) {\r\n\t\t\t\t\tconst aData = a.working\r\n\t\t\t\t\t? new Date(a.workLogs[a.workLogs.length - 1].start_time)\r\n\t\t\t\t\t: new Date(a.workLogs[a.workLogs.length - 1].end_time);\r\n\r\n\t\t\t\t\tconst bData = b.working\r\n\t\t\t\t\t? new Date(b.workLogs[b.workLogs.length - 1].start_time)\r\n\t\t\t\t\t: new Date(b.workLogs[b.workLogs.length - 1].end_time);\r\n\r\n\t\t\t\t\tif(aData > bData) {\r\n\t\t\t\t\t\treturn order === \"asc\" ? 1 : -1;\r\n\t\t\t\t\t} else if(aData < bData) {\r\n\t\t\t\t\t\treturn order === \"asc\" ? -1 : 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If there are no work logs for today\r\n\t\t\t\tif(!a.workLogs.length) {\r\n\t\t\t\t\treturn order === \"asc\" ? -1 : 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn 0;\r\n\t\t\t},\r\n\t\t\tclasses: \"align-middle\",\r\n\t\t\tformatter: todayFormatter\r\n\t\t}, {\r\n\t\t\tdataField: \"commands\",\r\n\t\t\ttext: \"\",\r\n\t\t\tclasses: \"align-middle\",\r\n\t\t\tformatter: commandFormatter\r\n\t\t}];\r\n\r\n\t\tconst defaultSorted = [{\r\n\t\t\tdataField: \"name\",\r\n\t\t\torder: \"asc\"\r\n\t\t}];\r\n\r\n\t\tconst onClickPageSize = (option) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tpageSize: option.page\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst sizePerPageRenderer = ({\r\n\t\t\toptions,\r\n\t\t\tcurrSizePerPage,\r\n\t\t\tonSizePerPageChange\r\n\t\t}) => (\r\n\t\t\t<Dropdown className=\"d-inline pr-2\">\r\n\t\t\t\t<Dropdown.Toggle variant=\"primary\">\r\n\t\t\t\t\t{this.state.pageSize === 9999 ? \"Viss\" : this.state.pageSize}\r\n\t\t\t\t</Dropdown.Toggle>\r\n\r\n\t\t\t\t<Dropdown.Menu>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toptions.map((option, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\t\t\tkey={index} \r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tonClickPageSize(option);\r\n\t\t\t\t\t\t\t\t\t\tonSizePerPageChange(option.page);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{option.text}\r\n\t\t\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</Dropdown.Menu>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\r\n\t\tconst pagination = paginationFactory({\r\n\t\t\tpage: 1,\r\n\t\t\talwaysShowAllBtns: true,\r\n\t\t\tshowTotal: false,\r\n\t\t\tsizePerPage : this.state.pageSize,\r\n\t\t\tsizePerPageRenderer,\r\n\t\t\tsizePerPageList: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"10\",\r\n\t\t\t\t\tvalue: 10,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"25\",\r\n\t\t\t\t\tvalue: 25,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"50\",\r\n\t\t\t\t\tvalue: 50,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"100\",\r\n\t\t\t\t\tvalue: 100,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"Viss\",\r\n\t\t\t\t\tvalue: 9999,\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\r\n\t\tconst rowStyle = (row) => {\r\n\t\t\tif(!row.active) {\r\n\t\t\t\treturn { backgroundColor: \"rgba(255, 0, 0, 0.1)\" };\r\n\t\t\t}\r\n\r\n\t\t\tif(row.archived) {\r\n\t\t\t\treturn { backgroundColor: \"rgba(255, 255, 0, 0.1)\" };\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<ContainerBox header={\"Darbinieki\"}>\r\n\t\t\t\t<Filters \r\n\t\t\t\t\tonDataFiltered={this.onDataFiltered}\r\n\t\t\t\t\tonFilterChange={this.onFilterChange}\r\n\t\t\t\t\tfilterData={filterData => this.filterData = filterData}\r\n\t\t\t\t/>\r\n\t\t\t\t<BootstrapTable \r\n\t\t\t\t\tbootstrap4={ true }\r\n\t\t\t\t\tkeyField=\"id\"\r\n\t\t\t\t\tdata={ this.state.tableData } \r\n\t\t\t\t\tcolumns={ columns } \r\n\t\t\t\t\tbordered={ false }\r\n\t\t\t\t\thover={ true }\r\n\t\t\t\t\tdefaultSorted={ defaultSorted }\r\n\t\t\t\t\tremote={ { filter: true } }\r\n\t\t\t\t\tonTableChange={ this.onTableChange }\r\n\t\t\t\t\tpagination={ pagination }\r\n\t\t\t\t\trowStyle={ rowStyle }\r\n\t\t\t\t/>\r\n\t\t\t</ContainerBox>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\temployees: state.employees.employees,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowRegisterEmployee: () => dispatch(showRegisterEmployee()),\r\n\t\tshowExportExcel: () => dispatch(showExportExcel()),\r\n\t\tshowCheckCard: () => dispatch(showCheckCard()),\r\n\t\tshowEmployeeWorkLog: (id) => dispatch(showEmployeeWorkLog(id))\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Employees);\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport Cookies from 'universal-cookie';\r\n\r\nimport { Button, Row, Col, Dropdown } from \"react-bootstrap\";\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\r\n\r\nimport ContainerBox from \"./ContainerBox\";\r\nimport Filters from \"./Filters\";\r\n\r\nimport {\r\n\tshowEmployeeWorkLog,\r\n\tshowExportExcel\r\n} from \"../actions/employeeActions\";\r\n\r\nimport { addZero, millisecondConverter, convertSpecialCharacters } from \"../utils/commonUtils\";\r\n\r\nimport { FiUser } from \"react-icons/fi\";\r\n\r\nclass Employees extends React.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tconst cookies = new Cookies();\r\n\t\tlet settings = cookies.get(\"settings\");\r\n\r\n\t\tconst startDate = new Date();\r\n        startDate.setHours(0,0,0);\r\n\r\n        const endDate = new Date();\r\n        endDate.setHours(23,59,59);\r\n\r\n\t\tif(settings) {\r\n\t\t\tsettings = {\r\n                ...settings,\r\n\t\t\t\tstartDate: settings.startDate ? new Date(settings.startDate) : new Date(startDate),\r\n\t\t\t\tendDate: settings.endDate ? new Date(settings.endDate) : new Date(endDate),\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tsettings = {\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t}\r\n\r\n\t\t\tcookies.set(\"settings\", settings);\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\tworkLogUserId: null,\r\n\t\t\tshowWorkLogModal: false,\r\n\t\t\ttableData: [],\r\n\t\t\tpageSize: 10,\r\n\t\t\t...settings,\r\n\t\t\tdropdown: {\r\n\t\t\t\tcurrentFilter: \"Šodiena\",\r\n\t\t\t\tfilters: [\"Šodiena\", \"Vakardiena\", \"Pēdējās 7 dienas\", \"Pēdējās 30 dienas\"]\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.onTableChange();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif(prevProps.employees !== this.props.employees) {\r\n\t\t\tthis.onTableChange();\r\n\t\t}\r\n\r\n\t\tif(prevState.pageSize !== this.state.pageSize) {\r\n\t\t\tthis.saveSettings();\r\n\t\t}\r\n\t}\r\n\r\n\tsaveSettings = () => {\r\n\t\tconst cookies = new Cookies();\r\n\t\tconst settings = {\r\n\t\t\t...cookies.get(\"settings\"),\r\n\t\t\tpageSize: this.state.pageSize,\r\n\t\t}\r\n\r\n\t\tcookies.set(\"settings\", settings);\r\n\t}\r\n\r\n\tonTableChange = () => {\r\n\t\tthis.formatTable((tableData) => {\r\n\t\t\tthis.filterData(tableData);\r\n\t\t});\r\n\t}\r\n\r\n\tonFilterChange = (filters) => {\r\n\t\tthis.setState({\r\n\t\t\tstartDate: filters.startDate,\r\n\t\t\tendDate: filters.endDate,\r\n\t\t}, () => {\r\n\t\t\tthis.onTableChange();\r\n\t\t});\r\n\t}\r\n\r\n\tonDataFiltered = (data) => {\r\n\t\tthis.setState({\r\n\t\t\ttableData: data\r\n\t\t});\r\n\t}\r\n\r\n\tformatTable = (callback = () => null) => {\r\n\t\tconst workLogFrom = new Date(this.state.startDate);\r\n\t\tconst workLogTo = new Date(this.state.endDate);\r\n\r\n\t\tconst promise = this.props.employees.map((employee) => {\r\n\t\t\tconst workLogToday = [];\r\n\t\t\temployee.workLog.forEach((workLog) => {\r\n\t\t\t\tif(new Date(workLog.start_time).getTime() >= workLogFrom.getTime() && new Date(workLog.start_time).getTime() <= workLogTo.getTime()) {\r\n\t\t\t\t\treturn workLogToday.push(workLog);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\treturn({\r\n\t\t\t\tid: employee.id,\r\n\t\t\t\tposition: employee.position ? employee.position.toString() : \"\",\r\n\t\t\t\tcompany: employee.company ? employee.company.toString() : \"\",\r\n\t\t\t\tarchived: employee.archived,\r\n\t\t\t\tactive: employee.active,\r\n\t\t\t\tworking: employee.working,\r\n\t\t\t\tname: {\r\n\t\t\t\t\tid: employee.id,\r\n\t\t\t\t\tname: employee.name,\r\n\t\t\t\t\tsurname: employee.surname,\r\n\t\t\t\t\tworking: employee.working,\r\n\t\t\t\t\tcomments: employee.comments,\r\n\t\t\t\t},\r\n\t\t\t\ttoday: {\r\n\t\t\t\t\tworking: employee.working,\r\n\t\t\t\t\tworkLogs: workLogToday,\r\n\t\t\t\t},\r\n\t\t\t\tcommands: employee,\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tPromise.all(promise).then((data) => {\r\n\t\t\tcallback(data);\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst nameFormatter = (cell, row) => {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<nobr>\r\n\t\t\t\t\t\t<FiUser/>\r\n\t\t\t\t\t\t<Button \r\n\t\t\t\t\t\t\tvariant=\"link\" \r\n\t\t\t\t\t\t\tonClick={() => this.props.showEmployeeWorkLog(cell.id)}\r\n\t\t\t\t\t\t\tstyle={{ color: \"#0000FF\" }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{cell.surname + \" \" + cell.name}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</nobr>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tconst companyFormatter = (cell, row) => {\r\n\t\t\treturn (\r\n\t\t\t\t<span className=\"d-none d-md-inline-block text-truncate\" style={{ maxWidth: \"14vw\" }}>\r\n\t\t\t\t\t{cell}\r\n\t\t\t\t</span>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst todayFormatter = (cell, row) => {\r\n\t\t\tlet badges = [];\r\n\t\t\tlet totalWorkTime = 0;\r\n\t\t\tlet totalWorkTimeConverted = {\r\n\t\t\t\thours: 0,\r\n\t\t\t\tminutes: 0,\r\n\t\t\t\tseconds: 0\r\n\t\t\t};\r\n\r\n\t\t\tconst displayOneDay = cell.endDate - cell.startDate < 86400000;\r\n\r\n\t\t\tcell.workLogs.forEach((workLog, index) => {\r\n\t\t\t\tlet workTime = 0;\r\n\t\t\t\tlet workTimeConverted = {\r\n\t\t\t\t\thours: 0,\r\n\t\t\t\t\tminutes: 0,\r\n\t\t\t\t\tseconds: 0\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(workLog.end_time === null) {\r\n\t\t\t\t\tworkLog.end_time = new Date();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Calculate each row data\r\n\t\t\t\tworkTime = new Date(workLog.end_time) - new Date(workLog.start_time);\r\n\t\t\t\tworkTimeConverted = millisecondConverter(workTime);\r\n\r\n\t\t\t\tconst workTimeStartFormatted =\r\n\t\t\t\t\taddZero(new Date(workLog.start_time).getHours()) + \":\" \r\n\t\t\t\t\t+ addZero(new Date(workLog.start_time).getMinutes());\r\n\t\t\t\t\r\n\t\t\t\tconst workTimeEndFormatted =\r\n\t\t\t\t\taddZero(new Date(workLog.end_time).getHours()) + \":\" \r\n\t\t\t\t\t+ addZero(new Date(workLog.end_time).getMinutes());\r\n\t\r\n\t\t\t\tconst workTimeFormatted =\r\n\t\t\t\t\tworkTimeConverted.hours + \" st. \" \r\n\t\t\t\t\t+ workTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\t// Calculate the total\r\n\t\t\t\ttotalWorkTime += new Date(workLog.end_time) - new Date(workLog.start_time);\r\n\t\t\t\ttotalWorkTimeConverted = millisecondConverter(totalWorkTime);\r\n\r\n\t\t\t\tif(displayOneDay) {\r\n\t\t\t\t\t// Each work log entry formatted and applied in HTML format\r\n\t\t\t\t\tbadges.push(\r\n\t\t\t\t\t\t<Row key={index} style={{ fontSize: \"14px\" }}>\r\n\t\t\t\t\t\t\t<Col xs={6}>\r\n\t\t\t\t\t\t\t\t<nobr>\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{workTimeStartFormatted}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tcell.working && index === cell.workLogs.length - 1\r\n\t\t\t\t\t\t\t\t\t\t? null\r\n\t\t\t\t\t\t\t\t\t\t: <span>\r\n\t\t\t\t\t\t\t\t\t\t\t&#8594; {workTimeEndFormatted}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</nobr>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col xs={\"auto\"} className=\"text-center\">\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tworkTimeFormatted !== null\r\n\t\t\t\t\t\t\t\t\t? <span>\r\n\t\t\t\t\t\t\t\t\t\t{workTimeFormatted}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//Total row formatted\r\n\t\t\tif(badges.length && displayOneDay) {\r\n\t\t\t\tconst totalWorkTimeFormatted =\r\n\t\t\t\ttotalWorkTimeConverted.hours + \" st. \" \r\n\t\t\t\t+ totalWorkTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\tbadges.push(\r\n\t\t\t\t\t<Row key={badges.length} style={{ fontSize: \"14px\" }}>\r\n\t\t\t\t\t\t<Col xs={6}>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={\"auto\"} className=\"text-center\" style={{ borderTop: \"solid 1px\" }}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttotalWorkTimeFormatted !== null\r\n\t\t\t\t\t\t\t\t? <span>\r\n\t\t\t\t\t\t\t\t\t<b>{totalWorkTimeFormatted}</b>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\t\t\t} else if(!displayOneDay) {\r\n\t\t\t\tconst totalWorkTimeFormatted =\r\n\t\t\t\ttotalWorkTimeConverted.hours + \" st. \" \r\n\t\t\t\t+ totalWorkTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\tbadges.push(\r\n\t\t\t\t\t<Row key={badges.length} style={{ fontSize: \"14px\" }}>\r\n\t\t\t\t\t\t<Col className=\"text-center\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttotalWorkTimeFormatted !== null\r\n\t\t\t\t\t\t\t\t? <span>\r\n\t\t\t\t\t\t\t\t\t{totalWorkTimeFormatted}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs=\"4\">\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs=\"4\">\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\treturn (badges);\r\n\t\t};\r\n\r\n\t\tconst startDateFormatted = \r\n\t\t\t  addZero(this.state.startDate.getDate()) + \".\" \r\n\t\t\t+ addZero(this.state.startDate.getMonth() + 1) + \".\" \r\n\t\t\t+ addZero(this.state.startDate.getFullYear());\r\n\r\n\r\n\t\tconst endDateFormatted =\r\n\t\t\t  addZero(this.state.endDate.getDate()) + \".\" \r\n\t\t\t+ addZero(this.state.endDate.getMonth() + 1) + \".\" \r\n\t\t\t+ addZero(this.state.endDate.getFullYear());\r\n\r\n\t\tconst dateRange = startDateFormatted + (startDateFormatted === endDateFormatted ? \"\" : \" - \" + endDateFormatted);\r\n\r\n\t\tconst columns = [{\r\n\t\t\tdataField: \"id\",\r\n\t\t\ttext: \"#\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle\",\r\n\t\t\t// hidden: true,\r\n\t\t}, {\r\n\t\t\tdataField: \"name\",\r\n\t\t\ttext: \"Darbinieks\",\r\n\t\t\tsort: true,\r\n\t\t\tsortFunc: (a, b, order) => {\r\n\t\t\t\tif(convertSpecialCharacters(a.surname) < convertSpecialCharacters(b.surname)) {\r\n\t\t\t\t\treturn order === \"asc\" ? -1 : 1;\r\n\t\t\t\t} else if(convertSpecialCharacters(a.surname) > convertSpecialCharacters(b.surname)) {\r\n\t\t\t\t\treturn order === \"asc\" ? 1 : -1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t},\r\n\t\t\tclasses: \"align-middle\",\r\n\t\t\tformatter: nameFormatter,\r\n\t\t}, {\r\n\t\t\tdataField: \"company\",\r\n\t\t\ttext: \"Uzņēmums\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle d-none d-lg-table-cell\",\r\n\t\t\theaderClasses: \"d-none d-lg-table-cell\",\r\n\t\t\tformatter: companyFormatter\r\n\t\t}, {\r\n\t\t\tdataField: \"position\",\r\n\t\t\ttext: \"Amats\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle d-none d-lg-table-cell\",\r\n\t\t\theaderClasses: \"d-none d-lg-table-cell\",\r\n\t\t\tformatter: companyFormatter\r\n\t\t}, {\r\n\t\t\tdataField: \"today\",\r\n\t\t\ttext: dateRange,\r\n\t\t\tsort: true,\r\n\t\t\tsortFunc: (a, b, order) => {\r\n\t\t\t\tif(a.workLogs.length && b.workLogs.length) {\r\n\t\t\t\t\tconst aData = a.working\r\n\t\t\t\t\t? new Date(a.workLogs[a.workLogs.length - 1].start_time)\r\n\t\t\t\t\t: new Date(a.workLogs[a.workLogs.length - 1].end_time);\r\n\r\n\t\t\t\t\tconst bData = b.working\r\n\t\t\t\t\t? new Date(b.workLogs[b.workLogs.length - 1].start_time)\r\n\t\t\t\t\t: new Date(b.workLogs[b.workLogs.length - 1].end_time);\r\n\r\n\t\t\t\t\tif(aData > bData) {\r\n\t\t\t\t\t\treturn order === \"asc\" ? 1 : -1;\r\n\t\t\t\t\t} else if(aData < bData) {\r\n\t\t\t\t\t\treturn order === \"asc\" ? -1 : 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t},\r\n\t\t\tclasses: \"align-middle\",\r\n\t\t\tformatter: todayFormatter\r\n\t\t}];\r\n\r\n\t\tconst defaultSorted = [{\r\n\t\t\tdataField: \"name\",\r\n\t\t\torder: \"asc\"\r\n\t\t}];\r\n\r\n\t\tconst onClickPageSize = (option) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tpageSize: option.page\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst sizePerPageRenderer = ({\r\n\t\t\toptions,\r\n\t\t\tcurrSizePerPage,\r\n\t\t\tonSizePerPageChange\r\n\t\t}) => (\r\n\t\t\t<Dropdown className=\"d-inline pr-2\">\r\n\t\t\t\t<Dropdown.Toggle variant=\"primary\">\r\n\t\t\t\t\t{this.state.pageSize === 9999 ? \"Viss\" : this.state.pageSize}\r\n\t\t\t\t</Dropdown.Toggle>\r\n\r\n\t\t\t\t<Dropdown.Menu>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toptions.map((option, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\t\t\tkey={index} \r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tonClickPageSize(option);\r\n\t\t\t\t\t\t\t\t\t\tonSizePerPageChange(option.page);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{option.text}\r\n\t\t\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</Dropdown.Menu>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\r\n\t\tconst pagination = paginationFactory({\r\n\t\t\tpage: 1,\r\n\t\t\talwaysShowAllBtns: true,\r\n\t\t\tshowTotal: false,\r\n\t\t\tsizePerPage : this.state.pageSize,\r\n\t\t\tsizePerPageRenderer,\r\n\t\t\tsizePerPageList: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"10\",\r\n\t\t\t\t\tvalue: 10,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"25\",\r\n\t\t\t\t\tvalue: 25,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"50\",\r\n\t\t\t\t\tvalue: 50,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"100\",\r\n\t\t\t\t\tvalue: 100,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"Viss\",\r\n\t\t\t\t\tvalue: 9999,\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\r\n\r\n\t\tconst rowStyle = (row) => {\r\n\t\t\tif(!row.commands.active) {\r\n\t\t\t\treturn { backgroundColor: \"rgba(255, 0, 0, 0.1)\" };\r\n\t\t\t}\r\n\r\n\t\t\tif(row.commands.archived) {\r\n\t\t\t\treturn { backgroundColor: \"rgba(255, 255, 0, 0.1)\" };\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<ContainerBox header={\"Atskaites\"}>\r\n\t\t\t\t<Filters \r\n\t\t\t\t\tonDataFiltered={this.onDataFiltered}\r\n\t\t\t\t\tonFilterChange={this.onFilterChange}\r\n\t\t\t\t\tfilterData={filterData => this.filterData = filterData}\r\n\t\t\t\t\tdateFilter={true}\r\n\t\t\t\t/>\r\n\t\t\t\t<BootstrapTable\r\n\t\t\t\t\tbootstrap4={ true }\r\n\t\t\t\t\tkeyField=\"id\" \r\n\t\t\t\t\tdata={ this.state.tableData } \r\n\t\t\t\t\tcolumns={ columns } \r\n\t\t\t\t\tbordered={ false }\r\n\t\t\t\t\thover={ true }\r\n\t\t\t\t\tdefaultSorted={ defaultSorted }\r\n\t\t\t\t\tremote={ { filter: true } }\r\n\t\t\t\t\tonTableChange={ this.onTableChange }\r\n\t\t\t\t\tpagination={ pagination }\r\n\t\t\t\t\trowStyle={ rowStyle }\r\n\t\t\t\t/>\r\n\t\t\t</ContainerBox>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\temployees: state.employees.employees,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowEmployeeWorkLog: (id) => dispatch(showEmployeeWorkLog(id)),\r\n\t\tshowExportExcel: () => dispatch(showExportExcel()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Employees);\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport { Form, Button, Alert, Modal, Row, Col } from \"react-bootstrap\";\r\n\r\nimport { showRegisterEmployee, hideRegisterEmployee } from \"../actions/employeeActions\";\r\n\r\nimport { storeUpdateEmployees, addServerEmployee, awaitCard, deleteServerEmployee } from \"../utils/employeeUtils\";\r\n\r\nconst REGISTER_STATE = {\r\n\tDATA_INPUT: 0,\r\n\tRFID_WAIT: 1,\r\n\tCOMPLETE: 2,\r\n}\r\n\r\nclass RegisterEmployee extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.initialState = {\r\n\t\t\tregistrationState: REGISTER_STATE.DATA_INPUT,\r\n\t\t\tcheckInterval: null,\r\n\t\t\tnewEmployee: {},\r\n\t\t\tname: \"\",\r\n\t\t\tsurname: \"\",\r\n\t\t\tcompany: 'SIA \"Vārpas 1\"',\r\n\t\t\tposition: \"\",\r\n\t\t\tnumber: \"\",\r\n\t\t\tpersonalCode: \"\",\r\n\t\t\taddCard: true,\r\n\t\t\tuid: null,\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\t...this.initialState\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tonNameChange = (event) => {\r\n\t\tthis.setState({ name: event.target.value });\r\n\t}\r\n\r\n\tonSurnameChange = (event) => {\r\n\t\tthis.setState({ surname: event.target.value });\r\n\t}\r\n\r\n\tonCompanyChange = (event) => {\r\n\t\tthis.setState({ company: event.target.value });\r\n\t}\r\n\r\n\tonPositionChange = (event) => {\r\n\t\tthis.setState({ position: event.target.value });\r\n\t}\r\n\r\n\tonNumberChange = (event) => {\r\n\t\tthis.setState({ number: event.target.value });\r\n\t}\r\n\r\n\tonPersonalCodeChange = (event) => {\r\n\t\tthis.setState({ personalCode: event.target.value });\r\n\t}\r\n\r\n\tonAddCardChange = () => {\r\n\t\tthis.setState({ addCard: !this.state.addCard });\r\n\t}\r\n\r\n\tonFormSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\tlet employee = {\r\n\t\t\tname: this.state.name,\r\n\t\t\tsurname: this.state.surname,\r\n\t\t\tcompany: this.state.company,\r\n\t\t\tposition: this.state.position,\r\n\t\t\tnumber: this.state.number,\r\n\t\t\tpersonalCode: this.state.personalCode,\r\n\t\t\tuid: this.state.uid,\r\n\t\t}\r\n\t\t\r\n\t\tif(this.state.registrationState === REGISTER_STATE.DATA_INPUT) {\r\n\t\t\tif(this.state.addCard) {\r\n\t\t\t\tthis.setState({ \r\n\t\t\t\t\tregistrationState: REGISTER_STATE.RFID_WAIT,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tawaitCard().then((res) => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tuid: res.data.uid,\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\temployee = {\r\n\t\t\t\t\t\t\t...employee,\r\n\t\t\t\t\t\t\tuid: res.data.uid,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\taddServerEmployee(employee).then((res) => {\r\n\t\t\t\t\t\t\tstoreUpdateEmployees();\r\n\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tregistrationState: REGISTER_STATE.COMPLETE,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\taddServerEmployee(employee).then((res) => {\r\n\t\t\t\t\tstoreUpdateEmployees();\r\n\t\t\t\t\tif(res.data) {\r\n\t\t\t\t\t\tthis.setState({ \r\n\t\t\t\t\t\t\tregistrationState: REGISTER_STATE.COMPLETE,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if(this.state.registrationState === REGISTER_STATE.COMPLETE) {\r\n\t\t\tthis.props.hideRegisterEmployee();\r\n\t\t}\r\n\t}\r\n\r\n\thideRegisterEmployeeAndDelete = () => {\r\n\t\tif(this.state.registrationState >= REGISTER_STATE.RFID_WAIT) {\r\n\t\t\tdeleteServerEmployee(this.state.newEmployee.id);\r\n\t\t\tthis.props.hideRegisterEmployee();\r\n\t\t}\r\n\t}\r\n\r\n\tonExited = () => {\r\n\t\tthis.setState({\r\n\t\t\t...this.initialState\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal \r\n\t\t\t\tshow={this.props.registerEmployee.show} \r\n\t\t\t\tonHide={() => this.props.hideRegisterEmployee()}\r\n\t\t\t\tonExit={this.deleteAndCancel}\r\n\t\t\t\tonExited={this.onExited}\r\n\t\t\t>\r\n\t\t\t\t<Form onSubmit={this.onFormSubmit}>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>Pievienot Darbinieku</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\t\t\t\t<Modal.Body>\r\n\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>* Vārds</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\t\trequired \r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.registrationState !== REGISTER_STATE.DATA_INPUT} \r\n\t\t\t\t\t\t\t\t\tvalue={this.state.name} \r\n\t\t\t\t\t\t\t\t\tonChange={this.onNameChange}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Vārds\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>* Uzvārds</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\t\trequired \r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.registrationState !== REGISTER_STATE.DATA_INPUT} \r\n\t\t\t\t\t\t\t\t\tvalue={this.state.surname} \r\n\t\t\t\t\t\t\t\t\tonChange={this.onSurnameChange}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Uzvārds\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>Personas Kods</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.registrationState !== REGISTER_STATE.DATA_INPUT} \r\n\t\t\t\t\t\t\t\t\tvalue={this.state.personalCode} \r\n\t\t\t\t\t\t\t\t\tonChange={this.onPersonalCodeChange}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Personas Kods\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>Telefona Numurs</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.registrationState !== REGISTER_STATE.DATA_INPUT} \r\n\t\t\t\t\t\t\t\t\tvalue={this.state.number} \r\n\t\t\t\t\t\t\t\t\tonChange={this.onNumberChange}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Telefona Numurs\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Uzņēmums</Form.Label>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tas=\"select\"\r\n\t\t\t\t\t\t\tdisabled={this.state.registrationState !== REGISTER_STATE.DATA_INPUT}  \r\n\t\t\t\t\t\t\tonChange={this.onCompanyChange}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option>SIA \"Vārpas 1\"</option>\r\n\t\t\t\t\t\t\t<option>SIA \"Adeptus Renewable Energy\"</option>\r\n\t\t\t\t\t\t\t<option>SIA \"Valkas koks\"</option>\r\n\t\t\t\t\t\t</Form.Control>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Amats</Form.Label>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tdisabled={this.state.registrationState !== REGISTER_STATE.DATA_INPUT} \r\n\t\t\t\t\t\t\tvalue={this.state.position} \r\n\t\t\t\t\t\t\tonChange={this.onPositionChange}\r\n\t\t\t\t\t\t\tplaceholder=\"Darba Amats\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group controlId=\"formBasicChecbox\">\r\n\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\ttype=\"checkbox\" \r\n\t\t\t\t\t\t\tlabel=\"Turpināt reģistrāciju pievienojot NFC karti\"\r\n\t\t\t\t\t\t\tname=\"addCard\"\r\n\t\t\t\t\t\t\tchecked={this.state.addCard}\r\n\t\t\t\t\t\t\tonChange={this.onAddCardChange}/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Alert variant={\"primary\"} show={this.state.registrationState === REGISTER_STATE.RFID_WAIT} onClose={() => null}>\r\n\t\t\t\t\t\tNoskenējiet vēlamo kartiņu.\r\n\t\t\t\t\t</Alert>\r\n\r\n\t\t\t\t\t<Alert variant={\"success\"} show={this.state.registrationState === REGISTER_STATE.COMPLETE} onClose={() => null}>\r\n\t\t\t\t\t\tDarbinieks veiksmīgi pievienots darbinieku sarakstam.\r\n\t\t\t\t\t</Alert>\r\n\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Buttons \r\n\t\t\t\t\t\tregistrationState={this.state.registrationState}\r\n\t\t\t\t\t\thideRegisterEmployee={this.props.hideRegisterEmployee}\r\n\t\t\t\t\t\thideRegisterEmployeeAndDelete={this.hideRegisterEmployeeAndDelete}\r\n\t\t\t\t\t\taddCard={this.state.addCard}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction Buttons(props) {\r\n\tswitch(props.registrationState) {\r\n\t\tdefault:\r\n\t\tcase REGISTER_STATE.DATA_INPUT: {\r\n\t\t\treturn(\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Button variant={ props.addCard ? \"primary\" : \"success\"} type=\"submit\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tprops.addCard \r\n\t\t\t\t\t\t\t? \"Tālāk\"\r\n\t\t\t\t\t\t\t: \"Pabeigt\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t}\r\n\t\tcase REGISTER_STATE.RFID_WAIT: {\r\n\t\t\treturn(\r\n\t\t\t\tnull\r\n\t\t\t);\r\n\t\t}\r\n\t\tcase REGISTER_STATE.COMPLETE: {\r\n\t\t\treturn(\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Button variant=\"success\" type=\"submit\">\r\n\t\t\t\t\t\tPabeigt\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\temployees: state.employees.employees,\r\n\t\tregisterEmployee: state.employees.registerEmployee\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowRegisterEmployee: () => dispatch(showRegisterEmployee()),\r\n\t\thideRegisterEmployee: () => dispatch(hideRegisterEmployee()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(RegisterEmployee);\r\n","import React from \"react\";\r\nimport { Row, Col } from \"react-bootstrap\";\r\n\r\nconst NotFound = () => {\r\n\treturn (\r\n\t\t<Row>\r\n\t\t\t<Col className=\"text-center mt-4 mb-4\">\r\n\t\t\t\t<h1>404</h1>\r\n\t\t\t\t<h5>Lapa netika atrasta...</h5>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t);\r\n}\r\n\r\nexport default NotFound;\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport { Table, Modal, Dropdown, DropdownButton, Col, Row, Form, Button } from \"react-bootstrap\";\r\nimport BoostrapDatePicker from \"./BoostrapDatePicker\";\r\n\r\nimport { workLogUpdateInterval } from \"../utils/config\";\r\n\r\nimport { hideEmployeeWorkLog } from \"../actions/employeeActions\";\r\n\r\nimport { getServerEmployee, getServerEmployeeWorkLog, deleteServerWorkLog, editServerWorkLog } from \"../utils/employeeUtils\";\r\nimport { addZero, millisecondConverter } from \"../utils/commonUtils\";\r\n\r\nimport { FiTrash, FiEdit, FiX, FiCheck } from \"react-icons/fi\";\r\n\r\nclass ViewEmployee extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tconst startDate = new Date();\r\n\t\tstartDate.setHours(0, 0, 0);\r\n\r\n\t\tconst endDate = new Date();\r\n\t\tendDate.setHours(23, 59, 59);\r\n\r\n\t\tthis.state = {\r\n\t\t\temployee: {\r\n\t\t\t\tname: \"Ielādē...\",\r\n\t\t\t\tsurname: \" \"\r\n\t\t\t},\r\n\t\t\tworkLog: [],\r\n\t\t\teditWorkLog: {\r\n\t\t\t\tid: null,\r\n\t\t\t\tstartDate: null,\r\n\t\t\t\tendDate: null,\r\n\t\t\t\tworking: false,\r\n\t\t\t},\r\n\t\t\tresults: 0,\r\n\t\t\tupdateInterval: null,\r\n\t\t\tstartDate: startDate,\r\n\t\t\tendDate: endDate,\r\n\t\t\tdropdown: {\r\n\t\t\t\tcurrentFilter: \"Šodiena\",\r\n\t\t\t\tfilters: [\"Šodiena\", \"Vakardiena\", \"Pēdējās 7 dienas\", \"Pēdējās 30 dienas\"]\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (this.props.employeeWorkLog.id !== prevProps.employeeWorkLog.id && this.props.employeeWorkLog.id !== null) {\r\n\t\t\tthis.fetchWorkLog();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.state.updateInterval);\r\n\t}\r\n\r\n\tfetchWorkLog = () => {\r\n\t\tgetServerEmployee(this.props.employeeWorkLog.id).then((res) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\temployee: res.data\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tgetServerEmployeeWorkLog(this.props.employeeWorkLog.id, \"DESC\").then((res) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tworkLog: res.data\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tclearInterval(this.state.updateInterval);\r\n\t\tthis.setState({\r\n\t\t\tupdateInterval: setInterval(() => {\r\n\t\t\t\tgetServerEmployee(this.props.employeeWorkLog.id).then((res) => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\temployee: res.data\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgetServerEmployeeWorkLog(this.props.employeeWorkLog.id, \"DESC\").then((res) => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tworkLog: res.data\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}, workLogUpdateInterval)\r\n\t\t});\r\n\t}\r\n\r\n\tonHide = () => {\r\n\t\tclearInterval(this.state.updateInterval);\r\n\t\tthis.props.hideEmployeeWorkLog();\r\n\t}\r\n\r\n\tonExited = () => {\r\n\t\tthis.setState({\r\n\t\t\temployee: {\r\n\t\t\t\tname: \"Ielādē...\",\r\n\t\t\t\tsurname: \" \"\r\n\t\t\t},\r\n\t\t\tworkLog: [],\r\n\t\t\teditWorkLog: {\r\n\t\t\t\tid: null,\r\n\t\t\t\tstartDate: null,\r\n\t\t\t\tendDate: null,\r\n\t\t\t\tworking: false,\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\thandleDateChangeStart = (date) => {\r\n\t\tconst startOfDay = new Date(date);\r\n\t\tstartOfDay.setHours(0, 0, 0);\r\n\t\tthis.setState({\r\n\t\t\tstartDate: startOfDay,\r\n\t\t});\r\n\t}\r\n\r\n\thandleDateChangeEnd = (date) => {\r\n\t\tconst endOfDay = new Date(date);\r\n\t\tendOfDay.setHours(23, 59, 59);\r\n\t\tthis.setState({\r\n\t\t\tendDate: endOfDay,\r\n\t\t});\r\n\t}\r\n\r\n\tonClickFilter = (index) => {\r\n\t\tswitch (index) {\r\n\t\t\tcase 0: {\r\n\t\t\t\tthis.handleDateChangeStart(new Date());\r\n\t\t\t\tthis.handleDateChangeEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 1: {\r\n\t\t\t\tconst yesterday = new Date();\r\n\t\t\t\tyesterday.setDate(yesterday.getDate() - 1);\r\n\t\t\t\tthis.handleDateChangeStart(yesterday);\r\n\t\t\t\tthis.handleDateChangeEnd(yesterday);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 2: {\r\n\t\t\t\tconst last7Days = new Date();\r\n\t\t\t\tlast7Days.setDate(last7Days.getDate() - 7);\r\n\t\t\t\tthis.handleDateChangeStart(last7Days);\r\n\t\t\t\tthis.handleDateChangeEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 3: {\r\n\t\t\t\tconst last30Days = new Date();\r\n\t\t\t\tlast30Days.setDate(last30Days.getDate() - 30);\r\n\t\t\t\tthis.handleDateChangeStart(last30Days);\r\n\t\t\t\tthis.handleDateChangeEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault: {\r\n\t\t\t\tthis.handleDateChangeStart(new Date());\r\n\t\t\t\tthis.handleDateChangeEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tdropdown: {\r\n\t\t\t\t...this.state.dropdown,\r\n\t\t\t\tcurrentFilter: this.state.dropdown.filters[index],\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tdeleteWorkLog = (id, working, employeeId) => {\r\n\t\tdeleteServerWorkLog(id, working, employeeId).then(() => {\r\n\t\t\tthis.fetchWorkLog();\r\n\t\t});\r\n\t}\r\n\r\n\teditWorkLog = (id, startDate, endDate, working) => {\r\n\t\tthis.setState({\r\n\t\t\teditWorkLog: {\r\n\t\t\t\t...this.state.editWorkLog,\r\n\t\t\t\tid: id,\r\n\t\t\t\tstartDate: startDate,\r\n\t\t\t\tendDate: endDate,\r\n\t\t\t\tworking: working,\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tconfirmEditWorkLog = () => {\r\n\t\teditServerWorkLog(\r\n\t\t\tthis.state.editWorkLog.id,\r\n\t\t\tthis.state.editWorkLog.startDate,\r\n\t\t\tthis.state.editWorkLog.endDate,\r\n\t\t\tthis.state.editWorkLog.working).then(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\teditWorkLog: {\r\n\t\t\t\t\t\tid: null,\r\n\t\t\t\t\t\tstartDate: null,\r\n\t\t\t\t\t\tendDate: null,\r\n\t\t\t\t\t\tworking: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.fetchWorkLog();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\r\n\tcancelEditWorkLog = () => {\r\n\t\tthis.setState({\r\n\t\t\teditWorkLog: {\r\n\t\t\t\tid: null,\r\n\t\t\t\tstartDate: null,\r\n\t\t\t\tendDate: null,\r\n\t\t\t\tworking: false,\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tonStartDateChange = (date) => {\r\n\t\tthis.setState({\r\n\t\t\teditWorkLog: {\r\n\t\t\t\t...this.state.editWorkLog,\r\n\t\t\t\tstartDate: date\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonEndDateChange = (date) => {\r\n\t\tthis.setState({\r\n\t\t\teditWorkLog: {\r\n\t\t\t\t...this.state.editWorkLog,\r\n\t\t\t\tendDate: date\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet filterResults = 0;\r\n\t\tlet lastStartDate = null;\r\n\t\tlet totalDayWorkTime = 0;\r\n\t\tlet totalWorkTime = 0;\r\n\t\tlet totalDays = 0;\r\n\r\n\t\tconst workLogFiltered = this.state.workLog\r\n\t\t\t.filter((log) => {\r\n\t\t\t\t// Filter out all rows which do not match the date\r\n\t\t\t\tconst startTimePure = new Date(log.start_time);\r\n\r\n\t\t\t\tif (startTimePure < this.state.startDate || startTimePure > this.state.endDate) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tfilterResults++;\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\r\n\t\tconst workLog = workLogFiltered\r\n\t\t\t.map((log, index) => {\r\n\t\t\t\t// Format the remaining filtered work logs\r\n\t\t\t\tconst stillWorking = log.end_time === null ? true : false;\r\n\t\t\t\tconst startTimePure = new Date(log.start_time);\r\n\t\t\t\tconst endTimePure = stillWorking ? new Date() : new Date(log.end_time);\r\n\r\n\t\t\t\tconst startTimeFormatted =\r\n\t\t\t\t\taddZero(startTimePure.getHours()) + \":\"\r\n\t\t\t\t\t+ addZero(startTimePure.getMinutes());\r\n\r\n\t\t\t\tconst endTimeFormatted = stillWorking ? \" - \" :\r\n\t\t\t\t\taddZero(endTimePure.getHours()) + \":\"\r\n\t\t\t\t\t+ addZero(endTimePure.getMinutes());\r\n\r\n\t\t\t\tconst workTime = millisecondConverter(endTimePure - startTimePure);\r\n\t\t\t\ttotalDayWorkTime += (endTimePure - startTimePure);\r\n\t\t\t\ttotalWorkTime += (endTimePure - startTimePure);\r\n\t\t\t\tconst workTimeFormatted =\r\n\t\t\t\t\t+ workTime.hours + \" st. \"\r\n\t\t\t\t\t+ workTime.minutes + \" min. \";\r\n\r\n\t\t\t\tconst workingStyle = {\r\n\t\t\t\t\tbackgroundColor: \"#ffffe6\",\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst commands = (\r\n\t\t\t\t\t<Row className=\"text-center\">\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.editWorkLog.id === log.id\r\n\t\t\t\t\t\t\t\t\t? <>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tsize={\"sm\"}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.confirmEditWorkLog()}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<FiCheck className=\"mb-1\" />\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tsize={\"sm\"}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.cancelEditWorkLog()}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<FiX className=\"mb-1\" />\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t: <>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tsize={\"sm\"}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.editWorkLog(log.id, log.start_time, log.end_time, stillWorking)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<FiEdit className=\"mb-1\" />\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tsize={\"sm\"}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.deleteWorkLog(log.id, stillWorking, log.employee_id)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<FiTrash className=\"mb-1\" />\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\r\n\t\t\t\tconst workRow = (\r\n\t\t\t\t\t<tr className=\"text-center\" style={stillWorking ? workingStyle : null}>\r\n\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.editWorkLog.id === log.id\r\n\t\t\t\t\t\t\t\t\t? <BoostrapDatePicker\r\n\t\t\t\t\t\t\t\t\t\tdateFormat=\"dd.MM.yyyy. HH:mm\"\r\n\t\t\t\t\t\t\t\t\t\tselected={new Date(this.state.editWorkLog.startDate)}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onStartDateChange}\r\n\t\t\t\t\t\t\t\t\t\ttimeIntervals={1}\r\n\t\t\t\t\t\t\t\t\t\tshowTimeSelect\r\n\t\t\t\t\t\t\t\t\t\ttimeFormat=\"HH:mm\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t: startTimeFormatted\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.editWorkLog.id === log.id && !stillWorking\r\n\t\t\t\t\t\t\t\t\t? <BoostrapDatePicker\r\n\t\t\t\t\t\t\t\t\t\tdateFormat=\"dd.MM.yyyy. HH:mm\"\r\n\t\t\t\t\t\t\t\t\t\tselected={new Date(this.state.editWorkLog.endDate)}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onEndDateChange}\r\n\t\t\t\t\t\t\t\t\t\ttimeIntervals={1}\r\n\t\t\t\t\t\t\t\t\t\tshowTimeSelect\r\n\t\t\t\t\t\t\t\t\t\ttimeFormat=\"HH:mm\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t: endTimeFormatted\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>{workTimeFormatted}</td>\r\n\t\t\t\t\t\t<td>{commands}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlet dateRow = null;\r\n\t\t\t\tlet totalDayRow = null;\r\n\t\t\t\tlet totalRow = null;\r\n\r\n\t\t\t\tif (lastStartDate === null || lastStartDate !== startTimePure.getDate()) {\r\n\t\t\t\t\tlastStartDate = startTimePure.getDate();\r\n\r\n\t\t\t\t\tconst dateFormatted =\r\n\t\t\t\t\t\taddZero(startTimePure.getDate()) + \".\"\r\n\t\t\t\t\t\t+ addZero(startTimePure.getMonth() + 1) + \".\"\r\n\t\t\t\t\t\t+ addZero(startTimePure.getFullYear());\r\n\r\n\t\t\t\t\tdateRow = (\r\n\t\t\t\t\t\t<tr className=\"bg-dark text-light\">\r\n\t\t\t\t\t\t\t<td style={{ width: \"100px\" }}><b>{dateFormatted}</b></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet nextStartDate = null;\r\n\r\n\t\t\t\tif (workLogFiltered[index + 1]) {\r\n\t\t\t\t\tnextStartDate = new Date(workLogFiltered[index + 1].start_time).getDate();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (nextStartDate !== startTimePure.getDate()) {\r\n\t\t\t\t\tconst totalDayWorkTimeConverted = millisecondConverter(totalDayWorkTime);\r\n\r\n\t\t\t\t\tconst totalDayWorkTimeFormatted =\r\n\t\t\t\t\t\t+ totalDayWorkTimeConverted.hours + \" st. \"\r\n\t\t\t\t\t\t+ totalDayWorkTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\t\ttotalDayRow = (\r\n\t\t\t\t\t\t<tr className=\"bg-light text-dark\">\r\n\t\t\t\t\t\t\t<td><b>KOPĀ</b></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td className=\"text-center\"><b>{totalDayWorkTimeFormatted}</b></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\ttotalDays++;\r\n\t\t\t\t\ttotalDayWorkTime = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (totalDays > 1 && nextStartDate === null) {\r\n\t\t\t\t\tconst totalWorkTimeConverted = millisecondConverter(totalWorkTime);\r\n\r\n\t\t\t\t\tconst totalWorkTimeFormatted =\r\n\t\t\t\t\t\t+ totalWorkTimeConverted.hours + \" st. \"\r\n\t\t\t\t\t\t+ totalWorkTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\t\tconst fromDateFormatted =\r\n\t\t\t\t\t\taddZero(this.state.startDate.getDate()) + \".\"\r\n\t\t\t\t\t\t+ addZero(this.state.startDate.getMonth() + 1) + \".\"\r\n\t\t\t\t\t\t+ addZero(this.state.startDate.getFullYear());\r\n\r\n\t\t\t\t\tconst toDateFormatted =\r\n\t\t\t\t\t\taddZero(this.state.endDate.getDate()) + \".\"\r\n\t\t\t\t\t\t+ addZero(this.state.endDate.getMonth() + 1) + \".\"\r\n\t\t\t\t\t\t+ addZero(this.state.endDate.getFullYear());\r\n\r\n\r\n\t\t\t\t\ttotalRow = (\r\n\t\t\t\t\t\t<tr className=\"text-dark\">\r\n\t\t\t\t\t\t\t<td colSpan={2}><b>{fromDateFormatted} - {toDateFormatted}</b></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td className=\"text-center\"><b>{totalWorkTimeFormatted}</b></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\ttotalWorkTime = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<tbody key={index} className=\"vertical-align-center\">\r\n\t\t\t\t\t\t{dateRow}\r\n\t\t\t\t\t\t{workRow}\r\n\t\t\t\t\t\t{totalDayRow}\r\n\t\t\t\t\t\t{totalRow}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\tshow={this.props.employeeWorkLog.show}\r\n\t\t\t\tonHide={this.onHide}\r\n\t\t\t\tonExited={this.onExited}\r\n\t\t\t\tsize={\"lg\"}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title className=\"w-100\">\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<h4>\r\n\t\t\t\t\t\t\t\t\t{this.state.employee.surname + \" \" + this.state.employee.name}\r\n\t\t\t\t\t\t\t\t\t{this.state.employee.personalCode\r\n\t\t\t\t\t\t\t\t\t\t? \" (\" + this.state.employee.personalCode + \")\"\r\n\t\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<h5 className=\"text-secondary\">{this.state.employee.company}</h5>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<h5 className=\"text-secondary\">{this.state.employee.position}</h5>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col className=\"text-right\">\r\n\t\t\t\t\t\t\t\t<h5 className=\"text-secondary\">\r\n\t\t\t\t\t\t\t\t\t{this.state.employee.number\r\n\t\t\t\t\t\t\t\t\t\t? \"Tel. \" + this.state.employee.number\r\n\t\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<Form.Group as={Row}>\r\n\t\t\t\t\t\t\t\t\t<Form.Label column xs={2}>No</Form.Label>\r\n\t\t\t\t\t\t\t\t\t<Col xs={10}>\r\n\t\t\t\t\t\t\t\t\t\t<BoostrapDatePicker\r\n\t\t\t\t\t\t\t\t\t\t\tdateFormat=\"dd.MM.yyyy.\"\r\n\t\t\t\t\t\t\t\t\t\t\tselected={this.state.startDate}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleDateChangeStart}\r\n\t\t\t\t\t\t\t\t\t\t\tmaxDate={new Date()}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<Form.Group as={Row}>\r\n\t\t\t\t\t\t\t\t\t<Form.Label column xs={2}>Līdz</Form.Label>\r\n\t\t\t\t\t\t\t\t\t<Col xs={10}>\r\n\t\t\t\t\t\t\t\t\t\t<BoostrapDatePicker\r\n\t\t\t\t\t\t\t\t\t\t\tdateFormat=\"dd.MM.yyyy.\"\r\n\t\t\t\t\t\t\t\t\t\t\tselected={this.state.endDate}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleDateChangeEnd}\r\n\t\t\t\t\t\t\t\t\t\t\tminDate={this.state.startDate}\r\n\t\t\t\t\t\t\t\t\t\t\tmaxDate={new Date()}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col className=\"d-flex flex-column\">\r\n\t\t\t\t\t\t\t\t<DropdownButton\r\n\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t\t\t\t\ttitle={this.state.dropdown.currentFilter}\r\n\t\t\t\t\t\t\t\t\tclassName=\"text-right mt-auto mb-3\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tthis.state.dropdown.filters.map((filter, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn <Dropdown.Item key={index} onClick={() => this.onClickFilter(index)}>{filter}</Dropdown.Item>\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</DropdownButton>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.workLog.length && filterResults\r\n\t\t\t\t\t\t\t? (\r\n\t\t\t\t\t\t\t\t<Table size=\"sm\">\r\n\t\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t\t<tr className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Ienāca</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Izgāja</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Nostrādāja</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t{workLog}\r\n\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\tNetika atrasts neviens ieraksts...\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\temployeeWorkLog: state.employees.employeeWorkLog,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\thideEmployeeWorkLog: () => dispatch(hideEmployeeWorkLog()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(ViewEmployee);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Button } from \"react-bootstrap\";\r\n\r\nimport { showDeleteEmployee, hideDeleteEmployee } from \"../actions/employeeActions\";\r\n\r\nimport { storeUpdateEmployees, deleteServerEmployee } from \"../utils/employeeUtils\";\r\n\r\nclass DeleteEmployee extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal \r\n\t\t\t\tshow={this.props.deleteEmployee.show}\r\n\t\t\t\tonHide={() => this.props.hideDeleteEmployee()}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>{this.props.deleteEmployee.employee.name + \" \" + this.props.deleteEmployee.employee.surname}</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\tVai esiet pārliecināts ka vēlaties dzēst šo darbinieku?\r\n\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button variant=\"danger\" onClick={() => {\r\n\t\t\t\t\t\tdeleteServerEmployee(this.props.deleteEmployee.employee.id).then(() => {\r\n\t\t\t\t\t\t\tstoreUpdateEmployees();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.props.hideDeleteEmployee();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\tDzēst\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tdeleteEmployee: state.employees.deleteEmployee,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowDeleteEmployee: () => dispatch(showDeleteEmployee()),\r\n\t\thideDeleteEmployee: () => dispatch(hideDeleteEmployee()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(DeleteEmployee);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Button, Form, Row, Col, Alert } from \"react-bootstrap\";\r\n\r\nimport { showEditEmployee, hideEditEmployee } from \"../actions/employeeActions\";\r\n\r\nimport {\r\n\tsetEmployeeUID,\r\n\tremoveEmployeeUID,\r\n\tawaitCard,\r\n\tstoreUpdateEmployee,\r\n\teditServerEmployee,\r\n} from \"../utils/employeeUtils\";\r\n\r\nimport {\r\n\taddZero\r\n} from \"../utils/commonUtils\";\r\n\r\nconst CHANGE_CARD_STATE = {\r\n\tOFF: 0,\r\n\tRFID_WAIT: 1,\r\n\tCOMPLETE: 2,\r\n\tDELETED: 3,\r\n}\r\n\r\nclass EditEmployee extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.initialState = {\r\n\t\t\temployee: {\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tsurname: \"\",\r\n\t\t\t\tpersonalCode: \"\",\r\n\t\t\t\tcompany: \"\",\r\n\t\t\t\tposition: \"\",\r\n\t\t\t\tnumber: \"\",\r\n\t\t\t\tuid: \"\"\r\n\t\t\t},\r\n\t\t\tchangeCard: {\r\n\t\t\t\tstatus: 0,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\t...this.initialState\r\n\t\t}\r\n\t}\r\n\r\n\tonEnter = () => {\r\n\t\tthis.setState({\r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\t...this.props.editEmployee.employee,\r\n\t\t\t}\r\n\t\t}, () => {\r\n\t\t\tif(!this.state.employee.company) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\temployee: {\r\n\t\t\t\t\t\t...this.state.employee,\r\n\t\t\t\t\t\tcompany: 'SIA \"Vārpas 1\"',\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonHide = () => {\r\n\t\tthis.props.hideEditEmployee();\r\n\t\tthis.setState({\r\n\t\t\t...this.initialState\r\n\t\t});\r\n\t}\r\n\r\n\tonNameChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\tname: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonSurnameChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\tsurname: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonPersonalCodeChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\tpersonalCode: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonCompanyChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\tcompany: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonPositionChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\tposition: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonNumberChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\tnumber: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tchangeCard = (id) => {\r\n\t\tthis.setState({\r\n\t\t\tchangeCard: {\r\n\t\t\t\tstatus: CHANGE_CARD_STATE.RFID_WAIT\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tawaitCard().then((res) => {\r\n\t\t\tif(res.data) {\r\n\t\t\t\tsetEmployeeUID(res.data.uid, id).then(() => {\r\n\t\t\t\t\tstoreUpdateEmployee(id);\r\n\t\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\temployee: {\r\n\t\t\t\t\t\t\t...this.state.employee,\r\n\t\t\t\t\t\t\tuid: res.data.uid,\r\n\t\t\t\t\t\t\tuid_added: new Date(),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tchangeCard: {\r\n\t\t\t\t\t\t\tstatus: CHANGE_CARD_STATE.COMPLETE\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tchangeCard: {\r\n\t\t\t\t\t\tstatus: CHANGE_CARD_STATE.OFF\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdeleteCard = (id) => {\r\n\t\tremoveEmployeeUID(id).then(() => {\r\n\t\t\tstoreUpdateEmployee(id);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\temployee: {\r\n\t\t\t\t\t...this.state.employee,\r\n\t\t\t\t\tuid: \"N/A\",\r\n\t\t\t\t\tuid_added: null,\r\n\t\t\t\t},\r\n\t\t\t\tchangeCard: {\r\n\t\t\t\t\tstatus: CHANGE_CARD_STATE.DELETED\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst uidAddedDate = new Date(this.state.employee.uid_added);\r\n\t\tconst uidAdded = \r\n\t\t\taddZero(uidAddedDate.getDate()) + \".\" \r\n\t\t\t+ addZero(uidAddedDate.getMonth() + 1) + \".\" \r\n\t\t\t+ addZero(uidAddedDate.getFullYear());\r\n\r\n\t\treturn (\r\n\t\t\t<Modal \r\n\t\t\t\tshow={this.props.editEmployee.show}\r\n\t\t\t\tonHide={() => this.onHide()}\r\n\t\t\t\tonEnter={() => this.onEnter()}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>{this.props.editEmployee.employee.name + \" \" + this.props.editEmployee.employee.surname}</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>* Vārds</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control required value={this.state.employee.name} onChange={this.onNameChange}/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>* Uzvārds</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control required value={this.state.employee.surname} onChange={this.onSurnameChange}/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>Personas Kods</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control value={this.state.employee.personalCode} onChange={this.onPersonalCodeChange}/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>Telefona Numurs</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control value={this.state.employee.number} onChange={this.onNumberChange}/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Uzņēmums</Form.Label>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tas=\"select\"\r\n\t\t\t\t\t\t\tonChange={this.onCompanyChange}\r\n\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\tthis.state.employee.company\r\n\t\t\t\t\t\t\t\t? this.state.employee.company\r\n\t\t\t\t\t\t\t\t: 'SIA \"Vārpas 1\"'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value='SIA \"Vārpas 1\"'>SIA \"Vārpas 1\"</option>\r\n\t\t\t\t\t\t\t<option value='SIA \"Adeptus Renewable Energy\"'>SIA \"Adeptus Renewable Energy\"</option>\r\n\t\t\t\t\t\t\t<option value='SIA \"Valkas koks\"'>SIA \"Valkas koks\"</option>\r\n\t\t\t\t\t\t</Form.Control>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Amats</Form.Label>\r\n\t\t\t\t\t\t<Form.Control value={this.state.employee.position} onChange={this.onPositionChange}/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Row}>\r\n\t\t\t\t\t\t<Form.Label column xs={\"auto\"}>UID (NFC Karte)</Form.Label>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\tdisabled \r\n\t\t\t\t\t\t\t\tvalue={this.state.employee.uid ? this.state.employee.uid : \"N/A\"}\r\n\t\t\t\t\t\t\t\tclassName=\"text-center\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={\"auto\"}>\r\n\t\t\t\t\t\t\t<Button variant=\"link\" onClick={() => this.deleteCard(this.props.editEmployee.employee.id)}>Dzēst</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={\"auto\"}>\r\n\t\t\t\t\t\t\t<Button variant=\"link\" onClick={() => this.changeCard(this.props.editEmployee.employee.id)}>Mainīt</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.employee.uid_added\r\n\t\t\t\t\t\t? <Form.Group as={Row}>\r\n\t\t\t\t\t\t\t<Form.Label column>Karte reģistrēta: { uidAdded }</Form.Label>\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t<Alert \r\n\t\t\t\t\t\tvariant={\"primary\"} \r\n\t\t\t\t\t\tshow={\r\n\t\t\t\t\t\t\tthis.state.changeCard.status === CHANGE_CARD_STATE.RFID_WAIT\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\tonClose={() => null}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tNoskenējiet vēlamo kartiņu.\r\n\t\t\t\t\t</Alert>\r\n\r\n\t\t\t\t\t<Alert \r\n\t\t\t\t\t\tvariant={\"success\"} \r\n\t\t\t\t\t\tshow={\r\n\t\t\t\t\t\t\tthis.state.changeCard.status === CHANGE_CARD_STATE.COMPLETE\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\tonClose={() => null}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tDarbiniekam karte nomainīta.\r\n\t\t\t\t\t</Alert>\r\n\r\n\t\t\t\t\t<Alert \r\n\t\t\t\t\t\tvariant={\"danger\"} \r\n\t\t\t\t\t\tshow={\r\n\t\t\t\t\t\t\tthis.state.changeCard.status === CHANGE_CARD_STATE.DELETED\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\tonClose={() => null}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tDarbinieka karte dzēsta.\r\n\t\t\t\t\t</Alert>\r\n\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button variant=\"success\" onClick={() => {\r\n\t\t\t\t\t\tconst employeeId = this.state.employee.id;\r\n\t\t\t\t\t\teditServerEmployee(this.state.employee).then(() => {\r\n\t\t\t\t\t\t\tstoreUpdateEmployee(employeeId);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.props.hideEditEmployee();\r\n\t\t\t\t\t\tthis.onHide();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\tRediģēt\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\teditEmployee: state.employees.editEmployee,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowEditEmployee: () => dispatch(showEditEmployee()),\r\n\t\thideEditEmployee: () => dispatch(hideEditEmployee()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(EditEmployee);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Button, Row, Col, Table, Form } from \"react-bootstrap\";\r\nimport BoostrapDatePicker from \"./BoostrapDatePicker\";\r\nimport download from \"downloadjs\";\r\n\r\nimport { showExportExcel, hideExportExcel } from \"../actions/employeeActions\";\r\n\r\nimport { exportServerEmployees } from \"../utils/employeeUtils\";\r\n\r\nclass ExportExcel extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tmonth: new Date(),\r\n\t\t\temployeeList: [],\r\n\t\t\tcheckAll: false,\r\n\t\t\tincludeNoHours: false,\r\n\t\t\tincludeInactive: false,\r\n\t\t\tincludeArchived: false\r\n\t\t}\r\n\t}\r\n\r\n\thandleDateChange = (date) => {\r\n\t\tthis.setState({\r\n\t\t\tmonth: date,\r\n\t\t});\r\n\t}\r\n\r\n\tonToggleIncludeNoHours = () => {\r\n\t\tthis.setState({\r\n\t\t\tincludeNoHours: !this.state.includeNoHours\r\n\t\t});\r\n\t}\r\n\r\n\tonToggleIncludeInactive = () => {\r\n\t\tthis.setState({\r\n\t\t\tincludeInactive: !this.state.includeInactive\r\n\t\t});\r\n\t}\r\n\r\n\tonToggleIncludeArchived = () => {\r\n\t\tthis.setState({\r\n\t\t\tincludeArchived: !this.state.includeArchived\r\n\t\t});\r\n\t}\r\n\r\n\tonEmployeeCheck = (index) => {\r\n\t\tconst newList = this.state.employeeList;\r\n\t\tnewList[index].checked = !newList[index].checked;\r\n\r\n\t\tthis.setState({\r\n\t\t\temployeeList: newList\r\n\t\t});\r\n\t}\r\n\r\n\tonCheckAll = () => {\r\n\t\tthis.setState({\r\n\t\t\temployeeList: this.state.employeeList.map(employee => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...employee,\r\n\t\t\t\t\tchecked: !this.state.checkAll\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tcheckAll: !this.state.checkAll\r\n\t\t});\r\n\t}\r\n\r\n\texport = () => {\r\n\t\texportServerEmployees({\r\n\t\t\tmonth: this.state.month,\r\n\t\t\temployees: this.state.employeeList.filter(employee => {\r\n\t\t\t\treturn employee.checked;\r\n\t\t\t}),\r\n\t\t\tincludeNoHours: this.state.includeNoHours,\r\n\t\t\tincludeInactive: this.state.includeInactive,\r\n\t\t\tincludeArchived: this.state.includeArchived\r\n\t\t}).then((response) => {\r\n\t\t\tconst content = response.headers[\"content-type\"];\r\n           \tdownload(response.data, \"Varpas 1.xlsx\", content);\r\n\t\t});\r\n\t}\r\n\r\n\tonEnter = () => {\r\n\t\tthis.setState({\r\n\t\t\temployeeList: this.props.employees.map(employee => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...employee,\r\n\t\t\t\t\tchecked: false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(!this.props.exportExcel.show) return null;\r\n\r\n\t\tconst employees = this.state.employeeList.map((employee, index) => {\r\n\t\t\treturn (\r\n\t\t\t\t<tbody key={index}>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tchecked={employee.checked}\r\n\t\t\t\t\t\t\t\tonChange={() => this.onEmployeeCheck(index)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>{employee.surname + \" \" + employee.name}</td>\r\n\t\t\t\t\t\t<td>{employee.personalCode}</td>\r\n\t\t\t\t\t\t<td>{employee.position}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<Modal \r\n\t\t\t\tsize=\"lg\"\r\n\t\t\t\tshow={this.props.exportExcel.show}\r\n\t\t\t\tonEnter={() => this.onEnter()}\r\n\t\t\t\tonHide={() => this.props.hideExportExcel()}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>Eksports</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<h5>Periods</h5>\r\n\t\t\t\t\t\t\t<Form.Group as={Row} className=\"ml-1\">\r\n\t\t\t\t\t\t\t\t<Form.Label column xs={\"3\"}>Mēnesis: </Form.Label>\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t<BoostrapDatePicker\r\n\t\t\t\t\t\t\t\t\t\tdateFormat=\"MM.yyyy.\"\r\n\t\t\t\t\t\t\t\t\t\tselected={this.state.month}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleDateChange}\r\n\t\t\t\t\t\t\t\t\t\tshowMonthYearPicker\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<h5>Iekļaut</h5>\r\n\t\t\t\t\t\t\t<Form.Group as={Row} className=\"ml-1\">\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\" \r\n\t\t\t\t\t\t\t\t\t\tlabel=\"darbiniekus bez nostrādātām stundām\"\r\n\t\t\t\t\t\t\t\t\t\tchecked={this.state.includeNoHours}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onToggleIncludeNoHours}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t<Form.Group as={Row} className=\"ml-1\">\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\" \r\n\t\t\t\t\t\t\t\t\t\tlabel=\"deaktivizētus darbiniekus\"\r\n\t\t\t\t\t\t\t\t\t\tchecked={this.state.includeInactive}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onToggleIncludeInactive}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t<Form.Group as={Row} className=\"ml-1\">\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\" \r\n\t\t\t\t\t\t\t\t\t\tlabel=\"arhivētus darbiniekus\"\r\n\t\t\t\t\t\t\t\t\t\tchecked={this.state.includeArchived}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onToggleIncludeArchived}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<h5>Atlasīt Darbiniekus</h5>\r\n\t\t\t\t\t\t\t<Table size=\"sm\">\r\n\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={this.state.checkAll}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={() => this.onCheckAll()}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Vārds</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Personas Kods</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Amats</th>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t{employees}\r\n\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button variant=\"success\" onClick={() => {\r\n\t\t\t\t\t\tthis.export();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\tEksportēt\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\texportExcel: state.employees.exportExcel,\r\n\t\temployees: state.employees.employees\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowExportExcel: () => dispatch(showExportExcel()),\r\n\t\thideExportExcel: () => dispatch(hideExportExcel()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(ExportExcel);\r\n","import { request } from \"./config\";\r\n\r\nexport const checkSession = () => {\r\n\treturn request.post(\"/checkSession\");\r\n}\r\n\r\nexport const authenticate = (username, password, rememberMe) => {\r\n\treturn request.post(\"/authenticate\", {\r\n\t\tusername,\r\n\t\tpassword,\r\n\t\trememberMe\r\n\t});\r\n}\r\n\r\nexport const logOut = () => {\r\n\treturn request.post(\"/logOut\");\r\n}\r\n\r\nexport const getUserByUsername = (username) => {\r\n\treturn request.post(\"/getUserByUsername\", {\r\n\t\tusername\r\n\t});\r\n}\r\n\r\nexport const getUserByKey = () => {\r\n\treturn request.post(\"/getUserByKey\");\r\n}","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Button, Form, Alert } from \"react-bootstrap\";\r\n\r\nimport { authenticate } from \"../utils/userUtils\";\r\nimport { production } from \"../utils/config\";\r\n\r\nimport logo from \"../images/logo.png\";\r\n\r\nconst DEBUG = !production;\r\n\r\nclass LogIn extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.state = {\r\n\t\t\tusername: DEBUG ? \"nils.asejevs\" : \"\",\r\n\t\t\tpassword: DEBUG ? \"EvoNils112\" : \"\",\r\n\t\t\trememberMe: true,\r\n\t\t\tauthenticationError: false,\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif(DEBUG) {\r\n\t\t\tthis.logIn();\r\n\t\t}\r\n\t}\r\n\r\n\tonUsernameChange = (event) => {\r\n\t\tthis.setState({ username: event.target.value });\r\n\t}\r\n\r\n\tonPasswordChange = (event) => {\r\n\t\tthis.setState({ password: event.target.value });\r\n\t}\r\n\r\n\tonRememberMeChange = () => {\r\n\t\tthis.setState({ rememberMe: !this.state.rememberMe });\r\n\t}\r\n\r\n\tlogIn = (e) => {\r\n\t\tif(DEBUG === false) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\tauthenticate(this.state.username, this.state.password, this.state.rememberMe).then((res) => {\r\n\t\t\tif(res.data) {\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tauthenticationError: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\tcentered\r\n\t\t\t\tshow={true}\r\n\t\t\t\tonHide={() => null}\r\n\t\t\t>\r\n\t\t\t\t<Form onSubmit={e => this.logIn(e)}>\r\n\t\t\t\t<Modal.Header className=\"justify-content-center\">\r\n\t\t\t\t\t<Modal.Title>\r\n\t\t\t\t\t\t<img \r\n\t\t\t\t\t\t\tsrc={logo}\r\n\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\twidth=\"auto\"\r\n\t\t\t\t\t\t\theight=\"40px\"\r\n\t\t\t\t\t\t\tclassName=\"d-inline-block align-top mr-2\"\r\n\t\t\t\t\t\t\tstyle={{filter: \"invert(100%)\"}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\tAutentifikācija\r\n\t\t\t\t\t</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Lietotājvārds</Form.Label>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tvalue={this.state.username} \r\n\t\t\t\t\t\t\tonChange={this.onUsernameChange}\r\n\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Parole</Form.Label>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tvalue={this.state.password} \r\n\t\t\t\t\t\t\tonChange={this.onPasswordChange}\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group controlId=\"formBasicChecbox\">\r\n\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\ttype=\"checkbox\" \r\n\t\t\t\t\t\t\tlabel=\"Atcerēties mani\"\r\n\t\t\t\t\t\t\tname=\"rememberMe\"\r\n\t\t\t\t\t\t\tchecked={this.state.rememberMe}\r\n\t\t\t\t\t\t\tonChange={this.onRememberMeChange}/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Alert variant={\"danger\"} show={this.state.authenticationError} onClose={() => null}>\r\n\t\t\t\t\t\tNepareizs lietotājvārds un/vai parole.\r\n\t\t\t\t\t</Alert>\r\n\r\n\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button variant=\"success\" type=\"submit\">\r\n\t\t\t\t\t\tIelogoties\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(LogIn);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Alert } from \"react-bootstrap\";\r\n\r\nimport { showCheckCard, hideCheckCard, showEmployeeWorkLog } from \"../actions/employeeActions\";\r\n\r\nimport { awaitCard, getEmployeeByUID } from \"../utils/employeeUtils\";\r\n\r\n//import { checkCard } from \"../utils/employeeUtils\";\r\n\r\nclass CheckCard extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.state = {\r\n\t\t\tcardScanned: false,\r\n\t\t\tnotFound: false,\r\n\t\t}\r\n\t}\r\n\r\n\tcheckCard = () => {\r\n\t\tawaitCard().then((res) => {\r\n\t\t\tif(res.data) {\t\r\n\t\t\t\tgetEmployeeByUID(res.data.uid).then((res2) => {\r\n\t\t\t\t\tif(res2.data) {\r\n\t\t\t\t\t\tthis.hideModal();\r\n\t\t\t\t\t\tthis.props.showEmployeeWorkLog(res2.data.id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tcardScanned: true,\r\n\t\t\t\t\t\t\tnotFound: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thideModal = () => {\r\n\t\tthis.props.hideCheckCard();\r\n\r\n\t\tthis.setState({\r\n\t\t\tcardScanned: false,\r\n\t\t\temployee: {}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal \r\n\t\t\t\tshow={this.props.checkCard.show}\r\n\t\t\t\tonHide={this.hideModal}\r\n\t\t\t\tonEntered={() => this.checkCard()}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>Atrast darbinieku pēc kartes</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Alert variant={\"primary\"} show={!this.state.cardScanned}>\r\n\t\t\t\t\t\tNoskenējiet NFC kartiņu...\r\n\t\t\t\t\t</Alert>\r\n\t\t\t\t\t<Alert variant={\"danger\"} show={this.state.cardScanned && this.state.notFound}>\r\n\t\t\t\t\t\tUz šīs kartiņas nav reģistrēts neviens darbinieks.\r\n\t\t\t\t\t</Alert>\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tcheckCard: state.employees.checkCard,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowCheckCard: () => dispatch(showCheckCard()),\r\n\t\thideCheckCard: () => dispatch(hideCheckCard()),\r\n\t\tshowEmployeeWorkLog: (id) => dispatch(showEmployeeWorkLog(id)),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(CheckCard);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Button, Form, Row, Col } from \"react-bootstrap\";\r\nimport BoostrapDatePicker from \"./BoostrapDatePicker\";\r\n\r\nimport { showCommentEmployee, hideCommentEmployee } from \"../actions/employeeActions\";\r\n\r\nimport { storeUpdateEmployee, addEmployeeComment } from \"../utils/employeeUtils\";\r\n\r\nclass CommentEmployee extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.initialState = {\r\n\t\t\tcomment: {\r\n\t\t\t\ttext: \"\",\r\n\t\t\t\texpires: new Date(),\r\n\t\t\t\tmanualDelete: false,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\t...this.initialState\r\n\t\t}\r\n\t}\r\n\r\n\tonExited = () => {\r\n\t\tthis.props.hideCommentEmployee();\r\n\t\tthis.setState({\r\n\t\t\t...this.initialState\r\n\t\t});\r\n\t}\r\n\r\n\tonCommentChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\tcomment: {\r\n\t\t\t\t...this.state.comment,\r\n\t\t\t\ttext: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonExpiryDateChange = (date) => {\r\n\t\tthis.setState({\r\n\t\t\tcomment: {\r\n\t\t\t\t...this.state.comment,\r\n\t\t\t\texpires: date\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonManualDeleteChange = () => {\r\n\t\tthis.setState({ \r\n\t\t\tcomment: {\r\n\t\t\t\t...this.state.comment,\r\n\t\t\t\tmanualDelete: !this.state.comment.manualDelete\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\tshow={this.props.commentEmployee.show}\r\n\t\t\t\tonExited={() => this.onExited()}\r\n\t\t\t\tonHide={() => this.props.hideCommentEmployee()}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>{this.props.employee.name + \" \" + this.props.employee.surname}</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Form.Group as={Row}>\r\n\t\t\t\t\t\t<Form.Label column xs={2}>Komentārs</Form.Label>\r\n\t\t\t\t\t\t<Col xs={10}>\r\n\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\tas=\"textarea\"\r\n\t\t\t\t\t\t\t\trows=\"3\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.comment.text}\r\n\t\t\t\t\t\t\t\tonChange={this.onCommentChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Group as={Row}>\r\n\t\t\t\t\t\t<Form.Label column xs={2}>Dzēst</Form.Label>\r\n\t\t\t\t\t\t<Col xs={10}>\r\n\t\t\t\t\t\t\t<BoostrapDatePicker\r\n\t\t\t\t\t\t\t\tdisabled={this.state.comment.manualDelete}\r\n\t\t\t\t\t\t\t\tdateFormat=\"dd.MM.yyyy. HH:mm\"\r\n\t\t\t\t\t\t\t\tselected={this.state.comment.expires}\r\n\t\t\t\t\t\t\t\tonChange={this.onExpiryDateChange}\r\n\t\t\t\t\t\t\t\tmaxDate={new Date()}\r\n\t\t\t\t\t\t\t\ttimeIntervals={1}\r\n\t\t\t\t\t\t\t\tshowTimeSelect\r\n\t\t\t\t\t\t\t\ttimeFormat=\"HH:mm\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\ttype=\"checkbox\" \r\n\t\t\t\t\t\t\tlabel=\"Tikai manuāli dzēšams\"\r\n\t\t\t\t\t\t\tname=\"manualDelete\"\r\n\t\t\t\t\t\t\tchecked={this.state.comment.manualDelete}\r\n\t\t\t\t\t\t\tonChange={this.onManualDeleteChange}/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button variant=\"success\" onClick={() => {\r\n\t\t\t\t\t\tconst employeeId = this.props.employee.id;\r\n\t\t\t\t\t\taddEmployeeComment(this.props.employee, this.state.comment).then(() => {\r\n\t\t\t\t\t\t\tstoreUpdateEmployee(employeeId);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.props.hideCommentEmployee();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\tPievienot\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tcommentEmployee: state.employees.commentEmployee,\r\n\t\temployee: state.employees.commentEmployee.employee,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowCommentEmployee: () => dispatch(showCommentEmployee()),\r\n\t\thideCommentEmployee: () => dispatch(hideCommentEmployee()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(CommentEmployee);\r\n","import React from \"react\";\r\nimport findIndex from \"lodash/findIndex\";\r\n\r\nclass ScheduleCell extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.transparentColor = \"RGBA(0, 0, 0, 0)\";\r\n\t\tthis.dayColor = \"yellow\";\r\n\t\tthis.nightColor = \"blue\";\r\n\t\tthis.dayOffColor = \"gray\";\r\n\t\tthis.vacationColor = \"green\";\r\n\t\tthis.sickListColor = \"cyan\";\r\n\t}\r\n\t\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tif(JSON.stringify(nextProps.row.schedule.days[nextProps.extraData.colIndex]) !== JSON.stringify(this.props.row.schedule.days[this.props.extraData.colIndex]) ||\r\n\t\t\tJSON.stringify(nextProps.row.selectedFields) !== JSON.stringify(this.props.row.selectedFields)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconsole.log(\"cell render\");\r\n\r\n\t\tconst rowIndex = this.props.rowIndex;\r\n\t\tconst colIndex = this.props.extraData.colIndex;\r\n\t\tlet selectedFields = this.props.row.selectedFields;\r\n\r\n\t\tlet color = this.transparentColor;\r\n\r\n\t\tswitch(this.props.row.schedule.days[colIndex]) {\r\n\t\t\tcase \"D\": {\r\n\t\t\t\tcolor = this.dayColor;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"N\": {\r\n\t\t\t\tcolor = this.nightColor;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"B\": {\r\n\t\t\t\tcolor = this.dayOffColor;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"A\": {\r\n\t\t\t\tcolor = this.vacationColor;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"S\": {\r\n\t\t\t\tcolor = this.sickListColor;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault: {\r\n\t\t\t\tcolor = this.transparentColor;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(let i = 0; i < selectedFields.length; i++) {\r\n\t\t\tif(selectedFields[i][1] === rowIndex &&\r\n\t\t\t\tselectedFields[i][2] === colIndex) {\r\n\t\t\t\tcolor = \"RGBA(1, 1, 1, 0.3)\";\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div style={{ backgroundColor: color }}>\r\n\t\t\t\t<input \r\n\t\t\t\t\tonFocus={(event) => this.props.onClickScheduleInput(event, this.props.row.scheduleIndex, rowIndex, colIndex)}\r\n\t\t\t\t\tonChange={(event) => this.props.onChangeScheduleInput(event, this.props.row.scheduleIndex, colIndex)}\r\n\t\t\t\t\tclassName=\"border-0 text-center\" \r\n\t\t\t\t\tstyle={{ width: \"32px\", height: \"32px\", fontSize: \"12px\", backgroundColor: \"RGBA(0, 0, 0, 0)\"}}\r\n\t\t\t\t\tvalue={this.props.row.schedule.days[colIndex]}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ScheduleCell;\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport Cookies from \"universal-cookie\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\n\r\nimport { Row, Col, Button, Dropdown } from \"react-bootstrap\";\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\r\n\r\nimport ContainerBox from \"./ContainerBox\";\r\nimport Filters from \"./Filters\";\r\nimport ScheduleCell from \"./ScheduleCell\";\r\n\r\nimport {\r\n\tshowRegisterEmployee,\r\n\tshowExportExcel,\r\n\tshowCheckCard,\r\n\tshowEmployeeWorkLog\r\n} from \"../actions/employeeActions\";\r\n\r\nimport { getSchedules, saveSchedules } from \"../utils/employeeUtils\";\r\n\r\nimport { daysInMonth, convertSpecialCharacters, isWeekend } from \"../utils/commonUtils\";\r\n\r\nclass Employees extends React.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.currentMonth = new Date().getMonth();\r\n\r\n\t\tthis.transparentColor = \"RGBA(0, 0, 0, 0)\";\r\n\t\tthis.dayColor = \"yellow\";\r\n\t\tthis.nightColor = \"blue\";\r\n\t\tthis.dayOffColor = \"gray\";\r\n\t\tthis.vacationColor = \"green\";\r\n\t\tthis.sickListColor = \"cyan\";\r\n\r\n\t\tthis.keyDown = {};\r\n\r\n\t\tconst cookies = new Cookies();\r\n\t\tlet settings = cookies.get(\"settings\");\r\n\r\n\t\tif(!settings) {\r\n\t\t\tsettings = {\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t}\r\n\r\n\t\t\tcookies.set(\"settings\", settings);\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\t// General\r\n\t\t\ttableData: [],\r\n\t\t\tpageSize: 10,\r\n\t\t\t...settings,\r\n\t\t\tsaving: false,\r\n\t\t\t// Scheduling specific\r\n\t\t\tschedules: [],\r\n\t\t\tselectedFields: [],\r\n\t\t}\r\n\r\n\t\tthis.columns = [{\r\n\t\t\tdataField: \"id\",\r\n\t\t\ttext: \"#\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle d-none d-md-table-cell\",\r\n\t\t\theaderClasses: \"d-none d-md-table-cell\",\r\n\t\t\thidden: true,\r\n\t\t}, {\r\n\t\t\tdataField: \"name\",\r\n\t\t\ttext: \"Vārds\",\r\n\t\t\tsort: true,\r\n\t\t\tsortFunc: (a, b, order) => {\r\n\t\t\t\tif(convertSpecialCharacters(a.surname) < convertSpecialCharacters(b.surname)) {\r\n\t\t\t\t\treturn order === \"asc\" ? -1 : 1;\r\n\t\t\t\t} else if(convertSpecialCharacters(a.surname) > convertSpecialCharacters(b.surname)) {\r\n\t\t\t\t\treturn order === \"asc\" ? 1 : -1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t},\r\n\t\t\tclasses: \"text-center p-0 m-0\",\r\n\t\t\tformatter: this.nameFormatter,\r\n\t\t}];\r\n\r\n\t\tconst days = daysInMonth(new Date().getMonth(), new Date().getFullYear());\r\n\r\n\t\tfor(let i = 0; i < days; i++) {\r\n\t\t\tconst date = new Date();\r\n\t\t\tdate.setMonth(this.currentMonth);\r\n\t\t\tdate.setDate(i);\r\n\r\n\t\t\tlet color = \"RGBA(0, 0, 0, 0)\";\r\n\t\t\tif(isWeekend(date)) {\r\n\t\t\t\tcolor = \"lime\";\r\n\t\t\t}\r\n\r\n\t\t\tthis.columns.push({\r\n\t\t\t\tdataField: \"schedule\" + i,\r\n\t\t\t\ttext: (i + 1).toString(),\r\n\t\t\t\tformatter: this.dayFormatter,\r\n\t\t\t\tformatExtraData: { \r\n\t\t\t\t\tcolIndex: i,\r\n\t\t\t\t},\r\n\t\t\t\theaderClasses: \"text-center\",\r\n\t\t\t\theaderStyle: { backgroundColor: color },\r\n\t\t\t\tclasses: \"text-center p-0 m-0\",\r\n\t\t\t\tstyle: { backgroundColor: color }\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.defaultSorted = [{\r\n\t\t\tdataField: \"name\",\r\n\t\t\torder: \"asc\"\r\n\t\t}];\r\n\r\n\t\tthis.pagination = paginationFactory({\r\n\t\t\tpage: 1,\r\n\t\t\talwaysShowAllBtns: true,\r\n\t\t\tshowTotal: false,\r\n\t\t\tsizePerPage : this.state.pageSize,\r\n\t\t\tsizePerPageRenderer: this.sizePerPageRenderer,\r\n\t\t\tsizePerPageList: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"10\",\r\n\t\t\t\t\tvalue: 10,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"25\",\r\n\t\t\t\t\tvalue: 25,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"50\",\r\n\t\t\t\t\tvalue: 50,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"100\",\r\n\t\t\t\t\tvalue: 100,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"Viss\",\r\n\t\t\t\t\tvalue: 9999,\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.onTableChange();\r\n\r\n\t\tgetSchedules(this.currentMonth).then((res) => {\r\n\t\t\tconst schedules = res.data.map((schedule) => {\r\n\t\t\t\tconst parsedSchedule = schedule;\r\n\t\t\t\tparsedSchedule.days = JSON.parse(parsedSchedule.days);\r\n\t\t\t\treturn parsedSchedule;\r\n\t\t\t});\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tschedules: cloneDeep(schedules),\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\twindow.addEventListener(\"keydown\", (event) => {\r\n\t\t\tthis.keyDown[event.keyCode] = true;\r\n\t\t});\r\n\r\n\t\twindow.addEventListener(\"keyup\", (event) => {\r\n\t\t\tthis.keyDown[event.keyCode] = false;\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif(JSON.stringify(prevProps.employees) !== JSON.stringify(this.props.employees) ||\r\n\t\t\tJSON.stringify(prevState.schedules) !== JSON.stringify(this.state.schedules) ||\r\n\t\t\tJSON.stringify(prevState.selectedFields) !== JSON.stringify(this.state.selectedFields)) {\r\n\t\t\tthis.onTableChange();\r\n\t\t}\r\n\r\n\t\tif(prevState.pageSize !== this.state.pageSize) {\r\n\t\t\tthis.saveSettings();\r\n\t\t}\r\n\t}\r\n\r\n\tisKeyDown = (key) => {\r\n\t\treturn this.keyDown[key];\r\n\t}\r\n\r\n\tsaveSettings = () => {\r\n\t\tconst cookies = new Cookies();\r\n\t\tconst settings = {\r\n\t\t\t...cookies.get(\"settings\"),\r\n\t\t\tpageSize: this.state.pageSize,\r\n\t\t}\r\n\r\n\t\tcookies.set(\"settings\", settings);\r\n\t}\r\n\r\n\tonTableChange = () => {\r\n\t\tthis.formatTable((tableData) => {\r\n\t\t\tthis.filterData(tableData);\r\n\t\t});\r\n\t}\r\n\r\n\tonFilterChange = () => {\r\n\t\tthis.onTableChange();\r\n\t}\r\n\r\n\tonDataFiltered = (data) => {\r\n\t\tthis.setState({\r\n\t\t\ttableData: data\r\n\t\t});\r\n\t}\r\n\r\n\tsaveSchedules = () => {\r\n\t\tthis.setState({ saving: true });\r\n\t\tsaveSchedules(this.state.schedules).then(() => {\r\n\t\t\tthis.setState({ saving: false });\r\n\t\t});\r\n\t}\r\n\r\n\tonClickScheduleInput = (event, scheduleIndex, rowIndex, colIndex) => {\r\n\t\tlet selectedFields = cloneDeep(this.state.selectedFields);\r\n\r\n\t\tif(!this.isKeyDown(17) && !this.isKeyDown(16)) { // CTRL is not being held\r\n\t\t\tselectedFields = [];\r\n\t\t}\r\n\r\n\t\tif(this.isKeyDown(16)) { // SHIFT is being held down\r\n\t\t\tconst start = selectedFields[selectedFields.length - 1];\r\n\t\t\tconst end = [scheduleIndex, rowIndex, colIndex];\r\n\r\n\t\t\tfor(let i = Math.min(start[1], end[1]); i <= Math.max(start[1], end[1]); i++) {\r\n\t\t\t\tfor(let i2 = Math.min(start[2], end[2]); i2 <= Math.max(start[2], end[2]); i2++) {\r\n\t\t\t\t\tselectedFields.push([scheduleIndex, i, i2]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tselectedFields.push([scheduleIndex, rowIndex, colIndex]);\r\n\r\n\t\tthis.setState({\r\n\t\t\tselectedFields: selectedFields,\r\n\t\t});\r\n\t}\r\n\r\n\tonChangeScheduleInput = (event, scheduleIndex, colIndex) => {\r\n\t\tlet newSchedules = cloneDeep(this.state.schedules);\r\n\t\tnewSchedules[scheduleIndex].days[colIndex] = event.target.value;\r\n\r\n\t\tthis.setState({\r\n\t\t\tschedules: newSchedules,\r\n\t\t});\r\n\t}\r\n\r\n\tformatTable = (callback = () => null) => {\r\n\t\tconst newSchedules = cloneDeep(this.state.schedules);\r\n\t\tconst promise = this.props.employees.map((employee) => {\r\n\r\n\t\t\tlet scheduleIndex = newSchedules.findIndex((schedule) => {\r\n\t\t\t\treturn schedule.employee_id === employee.id;\r\n\t\t\t});\r\n\r\n\t\t\tif(scheduleIndex === -1) {\r\n\t\t\t\t// Employee has no previous schedule entries, so let's create a new object for him\r\n\t\t\t\tconst newDays = new Array(31).fill(\"\", 0, 31);\r\n\t\r\n\t\t\t\tnewSchedules.push({\r\n\t\t\t\t\temployee_id: employee.id,\r\n\t\t\t\t\tmonth: this.currentMonth,\r\n\t\t\t\t\tdays: newDays\r\n\t\t\t\t});\r\n\r\n\t\t\t\tscheduleIndex = newSchedules.length - 1;\r\n\t\t\t}\r\n\r\n\t\t\treturn({\r\n\t\t\t\tid: employee.id,\r\n\t\t\t\tname: {\r\n\t\t\t\t\tid: employee.id,\r\n\t\t\t\t\tname: employee.name,\r\n\t\t\t\t\tsurname: employee.surname\r\n\t\t\t\t},\r\n\t\t\t\tposition: employee.position ? employee.position.toString() : \"\",\r\n\t\t\t\tcompany: employee.company ? employee.company.toString() : \"\",\r\n\t\t\t\tarchived: employee.archived,\r\n\t\t\t\tactive: employee.active,\r\n\t\t\t\tworking: employee.working,\r\n\t\t\t\tschedule: newSchedules[scheduleIndex],\r\n\t\t\t\tscheduleIndex,\r\n\t\t\t\tselectedFields: this.state.selectedFields,\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tPromise.all(promise).then((data) => {\r\n\t\t\tcallback(data);\r\n\r\n\t\t\tif(JSON.stringify(newSchedules) !== JSON.stringify(this.state.schedules)) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tschedules: newSchedules,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tnameFormatter = (cell, row) => {\r\n\t\treturn (\r\n\t\t\t<Button \r\n\t\t\t\tvariant=\"link\" \r\n\t\t\t\tonClick={() => this.props.showEmployeeWorkLog(cell.id)}\r\n\t\t\t\tstyle={{ color: \"#0000FF\", fontSize: \"12px\" }}\r\n\t\t\t\tclassName=\"m-0 p-0\"\r\n\t\t\t>\r\n\t\t\t\t{cell.surname + \" \" + cell.name}\r\n\t\t\t</Button>\r\n\t\t);\r\n\t};\r\n\r\n\tdayFormatter = (cell, row, rowIndex, extraData) => {\r\n\t\tconst props = {\r\n\t\t\tcell, \r\n\t\t\trow, \r\n\t\t\trowIndex, \r\n\t\t\textraData\r\n\t\t}\r\n\t\treturn <ScheduleCell \r\n\t\t\tonClickScheduleInput={this.onClickScheduleInput}\r\n\t\t\tonChangeScheduleInput={this.onChangeScheduleInput}\r\n\t\t\t{...props}\r\n\t\t/>\r\n\t};\r\n\r\n\tsizePerPageRenderer = ({\r\n\t\toptions,\r\n\t\tcurrSizePerPage,\r\n\t\tonSizePerPageChange\r\n\t}) => (\r\n\t\t<Dropdown className=\"d-inline pr-2\">\r\n\t\t\t<Dropdown.Toggle variant=\"primary\">\r\n\t\t\t\t{this.state.pageSize === 9999 ? \"Viss\" : this.state.pageSize}\r\n\t\t\t</Dropdown.Toggle>\r\n\r\n\t\t\t<Dropdown.Menu>\r\n\t\t\t\t{\r\n\t\t\t\t\toptions.map((option, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\t\tkey={index} \r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tthis.onClickPageSize(option);\r\n\t\t\t\t\t\t\t\t\tonSizePerPageChange(option.page);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{option.text}\r\n\t\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</Dropdown.Menu>\r\n\t\t</Dropdown>\r\n\t);\r\n\r\n\tonClickPageSize = (option) => {\r\n\t\tthis.setState({\r\n\t\t\tpageSize: option.page\r\n\t\t});\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ContainerBox header={\"Grafiks\"}>\r\n\t\t\t\t<Filters \r\n\t\t\t\t\tonDataFiltered={this.onDataFiltered}\r\n\t\t\t\t\tonFilterChange={this.onFilterChange}\r\n\t\t\t\t\tfilterData={filterData => this.filterData = filterData}\r\n\t\t\t\t/>\r\n\t\t\t\t<Row className=\"mt-3 text-center\">\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.dayColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Diena</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.nightColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Nakts</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.dayOffColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Brīvdiena</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.vacationColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Atvaļinājums</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.sickListColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Slimības lapa</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row className=\"mb-3 mt-3\">\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<Button  \r\n\t\t\t\t\t\t\tonClick={this.saveSchedules}\r\n\t\t\t\t\t\t\tclassName=\"float-right\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.saving \r\n\t\t\t\t\t\t\t\t? \"Saglabā...\"\r\n\t\t\t\t\t\t\t\t: \"Saglabāt\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<BootstrapTable \r\n\t\t\t\t\tbootstrap4={ true }\r\n\t\t\t\t\tkeyField=\"id\"\r\n\t\t\t\t\tdata={ this.state.tableData } \r\n\t\t\t\t\tcolumns={ this.columns } \r\n\t\t\t\t\tbordered={ true }\r\n\t\t\t\t\tcondensed={ true }\r\n\t\t\t\t\thover={ true }\r\n\t\t\t\t\tdefaultSorted={ this.defaultSorted }\r\n\t\t\t\t\tremote={ { filter: true } }\r\n\t\t\t\t\tonTableChange={ this.onTableChange }\r\n\t\t\t\t\tpagination={ this.pagination }\r\n\t\t\t\t/>\r\n\t\t\t</ContainerBox>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\temployees: state.employees.employees,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowRegisterEmployee: () => dispatch(showRegisterEmployee()),\r\n\t\tshowExportExcel: () => dispatch(showExportExcel()),\r\n\t\tshowCheckCard: () => dispatch(showCheckCard()),\r\n\t\tshowEmployeeWorkLog: (id) => dispatch(showEmployeeWorkLog(id))\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Employees);\r\n","import React from \"react\";\r\n\r\nclass Cell extends React.Component {\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tif(nextProps.day !== this.props.day) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonBlur = (e) => {\r\n\t\tif(e.target.innerHTML !== this.props.day) {\r\n\t\t\tconsole.log(\"e.target.value: \", e.target.value);\r\n\t\t\tconsole.log(\"this.props.day: \", this.props.day);\r\n\t\t\tthis.props.onChange(e, this.props.scheduleIndex, this.props.dayIndex);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tstyle={{ backgroundColor: \"#fafafa\" }}\r\n\t\t\t\tclassName=\"w-100 h-100\"\r\n\t\t\t\tcontentEditable\r\n\t\t\t\tsuppressContentEditableWarning\r\n\t\t\t\tonBlur={e => this.onBlur(e)}\r\n\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t__html: this.props.day\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Cell;\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport ReactTable from \"react-table\";\r\nimport Cookies from \"universal-cookie\";\r\n\r\nimport \"react-table/react-table.css\";\r\n\r\nimport { Row, Col, Button } from \"react-bootstrap\";\r\n\r\nimport ContainerBox from \"./ContainerBox\";\r\nimport Filters from \"./Filters\";\r\nimport Cell from \"./Cell\";\r\n\r\nimport {\r\n\tshowRegisterEmployee,\r\n\tshowExportExcel,\r\n\tshowCheckCard,\r\n\tshowEmployeeWorkLog,\r\n} from \"../actions/employeeActions\";\r\n\r\nimport { getSchedules, saveSchedules } from \"../utils/employeeUtils\";\r\n\r\nimport { daysInMonth } from \"../utils/commonUtils\";\r\n\r\nclass Employees extends React.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.currentMonth = new Date().getMonth();\r\n\r\n\t\tthis.transparentColor = \"RGBA(0, 0, 0, 0)\";\r\n\t\tthis.dayColor = \"yellow\";\r\n\t\tthis.nightColor = \"blue\";\r\n\t\tthis.dayOffColor = \"gray\";\r\n\t\tthis.vacationColor = \"green\";\r\n\t\tthis.sickListColor = \"cyan\";\r\n\r\n\t\tthis.keyDown = {};\r\n\r\n\t\tconst cookies = new Cookies();\r\n\t\tlet settings = cookies.get(\"settings\");\r\n\r\n\t\tif(!settings) {\r\n\t\t\tsettings = {\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t}\r\n\r\n\t\t\tcookies.set(\"settings\", settings);\r\n\t\t}\r\n\r\n\t\tthis.columns = [{\r\n\t\t\tHeader: \"Vārds\",\r\n\t\t\taccessor: \"name\"\r\n\t\t}];\r\n\r\n\t\tconst days = daysInMonth(new Date().getMonth(), new Date().getFullYear());\r\n\r\n\t\tfor(let i = 0; i < days; i++) {\r\n\t\t\tthis.columns.push({\r\n\t\t\t\tHeader: (i + 1).toString(),\r\n\t\t\t\tCell: this.scheduleCellRenderer,\r\n\t\t\t\twidth: 32,\r\n\t\t\t\tgetProps: (state, rowInfo, column) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\tpadding: 0,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\t// General\r\n\t\t\ttableData: [],\r\n\t\t\tpageSize: 10,\r\n\t\t\t...settings,\r\n\t\t\t// Scheduling specific\r\n\t\t\tsaving: false,\r\n\t\t\tschedules: [],\r\n\t\t\tselectedFields: [],\r\n\t\t\ttarget: null,\r\n\t\t\ttargetValue: null,\r\n\t\t\tcounter: 0,\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tgetSchedules(this.currentMonth).then((res) => {\r\n\t\t\tconst schedules = res.data.map((schedule) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...schedule,\r\n\t\t\t\t\tdays: JSON.parse(schedule.days)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tschedules: schedules,\r\n\t\t\t}, () => {\r\n\t\t\t\tconsole.log(\"fetched schedules from the server!\");\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\twindow.addEventListener(\"keydown\", (event) => {\r\n\t\tthis.keyDown[event.keyCode] = true;\r\n\t\t});\r\n\r\n\t\twindow.addEventListener(\"keyup\", (event) => {\r\n\t\t\tthis.keyDown[event.keyCode] = false;\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif(prevProps.employees !== this.props.employees) {\r\n\t\t\tthis.formatTableData();\r\n\t\t}\r\n\r\n\t\tif(prevState.pageSize !== this.state.pageSize) {\r\n\t\t\tthis.saveSettings();\r\n\t\t}\r\n\t}\r\n\r\n\tisKeyDown = (key) => {\r\n\t\treturn this.keyDown[key];\r\n\t}\r\n\r\n\tsaveSettings = () => {\r\n\t\tconst cookies = new Cookies();\r\n\t\tconst settings = {\r\n\t\t\t...cookies.get(\"settings\"),\r\n\t\t\tpageSize: this.state.pageSize,\r\n\t\t}\r\n\r\n\t\tcookies.set(\"settings\", settings);\r\n\t}\r\n\r\n\tsaveSchedules = () => {\r\n\t\tconsole.log(\"saving..\");\r\n\t\tthis.setState({ saving: true });\r\n\t\tsaveSchedules(this.state.schedules).then(() => {\r\n\t\t\tthis.setState({ saving: false });\r\n\t\t});\r\n\t}\r\n\r\n\tformatTableData = () => {\r\n\t\tconsole.log(\"formatting table\");\r\n\t\tlet newSchedules = [...this.state.schedules];\r\n\r\n\t\tconst tableData = this.props.employees.map((employee) => {\r\n\t\t\tlet scheduleIndex = newSchedules.findIndex((schedule) => {\r\n\t\t\t\treturn schedule.employee_id === employee.id;\r\n\t\t\t});\r\n\r\n\t\t\tif(scheduleIndex === -1) {\r\n\t\t\t\tconst newDays = new Array(31).fill(\"\", 0, 31);\r\n\r\n\t\t\t\tnewSchedules.push({\r\n\t\t\t\t\temployee_id: employee.id,\r\n\t\t\t\t\tmonth: this.currentMonth,\r\n\t\t\t\t\tdays: newDays\r\n\t\t\t\t});\r\n\r\n\t\t\t\tscheduleIndex = newSchedules.length - 1; \r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tid: employee.id,\r\n\t\t\t\tname: employee.surname + \" \" + employee.name,\r\n\t\t\t\tscheduleIndex: scheduleIndex,\r\n\t\t\t\tdays: newSchedules[scheduleIndex].days,\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tPromise.all(tableData).then((data) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\ttableData: data,\r\n\t\t\t\tschedules: newSchedules,\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tonCellChange = (e, scheduleIndex, dayIndex) => {\r\n\t\tthis.performanceStart = new Date();\r\n\t\tconst then = Date.now()\r\n\t\tconsole.log(then)\r\n\t\tlet newSchedules = [...this.state.schedules];\r\n\t\tconsole.log(Date.now())\r\n\t\tnewSchedules[scheduleIndex].days[dayIndex] = e.target.innerHTML;\r\n\t\tconsole.log(e);\r\n\r\n\t\tthis.setState(() => {\r\n\t\t\treturn {\r\n\t\t\t\tschedules: newSchedules\r\n\t\t\t}\r\n\t\t}, () => {\r\n\t\t\tconsole.log(\"onCellChange took \", new Date() - this.performanceStart);\r\n\t\t});\r\n\t}\r\n\r\n\tscheduleCellRenderer = (props) => {\r\n\t\tconst dayIndex = parseInt(props.column.Header) - 1;\r\n\t\tconst scheduleIndex = props.original.scheduleIndex;\r\n\r\n\t\treturn <Cell \r\n\t\t\tkey={[props.original.name, dayIndex]} \r\n\t\t\tdayIndex={parseInt(props.column.Header) - 1} \r\n\t\t\tscheduleIndex={props.original.scheduleIndex}\r\n\t\t\tday={this.state.schedules[scheduleIndex].days[dayIndex]}\r\n\t\t\tonChange={this.onCellChange}\r\n\t\t/>\r\n\t}\r\n\r\n\tnewScheduleCellRenderer = (props) => {\r\n\t\tconst dayIndex = parseInt(props.column.Header) - 1;\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tkey={[props.original.scheduleIndex, dayIndex]}\r\n\t\t\t\tstyle={{ lineHeight: \"32px\", fontSize: \"18px\" }}\r\n\t\t\t\tclassName=\"w-100 h-100 text-center\"\r\n\t\t\t\tcontentEditable\r\n\t\t\t\tsuppressContentEditableWarning\r\n\t\t\t\tonBlur={e => {\r\n\t\t\t\t\tif(this.state.schedules[props.original.scheduleIndex].days[dayIndex] !== e.target.innerHTML) {\r\n\t\t\t\t\t\tlet schedules = [...this.state.schedules];\r\n\t\t\t\t\t\tschedules[props.original.scheduleIndex].days[dayIndex] = e.target.innerHTML;\r\n\t\t\t\t\t\tthis.setState({ schedules });\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t__html: this.state.schedules[props.original.scheduleIndex].days[dayIndex]\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ContainerBox header={\"Grafiks\"}>\r\n\t\t\t\t<Filters \r\n\t\t\t\t\tonDataFiltered={this.onDataFiltered}\r\n\t\t\t\t\tonFilterChange={this.onFilterChange}\r\n\t\t\t\t\tfilterData={filterData => this.filterData = filterData}\r\n\t\t\t\t/>\r\n\t\t\t\t<Row className=\"mb-3\">\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<Button  \r\n\t\t\t\t\t\t\tonClick={this.saveSchedules}\r\n\t\t\t\t\t\t\tclassName=\"float-right\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.saving \r\n\t\t\t\t\t\t\t\t? \"Saglabā...\"\r\n\t\t\t\t\t\t\t\t: \"Saglabāt\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row className=\"mb-3 text-center\" style={{ fontSize: \"14px\" }}>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.dayColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Diena</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.nightColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Nakts</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.dayOffColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Brīvdiena</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.vacationColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Atvaļinājums</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.sickListColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Slimības lapa</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<ReactTable\r\n\t\t\t\t\tdata={ this.state.tableData } \r\n\t\t\t\t\tcolumns={ this.columns } \r\n\t\t\t\t\tshowPagination={true}\r\n\t\t\t\t\tshowPaginationTop={true}\r\n\t\t\t\t\tgetTrProps={(state, rowInfo, instance) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\theight: \"32px\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tfontSize: \"12px\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</ContainerBox>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\temployees: state.employees.employees,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowRegisterEmployee: () => dispatch(showRegisterEmployee()),\r\n\t\tshowExportExcel: () => dispatch(showExportExcel()),\r\n\t\tshowCheckCard: () => dispatch(showCheckCard()),\r\n\t\tshowEmployeeWorkLog: (id) => dispatch(showEmployeeWorkLog(id)),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Employees);\r\n","import React from \"react\";\r\n\r\nclass Cell extends React.PureComponent {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n\trender() {\r\n\t\treturn (\r\n            <td>\r\n                {this.props.data}\r\n            </td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Cell;\r\n","import React from \"react\";\r\n\r\nimport Cell from \"./Cell\";\r\n\r\nclass Row extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if(JSON.stringify(nextProps.data) !== JSON.stringify(this.props.data)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    splitData = () => {\r\n        const data = this.props.columns.map((column, index) => {\r\n            if(column.cellRenderer !== undefined) {\r\n                const props = {\r\n                    original: this.props.data,\r\n                    value: this.props.data[column.accessor],\r\n                    rowId: this.props.rowId,\r\n                    colId: index,\r\n                }\r\n                return <td key={[this.props.data.id, index]}>{column.cellRenderer(props)}</td>\r\n            } else {\r\n                return <Cell \r\n                    key={[this.props.data.id, index]} \r\n                    data={this.props.data[column.accessor]}\r\n                />\r\n            }\r\n        });\r\n\r\n        return data;\r\n    }\r\n\r\n\trender() {\r\n        console.log(\"row re-rendered\");\r\n\t\treturn (\r\n            <tr key={this.props.data.id}>\r\n                {this.splitData()}\r\n            </tr>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Row;\r\n","import React from \"react\";\r\n\r\nimport Row from \"./Row\";\r\n\r\nimport \"../../styles/table/index.css\";\r\n\r\nclass Table extends React.PureComponent {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    renderColumns = () => {\r\n        return (\r\n            <tr>\r\n                {\r\n                    this.props.columns.map((column, index) => {\r\n                        return (<th key={index}>{column.header}</th>)\r\n                    })\r\n                }\r\n            </tr>\r\n        );\r\n    }\r\n\r\n    renderRows = () => {\r\n        const rows = this.props.data.map((row, index) => {\r\n            return (\r\n                <Row \r\n                    key={row.id} \r\n                    data={row}\r\n                    columns={this.props.columns}\r\n                    rowId={index}\r\n                />\r\n            );\r\n        });\r\n        return rows;\r\n    }\r\n\r\n\trender() {\r\n        console.log(\" ----------- TABLE RE-RENDER ----------- \");\r\n\t\treturn (\r\n\t\t\t<table>\r\n                <thead>\r\n                    {this.renderColumns()}\r\n                </thead>\r\n                <tbody>\r\n                    {this.renderRows()}\r\n                </tbody>\r\n            </table>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Table;\r\n","import React from \"react\";\r\n\r\nclass InputCell extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n            if(JSON.stringify(nextProps.value[nextProps.colId]) !== JSON.stringify(this.props.value[this.props.colId])) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n\trender() {\r\n        console.log(\"cell re-rendered\");\r\n\t\treturn (\r\n            <input\r\n                key={[this.props.original.scheduleIndex, this.props.colId]}\r\n\t\t\t\tvalue={this.props.value[this.props.colId]}\r\n                onChange={this.props.onChange}\r\n                style={{ maxWidth: \"32px\", width: \"100%\" }}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default InputCell;\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport ReactTable from \"react-table\";\r\nimport Cookies from \"universal-cookie\";\r\nimport cloneDeep from 'lodash/cloneDeep';\r\n\r\nimport \"react-table/react-table.css\";\r\n\r\nimport { Row, Col, Button } from \"react-bootstrap\";\r\n\r\nimport ContainerBox from \"./ContainerBox\";\r\nimport Filters from \"./Filters\";\r\nimport Cell from \"./Cell\";\r\n\r\nimport {\r\n\tshowRegisterEmployee,\r\n\tshowExportExcel,\r\n\tshowCheckCard,\r\n\tshowEmployeeWorkLog,\r\n} from \"../actions/employeeActions\";\r\n\r\nimport { getSchedules, saveSchedules } from \"../utils/employeeUtils\";\r\n\r\nimport { daysInMonth } from \"../utils/commonUtils\";\r\nimport Table from \"./table/Table\";\r\nimport InputCell from \"./table/InputCell\";\r\n\r\nclass CustomSchedule extends React.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tconst cookies = new Cookies();\r\n\t\tlet settings = cookies.get(\"settings\");\r\n\r\n\t\tif(!settings) {\r\n\t\t\tsettings = {\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t}\r\n\r\n\t\t\tcookies.set(\"settings\", settings);\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\t// General\r\n\t\t\ttableData: [],\r\n\t\t\tpageSize: 10,\r\n\t\t\t...settings,\r\n\t\t\t// Scheduling specific\r\n\t\t\tsaving: false,\r\n\t\t\tschedules: [],\r\n\t\t}\r\n\r\n\t\tthis.currentMonth = new Date().getMonth();\r\n\t\tthis.columns = [{\r\n\t\t\theader: \"Vārds\",\r\n\t\t\taccessor: \"name\",\r\n\t\t}];\r\n\r\n\t\tfor(let i = 0; i < daysInMonth(new Date().getMonth(), new Date().getFullYear()); i++) {\r\n\t\t\tthis.columns.push({\r\n\t\t\t\theader: (i + 1).toString(),\r\n\t\t\t\taccessor: \"days\",\r\n\t\t\t\tcellRenderer: (props) => this.cellRenderer(props)\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcellRenderer = (props) => {\r\n\t\tconst onChange = (e) => {\r\n\t\t\tconst newSchedules = cloneDeep(this.state.schedules);\r\n\t\t\tnewSchedules[props.original.scheduleIndex].days[props.colId] = e.target.value;\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tschedules: newSchedules,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn <InputCell {...props} onChange={onChange}/>;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tgetSchedules(this.currentMonth).then((res) => {\r\n\t\t\tconst schedules = res.data.map((schedule) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...schedule,\r\n\t\t\t\t\tdays: JSON.parse(schedule.days)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tschedules: schedules,\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif(JSON.stringify(prevProps.employees) !== JSON.stringify(this.props.employees) ||\r\n\t\t\tJSON.stringify(prevState.schedules) !== JSON.stringify(this.state.schedules)) {\r\n\t\t\tthis.formatTableData();\r\n\t\t}\r\n\r\n\t\tif(prevState.pageSize !== this.state.pageSize) {\r\n\t\t\tthis.saveSettings();\r\n\t\t}\r\n\t}\r\n\r\n\tisKeyDown = (key) => {\r\n\t\treturn this.keyDown[key];\r\n\t}\r\n\r\n\tsaveSettings = () => {\r\n\t\tconst cookies = new Cookies();\r\n\t\tconst settings = {\r\n\t\t\t...cookies.get(\"settings\"),\r\n\t\t\tpageSize: this.state.pageSize,\r\n\t\t}\r\n\r\n\t\tcookies.set(\"settings\", settings);\r\n\t}\r\n\r\n\tsaveSchedules = () => {\r\n\t\tconsole.log(\"saving..\");\r\n\t\tthis.setState({ saving: true });\r\n\t\tsaveSchedules(this.state.schedules).then(() => {\r\n\t\t\tthis.setState({ saving: false });\r\n\t\t});\r\n\t}\r\n\r\n\tformatTableData = () => {\r\n\t\tconsole.log(\"formatting table\");\r\n\t\tlet newSchedules = [...this.state.schedules];\r\n\r\n\t\tconst tableData = this.props.employees.map((employee) => {\r\n\t\t\tlet scheduleIndex = this.state.schedules.findIndex((schedule) => {\r\n\t\t\t\treturn schedule.employee_id === employee.id;\r\n\t\t\t});\r\n\r\n\t\t\tif(scheduleIndex === -1) {\r\n\t\t\t\tconst newDays = new Array(31).fill(\"\", 0, 31);\r\n\r\n\t\t\t\tnewSchedules.push({\r\n\t\t\t\t\temployee_id: employee.id,\r\n\t\t\t\t\tmonth: this.currentMonth,\r\n\t\t\t\t\tdays: newDays\r\n\t\t\t\t});\r\n\r\n\t\t\t\tscheduleIndex = newSchedules.length - 1; \r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tid: employee.id,\r\n\t\t\t\tname: employee.surname + \" \" + employee.name,\r\n\t\t\t\tdays: newSchedules[scheduleIndex].days,\r\n\t\t\t\tscheduleIndex,\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tPromise.all(tableData).then((data) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\ttableData: data,\r\n\t\t\t\tschedules: newSchedules,\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ContainerBox header={\"Grafiks\"}>\r\n\t\t\t\t<Filters \r\n\t\t\t\t\tonDataFiltered={this.onDataFiltered}\r\n\t\t\t\t\tonFilterChange={this.onFilterChange}\r\n\t\t\t\t\tfilterData={filterData => this.filterData = filterData}\r\n\t\t\t\t/>\r\n\t\t\t\t<Row className=\"mb-3\">\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<Button  \r\n\t\t\t\t\t\t\tonClick={this.saveSchedules}\r\n\t\t\t\t\t\t\tclassName=\"float-right\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.saving \r\n\t\t\t\t\t\t\t\t? \"Saglabā...\"\r\n\t\t\t\t\t\t\t\t: \"Saglabāt\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row className=\"mb-3 text-center\" style={{ fontSize: \"14px\" }}>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.dayColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Diena</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.nightColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Nakts</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.dayOffColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Brīvdiena</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.vacationColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Atvaļinājums</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-bottom\" style={{ backgroundColor: this.sickListColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">Slimības lapa</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcolumns={this.columns}\r\n\t\t\t\t\tdata={this.state.tableData}\r\n\t\t\t\t/>\r\n\t\t\t</ContainerBox>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\temployees: state.employees.employees,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowRegisterEmployee: () => dispatch(showRegisterEmployee()),\r\n\t\tshowExportExcel: () => dispatch(showExportExcel()),\r\n\t\tshowCheckCard: () => dispatch(showCheckCard()),\r\n\t\tshowEmployeeWorkLog: (id) => dispatch(showEmployeeWorkLog(id)),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(CustomSchedule);\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport { Route, BrowserRouter as Router, Switch } from \"react-router-dom\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport { Container, Row, Col, Navbar, Nav, Spinner } from \"react-bootstrap\";\r\n\r\nimport { production, employeeUpdateInterval } from \"../utils/config\";\r\n\r\nimport Employees from \"./Employees\";\r\nimport Report from \"./Report\";\r\nimport RegisterEmployee from \"./RegisterEmployee\";\r\nimport NotFound from \"./NotFound\";\r\nimport ViewEmployee from \"./ViewEmployee\";\r\nimport DeleteEmployee from \"./DeleteEmployee\";\r\nimport EditEmployee from \"./EditEmployee\";\r\nimport ExportExcel from \"./ExportExcel\";\r\nimport LogIn from \"./LogIn\";\r\nimport CheckCard from \"./CheckCard\";\r\nimport CommentEmployee from \"./CommentEmployee\";\r\nimport Schedule from \"./Schedule\";\r\nimport ScheduleNew from \"./ScheduleNew\";\r\nimport CustomSchedule from \"./CustomSchedule\"\r\nimport Table from \"./table/Table\";\r\n\r\nimport { checkSession, logOut, getUserByKey } from \"../utils/userUtils\";\r\nimport { pingServer } from \"../utils/commonUtils\";\r\nimport { storeUpdateEmployees, cardScanned } from \"../utils/employeeUtils\";\r\n\r\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\r\nimport \"../styles/table.css\";\r\n\r\nimport logo from \"../images/logo.png\";\r\nimport { FiLogOut } from \"react-icons/fi\";\r\n\r\nclass App extends React.PureComponent {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.state = {\r\n\t\t\tpingInterval: null,\r\n\t\t\tserverConnectionEstablished: false,\r\n\t\t\tscannerConnectionEstablished: false,\r\n\t\t\tloading: true,\r\n\t\t\tauthenticated: false,\r\n\t\t\tuser: {\r\n\t\t\t\tusername: \"\"\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twindow.scanCard = cardScanned;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// Check user session before displaying anything\r\n\t\tthis.establishConnection();\r\n\t\tthis.setState({ \r\n\t\t\tpingInterval: setInterval(() => {\r\n\t\t\t\tthis.establishConnection();\r\n\t\t\t}, 1000)\r\n\t\t});\r\n\t}\r\n\r\n\testablishConnection = () => {\r\n\t\tpingServer().then((res) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tserverConnectionEstablished: res.data.server,\r\n\t\t\t\tscannerConnectionEstablished: res.data.scanner,\r\n\t\t\t}, () => {\r\n\t\t\t\tcheckSession().then((res) => {\r\n\t\t\t\t\tif(!production\r\n\t\t\t\t\t\t|| (this.state.serverConnectionEstablished === true\r\n\t\t\t\t\t\t&& this.state.scannerConnectionEstablished === true)) {\r\n\t\t\t\t\t\tclearInterval(this.state.pingInterval);\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tloading: false,\r\n\t\t\t\t\t\t\tauthenticated: res.data,\r\n\t\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\t\tif(this.state.authenticated) {\r\n\t\t\t\t\t\t\t\tthis.onAuthentification();\r\n\t\t\t\t\t\t\t\tgetUserByKey().then((res) => {\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\tuser: res.data,\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\tonAuthentification = () => {\r\n\t\tstoreUpdateEmployees();\r\n\t\tsetInterval(() => {\r\n\t\t\tstoreUpdateEmployees();\r\n\t\t}, employeeUpdateInterval);\r\n\t}\r\n\r\n\tlogOut = () => {\r\n\t\tlogOut();\r\n\t\twindow.location.reload();\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(this.state.loading) {\r\n\t\t\t// Loading screen\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t<Spinner animation=\"border\"/>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.serverConnectionEstablished\r\n\t\t\t\t\t\t? \tthis.state.scannerConnectionEstablished\r\n\t\t\t\t\t\t\t? null\r\n\t\t\t\t\t\t\t: <div>Veido savienojumu ar NFC skeneri...</div>\r\n\t\t\t\t\t\t: <div>Veido savienojumu ar serveri...</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tif(this.state.authenticated) {\r\n\t\t\t\t// User interface\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Router>\r\n\t\t\t\t\t\t<Container fluid={true}>\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t<Navbar bg=\"dark\" variant=\"dark\" fixed=\"top\" expand=\"md\">\r\n\t\t\t\t\t\t\t\t\t\t<Navbar.Brand>\r\n\t\t\t\t\t\t\t\t\t\t\t<img \r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={logo}\r\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth=\"30\"\r\n\t\t\t\t\t\t\t\t\t\t\t\theight=\"30\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"d-inline-block align-top\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t{\" VĀRPAS 1\"}\r\n\t\t\t\t\t\t\t\t\t\t</Navbar.Brand>\r\n\t\t\t\t\t\t\t\t\t\t<Navbar.Toggle aria-controls=\"responsive-navbar-nav\"/>\r\n\t\t\t\t\t\t\t\t\t\t<Navbar.Collapse id=\"responsive-navbar-nav\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Nav className=\"mr-auto\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LinkContainer exact={true} to=\"/\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Nav.Link>Darbinieki</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LinkContainer exact={true} to=\"/report\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Nav.Link>Atskaites</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LinkContainer exact={true} to=\"/schedule\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Nav.Link>Grafiks</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LinkContainer exact={true} to=\"/schedule_new\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Nav.Link>Grafiks 2</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LinkContainer exact={true} to=\"/schedule_nils\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Nav.Link>Grafiks Nils</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t\t\t\t\t\t<Nav>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Navbar.Text className=\"ml-md-4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<u>{this.state.user.username}</u>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Navbar.Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Nav.Link className=\"ml-md-2\" onClick={this.logOut}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tIziet\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FiLogOut className=\"ml-1\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t\t\t\t\t</Navbar.Collapse>\r\n\t\t\t\t\t\t\t\t\t</Navbar>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/\" component={Employees} />\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/report\" component={Report} />\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/schedule\" component={Schedule} />\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/schedule_new\" component={ScheduleNew} />\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/schedule_nils\" component={CustomSchedule} />\r\n\t\t\t\t\t\t\t\t\t\t<Route component={NotFound} />\r\n\t\t\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t\t\t\t<ViewEmployee/>\r\n\t\t\t\t\t\t\t\t\t<RegisterEmployee/>\r\n\t\t\t\t\t\t\t\t\t<DeleteEmployee/>\r\n\t\t\t\t\t\t\t\t\t<EditEmployee/>\r\n\t\t\t\t\t\t\t\t\t<ExportExcel/>\r\n\t\t\t\t\t\t\t\t\t<CheckCard/>\r\n\t\t\t\t\t\t\t\t\t<CommentEmployee/>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col className=\"footer\">\r\n\t\t\t\t\t\t\t\t\tVārpas 1 © 2019\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Router>\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\t// User Log In\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<LogIn/>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === \"localhost\" ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === \"[::1]\" ||\r\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(\r\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n\t\t)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won\"t work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"load\", () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let\"s check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\"This web app is being served cache-first by a service \" +\r\n\t\t\t\t\t\t\t\"worker. To learn more, visit http://bit.ly/CRA-PWA\"\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then(registration => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t\"New content is available and will be used when all \" +\r\n\t\t\t\t\t\t\t\t\t\"tabs for this page are closed. See http://bit.ly/CRA-PWA.\"\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It\"s the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can\"t reload the page.\r\n\tfetch(swUrl)\r\n\t\t.then(response => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get(\"content-type\");\r\n\t\t\tif (\r\n\t\t\t\tresponse.status === 404 ||\r\n\t\t\t\t(contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n\t\t\t) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"No internet connection found. App is running in offline mode.\"\r\n\t\t\t);\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif (\"serviceWorker\" in navigator) {\r\n\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\tregistration.unregister();\r\n\t\t});\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./styles/index.css\";\r\nimport App from \"./components/App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nimport store from \"./store/store\";\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\ndocument.getElementById(\"root\"));\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}