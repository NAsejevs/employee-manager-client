{"version":3,"sources":["utils/config.js","components/ContainerBox.js","actions/employeeActions.js","actions/actionTypes.js","store/initialState.js","reducers/index.js","reducers/employeeReducer.js","store/store.js","utils/logTypes.js","utils/employeeUtils.js","components/Commands.js","components/BoostrapDatePicker.js","utils/userUtils.js","components/Filters.js","utils/commonUtils.js","components/Employees.js","components/Report.js","components/RegisterEmployee.js","components/NotFound.js","components/ViewEmployee.js","components/DeleteEmployee.js","components/EditEmployee.js","components/ExportExcel.js","components/LogIn.js","components/CheckCard.js","components/CommentEmployee.js","components/ScheduleCell.js","components/Schedule.js","components/History.js","components/Notifications.js","components/App.js","serviceWorker.js","index.js","images/logo.png"],"names":["production","process","serverURL","employeeUpdateInterval","workLogUpdateInterval","request","axios","create","baseURL","withCredentials","ContainerBox","props","react_default","a","createElement","className","header","children","updateUser","user","type","payload","showEmployeeWorkLog","employee","hideEmployeeWorkLog","showDeleteEmployee","hideDeleteEmployee","showEditEmployee","hideEditEmployee","showRegisterEmployee","hideRegisterEmployee","showExportExcel","hideExportExcel","showCheckCard","hideCheckCard","showCommentEmployee","hideCommentEmployee","updateNotifications","data","showNotifications","hideNotifications","showHistory","hideHistory","initialState","employees","employeeWorkLog","show","id","deleteEmployee","editEmployee","registerEmployee","exportExcel","checkCard","commentEmployee","notifications","history","rootReducer","combineReducers","state","arguments","length","undefined","action","Object","objectSpread","toConsumableArray","map","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","LOG_SET_WORKING","LOG_SET_NOT_WORKING","LOG_EDIT_EMPLOYEE","LOG_ADD_EMPLOYEE","storeUpdateEmployees","getServerEmployees","then","res","dispatch","storeUpdateEmployee","getServerEmployee","post","getNotifications","addNotification","getSchedules","month","saveSchedules","schedules","getServerEmployeeWorkLog","order","deleteServerWorkLog","working","employeeId","editServerWorkLog","startDate","endDate","getState","username","addServerEmployee","deleteServerEmployee","exportServerEmployees","settings","get","responseType","cardScanned","uid","admin","getEmployeeByUID","setEmployeeUID","removeEmployeeUID","awaitCard","CommandButton","forwardRef","ref","Button","variant","onClick","index_esm","connect","Row","Col","xs","Dropdown","Toggle","as","Menu","flip","alignRight","Item","eventKey","archived","height","width","active","OverlayTrigger","placement","overlay","Tooltip","LOG_TYPE","BoostrapDatePicker","react_datepicker_min_default","assign","customInput","Form","Control","locale","en","initialSettings","showFilters","showArchive","showInactive","showWorking","showNotWorking","nameFilter","positionFilter","companyFilter","pageSize","checkSession","authenticate","password","rememberMe","logOut","getUserByKey","Filters","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","saveSettings","cookies","Cookies","set","onFilterChange","filterData","tableData","applyNameFilter","applyPositionFilter","applyCompanyFilter","applyCheckboxFilters","checkboxFilter","onDataFiltered","filter","row","name","surname","toString","toLowerCase","indexOf","company","position","onToggleFilters","setState","onToggleArchive","onToggleInactive","onToggleShowWorking","onToggleShowNotWorking","onChangeNameFilter","e","target","value","onChangePositionFilter","onChangeCompanyFilter","onChangeDateStart","date","startOfDay","Date","setHours","onChangeDateEnd","endOfDay","onClickFilter","index","yesterday","setDate","getDate","last7Days","last30Days","dropdown","currentFilter","filters","clearAllFilters","prevProps","prevState","_this2","dateFilter","Fragment","Group","Label","column","components_BoostrapDatePicker","dateFormat","selected","onChange","maxDate","minDate","DropdownButton","title","key","Collapse","in","Check","label","checked","placeholder","Text","React","PureComponent","pingServer","addZero","i","millisecondConverter","ms","seconds","Math","floor","minutes","hours","formatDate","dateObj","formatted","getMonth","getFullYear","getHours","getMinutes","daysInMonth","year","isWeekend","day","getDay","convertSpecialCharacters","string","special","normal","output","letter","toUpperCase","charAt","Employees","onTableChange","formatTable","callback","workLogFrom","workLogTo","promise","workLogToday","workLog","forEach","start_time","getTime","push","comments","today","workLogs","commands","Promise","all","workLogUserId","showWorkLogModal","companyFormatter","cell","style","maxWidth","columns","dataField","text","sort","classes","headerClasses","sortFunc","b","formatter","commentBorderStyle","borderBottom","comment","size","commentId","Badge","fontSize","color","trigger","rootClose","Popover","aData","end_time","bData","badges","totalWorkTime","totalWorkTimeConverted","workTime","workTimeConverted","workTimeStartFormatted","workTimeEndFormatted","workTimeFormatted","totalWorkTimeFormatted","borderTop","components_Commands","pagination","paginationFactory","page","alwaysShowAllBtns","showTotal","sizePerPage","sizePerPageRenderer","_ref","options","onSizePerPageChange","currSizePerPage","option","onClickPageSize","sizePerPageList","components_ContainerBox","components_Filters","react_bootstrap_table_next_lib_default","bootstrap4","keyField","bordered","hover","defaultSorted","remote","rowStyle","backgroundColor","Component","startDateFormatted","endDateFormatted","displayOneDay","REGISTER_STATE","DATA_INPUT","RFID_WAIT","COMPLETE","RegisterEmployee","onNameChange","event","onSurnameChange","onCompanyChange","onPositionChange","onNumberChange","number","onPersonalCodeChange","personalCode","onAddCardChange","addCard","onFormSubmit","preventDefault","stopPropagation","registrationState","hideRegisterEmployeeAndDelete","newEmployee","onExited","checkInterval","Modal","onHide","onExit","deleteAndCancel","onSubmit","Header","closeButton","Title","Body","required","disabled","controlId","Alert","onClose","Footer","Buttons","NotFound","ViewEmployee","fetchWorkLog","clearInterval","updateInterval","setInterval","editWorkLog","handleDateChangeStart","handleDateChangeEnd","deleteWorkLog","confirmEditWorkLog","cancelEditWorkLog","onStartDateChange","onEndDateChange","results","filterResults","lastStartDate","totalDayWorkTime","totalDays","workLogFiltered","log","startTimePure","stillWorking","endTimePure","startTimeFormatted","endTimeFormatted","employee_id","workRow","timeIntervals","showTimeSelect","timeFormat","dateRow","totalDayRow","totalRow","dateFormatted","nextStartDate","totalDayWorkTimeConverted","totalDayWorkTimeFormatted","fromDateFormatted","toDateFormatted","colSpan","Table","DeleteEmployee","CHANGE_CARD_STATE","OFF","DELETED","EditEmployee","onEnter","changeCard","status","uid_added","deleteCard","uidAddedDate","uidAdded","ExportExcel","handleDateChange","onToggleIncludeNoHours","includeNoHours","onToggleIncludeInactive","includeInactive","onToggleIncludeArchived","includeArchived","onEmployeeCheck","newList","employeeList","onCheckAll","checkAll","export","response","content","headers","download","showMonthYearPicker","DEBUG","LogIn","onUsernameChange","onPasswordChange","onRememberMeChange","logIn","location","reload","authenticationError","centered","src","logo","alt","CheckCard","res2","hideModal","notFound","onEntered","CommentEmployee","onCommentChange","onExpiryDateChange","expires","onManualDeleteChange","manualDelete","rows","ScheduleCell","transparentColor","dayColor","nightColor","dayOffColor","vacationColor","sickListColor","lateColor","nextProps","nextState","selectedFields","find","selectedField","rowIndex","extraData","colIndex","JSON","stringify","schedule","days","_this3","outline","onClickScheduleInput","scheduleIndex","onFocus","onFocusScheduleInput","onChangeScheduleInput","fetchSchedules","scheduleDate","newSchedules","Array","fill","parse","checkEmptySchedules","isKeyDown","keyDown","saving","onChangeScheduleDate","select","start","end","min","max","i2","replace","cellRefs","createEmptySchedule","newDays","nameFormatter","dayFormatter","components_ScheduleCell","_ref2","weekendColor","hidden","formatExtraData","headerStyle","addEventListener","keyCode","condensed","History","notification","notificationData","logTypeTranslated","displayHistory","onChangeNotificationDate","notificationDate","Notifications","displayNotifications","App","establishConnection","serverConnectionEstablished","server","scannerConnectionEstablished","scanner","pingInterval","loading","authenticated","onAuthentification","scanCard","Spinner","animation","BrowserRouter","Container","fluid","Navbar","bg","fixed","expand","Brand","aria-controls","Nav","lib","exact","to","Link","right","top","textAlign","lineHeight","borderRadius","includes","Switch","Route","path","component","Report","Schedule","components_ViewEmployee","components_RegisterEmployee","components_DeleteEmployee","components_EditEmployee","components_ExportExcel","components_CheckCard","components_CommentEmployee","components_History","components_Notifications","components_LogIn","Boolean","hostname","match","ReactDOM","render","es","components_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.d9a9b562.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nexport const production = process.env.NODE_ENV === \"production\";\r\n\r\nexport const serverURL = production\r\n\t? \"http://192.168.1.150:8080\"\r\n\t: \"http://localhost:8080\";\r\nexport const employeeUpdateInterval = 10000;\r\nexport const workLogUpdateInterval = 10000;\r\n\r\nexport const request = axios.create({\r\n\tbaseURL: serverURL,\r\n\twithCredentials: true,\r\n});\r\n","import React from \"react\";\r\n\r\nconst ContainerBox = (props) => {\r\n\treturn (\r\n\t\t<div className=\"container-box\">\r\n\t\t\t<div className=\"container-box-header\">\r\n\t\t\t\t{props.header}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"container-box-body\">\r\n\t\t\t\t{props.children}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ContainerBox;\r\n","import { \r\n\tUPDATE_USER,\r\n\tUPDATE_EMPLOYEES,\r\n\tUPDATE_EMPLOYEE,\r\n\tSHOW_DELETE_EMPLOYEE, \r\n\tHIDE_DELETE_EMPLOYEE, \r\n\tSHOW_EDIT_EMPLOYEE, \r\n\tHIDE_EDIT_EMPLOYEE,\r\n\tSHOW_REGISTER_EMPLOYEE,\r\n\tHIDE_REGISTER_EMPLOYEE,\r\n\tSHOW_EXPORT_EXCEL,\r\n\tHIDE_EXPORT_EXCEL,\r\n\tSHOW_CHECK_CARD,\r\n\tHIDE_CHECK_CARD,\r\n\tSHOW_EMPLOYEE_WORK_LOG,\r\n\tHIDE_EMPLOYEE_WORK_LOG,\r\n\tSHOW_COMMENT_EMPLOYEE,\r\n\tHIDE_COMMENT_EMPLOYEE,\r\n\tUPDATE_NOTIFICATIONS,\r\n\tSHOW_NOTIFICATIONS,\r\n\tHIDE_NOTIFICATIONS,\r\n\tSHOW_HISTORY,\r\n\tHIDE_HISTORY,\r\n} from \"./actionTypes\";\r\n\r\n\r\nexport const updateUser = (user) => {\r\n\treturn {\r\n\t\ttype: UPDATE_USER,\r\n\t\tpayload: user,\r\n\t}\r\n}\r\n\r\nexport const updateEmployees = (employees) => {\r\n\treturn {\r\n\t\ttype: UPDATE_EMPLOYEES,\r\n\t\tpayload: employees,\r\n\t}\r\n}\r\n\r\nexport const updateEmployee = (employee) => {\r\n\treturn {\r\n\t\ttype: UPDATE_EMPLOYEE,\r\n\t\tpayload: employee,\r\n\t}\r\n}\r\n\r\nexport const showEmployeeWorkLog = (employee) => {\r\n\treturn {\r\n\t\ttype: SHOW_EMPLOYEE_WORK_LOG,\r\n\t\tpayload: employee,\r\n\t}\r\n}\r\n\r\nexport const hideEmployeeWorkLog = () => {\r\n\treturn {\r\n\t\ttype: HIDE_EMPLOYEE_WORK_LOG,\r\n\t}\r\n}\r\n\r\nexport const showDeleteEmployee = (employee) => {\r\n\treturn {\r\n\t\ttype: SHOW_DELETE_EMPLOYEE,\r\n\t\tpayload: employee,\r\n\t}\r\n}\r\n\r\nexport const hideDeleteEmployee = () => {\r\n\treturn {\r\n\t\ttype: HIDE_DELETE_EMPLOYEE,\r\n\t}\r\n}\r\n\r\nexport const showEditEmployee = (employee) => {\r\n\treturn {\r\n\t\ttype: SHOW_EDIT_EMPLOYEE,\r\n\t\tpayload: employee,\r\n\t}\r\n}\r\n\r\nexport const hideEditEmployee = () => {\r\n\treturn {\r\n\t\ttype: HIDE_EDIT_EMPLOYEE,\r\n\t}\r\n}\r\n\r\nexport const showRegisterEmployee = () => {\r\n\treturn {\r\n\t\ttype: SHOW_REGISTER_EMPLOYEE,\r\n\t}\r\n}\r\n\r\nexport const hideRegisterEmployee = () => {\r\n\treturn {\r\n\t\ttype: HIDE_REGISTER_EMPLOYEE,\r\n\t}\r\n}\r\n\r\nexport const showExportExcel = () => {\r\n\treturn {\r\n\t\ttype: SHOW_EXPORT_EXCEL,\r\n\t}\r\n}\r\n\r\nexport const hideExportExcel = () => {\r\n\treturn {\r\n\t\ttype: HIDE_EXPORT_EXCEL,\r\n\t}\r\n}\r\n\r\nexport const showCheckCard = () => {\r\n\treturn {\r\n\t\ttype: SHOW_CHECK_CARD,\r\n\t}\r\n}\r\n\r\nexport const hideCheckCard = () => {\r\n\treturn {\r\n\t\ttype: HIDE_CHECK_CARD,\r\n\t}\r\n}\r\n\r\nexport const showCommentEmployee = (employee) => {\r\n\treturn {\r\n\t\ttype: SHOW_COMMENT_EMPLOYEE,\r\n\t\tpayload: employee,\r\n\t}\r\n}\r\n\r\nexport const hideCommentEmployee = () => {\r\n\treturn {\r\n\t\ttype: HIDE_COMMENT_EMPLOYEE,\r\n\t}\r\n}\r\n\r\nexport const updateNotifications = (data) => {\r\n\treturn {\r\n\t\ttype: UPDATE_NOTIFICATIONS,\r\n\t\tpayload: data,\r\n\t}\r\n}\r\n\r\nexport const showNotifications = () => {\r\n\treturn {\r\n\t\ttype: SHOW_NOTIFICATIONS,\r\n\t}\r\n}\r\n\r\nexport const hideNotifications = () => {\r\n\treturn {\r\n\t\ttype: HIDE_NOTIFICATIONS,\r\n\t}\r\n}\r\n\r\nexport const showHistory = () => {\r\n\treturn {\r\n\t\ttype: SHOW_HISTORY,\r\n\t}\r\n}\r\n\r\nexport const hideHistory = () => {\r\n\treturn {\r\n\t\ttype: HIDE_HISTORY,\r\n\t}\r\n}\r\n\r\n","export const UPDATE_USER = \"UPDATE_USER\";\r\n\r\nexport const UPDATE_EMPLOYEES = \"UPDATE_EMPLOYEES\";\r\nexport const UPDATE_EMPLOYEE = \"UPDATE_EMPLOYEE\";\r\n\r\nexport const SHOW_EMPLOYEE_WORK_LOG = \"SHOW_EMPLOYEE_WORK_LOG\";\r\nexport const HIDE_EMPLOYEE_WORK_LOG = \"HIDE_EMPLOYEE_WORK_LOG\";\r\n\r\nexport const SHOW_DELETE_EMPLOYEE = \"SHOW_DELETE_EMPLOYEE\";\r\nexport const HIDE_DELETE_EMPLOYEE = \"HIDE_DELETE_EMPLOYEE\";\r\n\r\nexport const SHOW_EDIT_EMPLOYEE = \"SHOW_EDIT_EMPLOYEE\";\r\nexport const HIDE_EDIT_EMPLOYEE = \"HIDE_EDIT_EMPLOYEE\";\r\n\r\nexport const SHOW_REGISTER_EMPLOYEE = \"SHOW_REGISTER_EMPLOYEE\";\r\nexport const HIDE_REGISTER_EMPLOYEE = \"HIDE_REGISTER_EMPLOYEE\";\r\n\r\nexport const SHOW_EXPORT_EXCEL = \"SHOW_EXPORT_EXCEL\";\r\nexport const HIDE_EXPORT_EXCEL = \"HIDE_EXPORT_EXCEL\";\r\n\r\nexport const SHOW_CHECK_CARD = \"SHOW_CHECK_CARD\";\r\nexport const HIDE_CHECK_CARD = \"HIDE_CHECK_CARD\";\r\n\r\nexport const SHOW_COMMENT_EMPLOYEE = \"SHOW_COMMENT_EMPLOYEE\";\r\nexport const HIDE_COMMENT_EMPLOYEE = \"HIDE_COMMENT_EMPLOYEE\";\r\n\r\nexport const UPDATE_NOTIFICATIONS = \"UPDATE_NOTIFICATIONS\";\r\n\r\nexport const SHOW_NOTIFICATIONS = \"SHOW_NOTIFICATIONS\";\r\nexport const HIDE_NOTIFICATIONS = \"HIDE_NOTIFICATIONS\";\r\n\r\nexport const SHOW_HISTORY = \"SHOW_HISTORY\";\r\nexport const HIDE_HISTORY = \"HIDE_HISTORY\";\r\n","const initialState = {\r\n\tuser: null,\r\n\temployees: [],\r\n\temployeeWorkLog: {\r\n\t\tshow: false,\r\n\t\tid: null,\r\n\t},\r\n\tdeleteEmployee: {\r\n\t\tshow: false,\r\n\t\temployee: {},\r\n\t},\r\n\teditEmployee: {\r\n\t\tshow: false,\r\n\t\temployee: {},\r\n\t},\r\n\tregisterEmployee: {\r\n\t\tshow: false,\r\n\t},\r\n\texportExcel: {\r\n\t\tshow: false,\r\n\t},\r\n\tcheckCard: {\r\n\t\tshow: false,\r\n\t},\r\n\tcommentEmployee: {\r\n\t\tshow: false,\r\n\t\temployee: {},\r\n\t},\r\n\tnotifications: {\r\n\t\tshow: false,\r\n\t\tdata: [],\r\n\t},\r\n\thistory: {\r\n\t\tshow: false,\r\n\t},\r\n};\r\n\r\nexport default initialState;\r\n","import { combineReducers } from 'redux';\r\n\r\nimport { employees } from './employeeReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n\temployees: employees,\r\n});\r\n\r\nexport default rootReducer;","import initialState from \"../store/initialState\";\r\n\r\nimport {\r\n\tUPDATE_USER,\r\n\tUPDATE_EMPLOYEES,\r\n\tUPDATE_EMPLOYEE,\r\n\tSHOW_DELETE_EMPLOYEE, \r\n\tHIDE_DELETE_EMPLOYEE, \r\n\tSHOW_EDIT_EMPLOYEE, \r\n\tHIDE_EDIT_EMPLOYEE,\r\n\tSHOW_REGISTER_EMPLOYEE,\r\n\tHIDE_REGISTER_EMPLOYEE,\r\n\tSHOW_EXPORT_EXCEL,\r\n\tHIDE_EXPORT_EXCEL,\r\n\tSHOW_CHECK_CARD,\r\n\tHIDE_CHECK_CARD,\r\n\tSHOW_EMPLOYEE_WORK_LOG,\r\n\tHIDE_EMPLOYEE_WORK_LOG,\r\n\tSHOW_COMMENT_EMPLOYEE,\r\n\tHIDE_COMMENT_EMPLOYEE,\r\n\tUPDATE_NOTIFICATIONS,\r\n\tSHOW_NOTIFICATIONS,\r\n\tHIDE_NOTIFICATIONS,\r\n\tSHOW_HISTORY,\r\n\tHIDE_HISTORY,\r\n} from '../actions/actionTypes';\r\n\r\nexport const employees = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase UPDATE_USER:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: action.payload,\r\n\t\t\t}\r\n\t\tcase UPDATE_EMPLOYEES:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\temployees: [...action.payload],\r\n\t\t\t}\r\n\t\tcase UPDATE_EMPLOYEE: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\temployees: state.employees.map((employee) => {\r\n\t\t\t\t\treturn employee.id === action.payload.id\r\n\t\t\t\t\t? action.payload\r\n\t\t\t\t\t: employee\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase SHOW_EMPLOYEE_WORK_LOG:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\temployeeWorkLog: {\r\n\t\t\t\t\t...state.employeeWorkLog,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\tid: action.payload,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_EMPLOYEE_WORK_LOG:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\temployeeWorkLog: {\r\n\t\t\t\t\t...state.employeeWorkLog,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t\tid: null,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_DELETE_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tdeleteEmployee: {\r\n\t\t\t\t\t...state.deleteEmployee,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\temployee: action.payload,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_DELETE_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tdeleteEmployee: {\r\n\t\t\t\t\t...state.deleteEmployee,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t\temployee: {},\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_EDIT_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\teditEmployee: {\r\n\t\t\t\t\t...state.editEmployee,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\temployee: action.payload,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_EDIT_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\teditEmployee: {\r\n\t\t\t\t\t...state.editEmployee,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t\temployee: {},\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_REGISTER_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tregisterEmployee: {\r\n\t\t\t\t\t...state.registerEmployee,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_REGISTER_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tregisterEmployee: {\r\n\t\t\t\t\t...state.registerEmployee,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_EXPORT_EXCEL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\texportExcel: {\r\n\t\t\t\t\t...state.exportExcel,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_EXPORT_EXCEL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\texportExcel: {\r\n\t\t\t\t\t...state.exportExcel,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_CHECK_CARD:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcheckCard: {\r\n\t\t\t\t\t...state.checkCard,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_CHECK_CARD:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcheckCard: {\r\n\t\t\t\t\t...state.checkCard,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_COMMENT_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcommentEmployee: {\r\n\t\t\t\t\t...state.commentEmployee,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\temployee: action.payload,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_COMMENT_EMPLOYEE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcommentEmployee: {\r\n\t\t\t\t\t...state.commentEmployee,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t\temployee: {},\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase UPDATE_NOTIFICATIONS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnotifications: {\r\n\t\t\t\t\t...state.notifications,\r\n\t\t\t\t\tdata: action.payload,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_NOTIFICATIONS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnotifications: {\r\n\t\t\t\t\t...state.notifications,\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase HIDE_NOTIFICATIONS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnotifications: {\r\n\t\t\t\t\t...state.notifications,\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\tcase SHOW_HISTORY:\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\thistory: {\r\n\t\t\t\t\t\t...state.history,\r\n\t\t\t\t\t\tshow: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\tcase HIDE_HISTORY:\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\thistory: {\r\n\t\t\t\t\t\t...state.history,\r\n\t\t\t\t\t\tshow: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { createStore } from \"redux\";\r\nimport rootReducer from \"../reducers\";\r\n\r\nconst store = configureStore();\r\n\r\nfunction configureStore() {\r\n\treturn createStore(\r\n\t\trootReducer,\r\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n\t);\r\n}\r\n\r\nexport default store;","export const LOG_EDIT_WORK_LOG = \"LOG_EDIT_WORK_LOG\";\r\nexport const LOG_SET_WORKING = \"LOG_SET_WORKING\";\r\nexport const LOG_SET_NOT_WORKING = \"LOG_SET_NOT_WORKING\";\r\nexport const LOG_EDIT_EMPLOYEE = \"LOG_EDIT_EMPLOYEE\";\r\nexport const LOG_ADD_EMPLOYEE = \"LOG_ADD_EMPLOYEE\";","import { request } from \"./config\";\r\nimport store from \"../store/store\";\r\nimport { updateEmployees, updateEmployee, updateNotifications } from \"../actions/employeeActions\";\r\nimport * as LOG_TYPE from \"../utils/logTypes\";\r\n\r\nexport const storeUpdateEmployees = () => {\r\n\treturn getServerEmployees().then((res) => {\r\n\t\tstore.dispatch(updateEmployees(res.data));\r\n\t});\r\n}\r\n\r\nexport const storeUpdateEmployee = (id) => {\r\n\treturn getServerEmployee(id).then((res) => {\r\n\t\tstore.dispatch(updateEmployee(res.data));\r\n\t});\r\n}\r\n\r\n// ------------ Server requests ------------\r\nexport const getServerEmployees = () => {\r\n\treturn request.post(\"/getEmployees\");\r\n}\r\n\r\nexport const getServerEmployee = (id) => {\r\n\treturn request.post(\"/getEmployee\", { \r\n\t\tid \r\n\t});\r\n}\r\n\r\nexport const getNotifications = () => {\r\n\treturn request.post(\"/getNotifications\");\r\n}\r\n\r\nexport const addNotification = (type, data) => {\r\n\treturn request.post(\"/addNotification\", { type, data }).then(() => {\r\n\t\tgetNotifications().then(res => {\r\n\t\t\tstore.dispatch(updateNotifications(res.data));\r\n\t\t})\r\n\t});\r\n}\r\n\r\nexport const getSchedules = (month) => {\r\n\treturn request.post(\"/getSchedules\", {\r\n\t\tmonth\r\n\t});\r\n}\r\n\r\nexport const saveSchedules = (schedules) => {\r\n\treturn request.post(\"/saveSchedules\", {\r\n\t\tschedules\r\n\t});\r\n}\r\n\r\nexport const getServerEmployeeWorkLog = (id, order = \"DESC\") => {\r\n\treturn request.post(\"/getEmployeeWorkLog\", { \r\n\t\tid,\r\n\t\torder\r\n\t});\r\n}\r\n\r\nexport const getServerEmployeeWorkLogFromTo = (id, from, to) => {\r\n\treturn request.post(\"/getEmployeeWorkLogFromTo\", { \r\n\t\tid,\r\n\t\tfrom,\r\n\t\tto\r\n\t});\r\n}\r\n\r\nexport const deleteServerWorkLog = (id, working, employeeId) => {\r\n\treturn request.post(\"/deleteWorkLog\", { \r\n\t\tid,\r\n\t\tworking,\r\n\t\temployeeId,\r\n\t});\r\n}\r\n\r\nexport const editServerWorkLog = (id, startDate, endDate, working) => {\r\n\taddNotification(LOG_TYPE.LOG_EDIT_WORK_LOG, { user: store.getState().employees.user.username, id, startDate });\r\n\treturn request.post(\"/editWorkLog\", { \r\n\t\tid,\r\n\t\tstartDate,\r\n\t\tendDate,\r\n\t\tworking,\r\n\t});\r\n}\r\n\r\nexport const addServerEmployee = (employee) => {\r\n\treturn request.post(\"/addEmployee\", {\r\n\t\temployee\r\n\t});\r\n}\r\n\r\nexport const setServerEmployeeWorking = (id, working) => {\r\n\tif(working) {\r\n\t\taddNotification(LOG_TYPE.LOG_SET_WORKING, { user: store.getState().employees.user.username, id });\r\n\t} else {\r\n\t\taddNotification(LOG_TYPE.LOG_SET_NOT_WORKING, { user: store.getState().employees.user.username, id });\r\n\t}\r\n\treturn request.post(\"/setEmployeeWorking\", {\r\n\t\tid, \r\n\t\tworking\r\n\t});\r\n}\r\n\r\nexport const setServerEmployeeArchived = (id, archived) => {\r\n\treturn request.post(\"/setArchivedEmployee\", {\r\n\t\tid, \r\n\t\tarchived\r\n\t});\r\n}\r\n\r\nexport const setServerEmployeeActive = (id, active) => {\r\n\treturn request.post(\"/setActiveEmployee\", {\r\n\t\tid, \r\n\t\tactive\r\n\t});\r\n}\r\n\r\nexport const deleteServerEmployee = (id) => {\r\n\treturn request.post(\"/deleteEmployee\", {\r\n\t\tid\r\n\t});\r\n}\r\n\r\nexport const editServerEmployee = (employee) => {\r\n\taddNotification(LOG_TYPE.LOG_EDIT_EMPLOYEE, { user: store.getState().employees.user.username, id: employee.id });\r\n\treturn request.post(\"/editEmployee\", {\r\n\t\temployee\r\n\t});\r\n}\r\n\r\nexport const exportServerEmployees = (settings) => {\r\n\treturn request.post(\"/export\", {\r\n\t\tsettings\r\n\t}).then(() => {\r\n\t\treturn request.get(\"/export\", {\r\n\t\t\tresponseType: \"blob\"\r\n\t\t})\r\n\t});\r\n}\r\n\r\nexport const addEmployeeComment = (employee, comment) => {\r\n\treturn request.post(\"/addEmployeeComment\", {\r\n\t\temployee,\r\n\t\tcomment,\r\n\t});\r\n}\r\n\r\nexport const getEmployeeComments = (id) => {\r\n\treturn request.post(\"/getEmployeeComments\", {\r\n\t\tid,\r\n\t});\r\n}\r\n\r\nexport const deleteEmployeeComment = (commentId) => {\r\n\treturn request.post(\"/deleteEmployeeComment\", {\r\n\t\tcommentId,\r\n\t});\r\n}\r\n\r\n// ------------ Card manipulation ------------\r\n\r\nexport const cardScanned = (uid) => {\r\n\treturn request.post(\"/cardScanned\", { \r\n\t\tuid: uid,\r\n\t\tadmin: 1,\r\n\t});\r\n}\r\n\r\nexport const getEmployeeByUID = (uid) => {\r\n\treturn request.post(\"/getEmployeeByUID\", {\r\n\t\tuid,\r\n\t});\r\n}\r\n\r\nexport const setEmployeeUID = (uid, id) => {\r\n\treturn request.post(\"/setEmployeeUID\", {\r\n\t\tuid,\r\n\t\tid\r\n\t});\r\n}\r\n\r\nexport const removeEmployeeUID = (id) => {\r\n\treturn request.post(\"/removeEmployeeUID\", {\r\n\t\tid\r\n\t});\r\n}\r\n\r\nexport const awaitCard = () => {\r\n\treturn request.post(\"/awaitCard\");\r\n}\r\n","import React, { forwardRef } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Button, Dropdown, Row, Col, Tooltip, OverlayTrigger} from \"react-bootstrap\";\r\n\r\nimport { \r\n\tshowDeleteEmployee,\r\n\tshowEditEmployee,\r\n\tshowCommentEmployee,\r\n} from \"../actions/employeeActions\";\r\n\r\nimport { \r\n\tsetServerEmployeeWorking, \r\n\tsetServerEmployeeArchived, \r\n\tsetServerEmployeeActive,\r\n\tstoreUpdateEmployee\r\n} from \"../utils/employeeUtils\";\r\n\r\nimport { FiMoreHorizontal, FiTrash, FiEdit,FiArchive, FiX,FiCheck } from \"react-icons/fi\";\r\n\r\nconst CommandButton = forwardRef((props, ref) => {\r\n\treturn <Button ref={ref} variant=\"link\" onClick={props.onClick}>\r\n\t\t<FiMoreHorizontal/>\r\n\t</Button>\r\n});\r\n\r\nconst Commands = (props) => {\r\n\treturn (\r\n\t\t<Row className=\"justify-content-end\">\r\n\t\t\t<Col xs=\"auto\" className=\"d-inline-block\">\r\n\t\t\t\t<Dropdown>\r\n\t\t\t\t\t<Dropdown.Toggle as={CommandButton}/>\r\n\t\t\t\t\t<Dropdown.Menu flip={true} alignRight={true}>\r\n\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\teventKey=\"1\"\r\n\t\t\t\t\t\t\tonClick={() => props.showEditEmployee(props.employee)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FiEdit className=\"mr-2 mb-1\"/>\r\n\t\t\t\t\t\t\tRediģēt\r\n\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\teventKey=\"2\"\r\n\t\t\t\t\t\t\tonClick={() => setServerEmployeeArchived(props.employee.id, !props.employee.archived).then(() => {\r\n\t\t\t\t\t\t\t\tstoreUpdateEmployee(props.employee.id);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FiArchive height=\"100%\" width=\"auto\" className=\"mr-2 mb-1\"/>\r\n\t\t\t\t\t\t\t{ props.employee.archived ? \"Izņemt no arhīva\" : \"Arhivēt\" }\r\n\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\teventKey=\"3\"\r\n\t\t\t\t\t\t\tonClick={() => setServerEmployeeActive(props.employee.id, !props.employee.active).then(() => {\r\n\t\t\t\t\t\t\t\tstoreUpdateEmployee(props.employee.id);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tprops.employee.active \r\n\t\t\t\t\t\t\t\t? <FiX height=\"100%\" width=\"auto\" className=\"mr-2 mb-1\"/>\r\n\t\t\t\t\t\t\t\t: <FiCheck height=\"100%\" width=\"auto\" className=\"mr-2 mb-1\"/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tprops.employee.active \r\n\t\t\t\t\t\t\t\t? \"Deaktivizēt\" \r\n\t\t\t\t\t\t\t\t: \"Aktivizēt\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\teventKey=\"4\"\r\n\t\t\t\t\t\t\tonClick={() => props.showDeleteEmployee(props.employee)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FiTrash height=\"100%\" width=\"auto\" className=\"mr-2 mb-1\"/>\r\n\t\t\t\t\t\t\tDzēst\r\n\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\teventKey=\"5\"\r\n\t\t\t\t\t\t\tonClick={() => props.showCommentEmployee(props.employee)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FiEdit className=\"mr-2 mb-1\"/>\r\n\t\t\t\t\t\t\tPievienot Komentāru\r\n\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t</Dropdown.Menu>\r\n\t\t\t\t</Dropdown>\r\n\t\t\t</Col>\r\n\t\t\t<Col xs=\"auto\" className=\"d-inline-block\">\r\n\t\t\t\t<OverlayTrigger\r\n\t\t\t\t\tplacement={\"top\"}\r\n\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t<Tooltip>\r\n\t\t\t\t\t\t\tAtzīmēt kā {props.employee.working ? \"izgājušu\" : \"ienākušu\"}\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() => setServerEmployeeWorking(props.employee.id, !props.employee.working).then(() => {\r\n\t\t\t\t\t\t\tstoreUpdateEmployee(props.employee.id);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tvariant={props.employee.working ? \"danger\" : \"success\"}\r\n\t\t\t\t\t>\r\n\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tprops.employee.working \r\n\t\t\t\t\t\t\t? <FiX/>\r\n\t\t\t\t\t\t\t: <FiCheck/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</OverlayTrigger>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t);\r\n};\r\n\r\nfunction mapStateToProps() {\r\n\treturn {};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowDeleteEmployee: (employee) => dispatch(showDeleteEmployee(employee)),\r\n\t\tshowEditEmployee: (employee) => dispatch(showEditEmployee(employee)),\r\n\t\tshowCommentEmployee: (employee) => dispatch(showCommentEmployee(employee)),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Commands);\r\n","import React from \"react\";\r\nimport { Form } from \"react-bootstrap\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport en from 'date-fns/locale/en-GB';\r\n\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nconst BoostrapDatePicker = (props) => {\r\n    return (\r\n        <div className={props.className}>\r\n            <DatePicker\r\n                className=\"text-center\"\r\n                customInput={<Form.Control/>}\r\n                locale={en}\r\n                {...props}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BoostrapDatePicker;\r\n","import { request } from \"./config\";\r\n\r\nexport const initialSettings = {\r\n\tshowFilters: false,\r\n\tshowArchive: false,\r\n\tshowInactive: false,\r\n\tshowWorking: false,\r\n\tshowNotWorking: false,\r\n\tnameFilter: \"\",\r\n\tpositionFilter: \"\",\r\n\tcompanyFilter: \"\",\r\n\tpageSize: 10,\r\n}\r\n\r\nexport const checkSession = () => {\r\n\treturn request.post(\"/checkSession\");\r\n}\r\n\r\nexport const authenticate = (username, password, rememberMe) => {\r\n\treturn request.post(\"/authenticate\", {\r\n\t\tusername,\r\n\t\tpassword,\r\n\t\trememberMe\r\n\t});\r\n}\r\n\r\nexport const logOut = () => {\r\n\treturn request.post(\"/logOut\");\r\n}\r\n\r\nexport const getUserByUsername = (username) => {\r\n\treturn request.post(\"/getUserByUsername\", {\r\n\t\tusername\r\n\t});\r\n}\r\n\r\nexport const getUserByKey = () => {\r\n\treturn request.post(\"/getUserByKey\");\r\n}","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Cookies from \"universal-cookie\";\r\n\r\nimport { Form, Button, Collapse, Row, Col, Dropdown, DropdownButton } from \"react-bootstrap\";\r\nimport BoostrapDatePicker from \"./BoostrapDatePicker\";\r\n\r\nimport {\r\n\tshowRegisterEmployee,\r\n\tshowExportExcel,\r\n\tshowCheckCard\r\n} from \"../actions/employeeActions\";\r\n\r\nimport { initialSettings } from \"../utils/userUtils\";\r\n\r\nimport { FiMinimize2, FiMaximize2 } from \"react-icons/fi\";\r\n\r\nclass Filters extends React.PureComponent {\r\n    constructor() {\r\n        super();\r\n\r\n        const cookies = new Cookies();\r\n        let settings = cookies.get(\"settings\");\r\n        \r\n        const startDate = new Date();\r\n        startDate.setHours(0,0,0);\r\n\r\n        const endDate = new Date();\r\n        endDate.setHours(23,59,59);\r\n\r\n        this.state = {\r\n            ...initialSettings,\r\n            ...settings,\r\n\t\t\tdropdown: {\r\n\t\t\t\tcurrentFilter: \"Šodiena\",\r\n\t\t\t\tfilters: [\"Šodiena\", \"Vakardiena\", \"Pēdējās 7 dienas\", \"Pēdējās 30 dienas\"]\r\n\t\t\t}\r\n        }\r\n    }\r\n    \r\n    componentDidMount() {\r\n        this.props.filterData(this.filterData);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.filterData(undefined);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if(\r\n\t\t\tprevState.showArchive !== this.state.showArchive\r\n\t\t\t|| prevState.showInactive !== this.state.showInactive\r\n\t\t\t|| prevState.showWorking !== this.state.showWorking\r\n\t\t\t|| prevState.showNotWorking !== this.state.showNotWorking\r\n\t\t\t|| prevState.nameFilter !== this.state.nameFilter\r\n\t\t\t|| prevState.positionFilter !== this.state.positionFilter\r\n            || prevState.companyFilter !== this.state.companyFilter\r\n            || prevState.startDate !== this.state.startDate\r\n            || prevState.endDate !== this.state.endDate) {\r\n\t\t\tthis.onFilterChange();\r\n        }\r\n        \r\n        if(\r\n\t\t\tprevState.showFilters !== this.state.showFilters\r\n\t\t\t||prevState.showArchive !== this.state.showArchive\r\n\t\t\t|| prevState.showInactive !== this.state.showInactive\r\n\t\t\t|| prevState.showWorking !== this.state.showWorking\r\n\t\t\t|| prevState.showNotWorking !== this.state.showNotWorking\r\n\t\t\t|| prevState.nameFilter !== this.state.nameFilter\r\n\t\t\t|| prevState.positionFilter !== this.state.positionFilter\r\n            || prevState.companyFilter !== this.state.companyFilter\r\n            || prevState.startDate !== this.state.startDate\r\n            || prevState.endDate !== this.state.endDate) {\r\n\t\t\tthis.saveSettings();\r\n\t\t}\r\n    }\r\n\r\n    saveSettings = () => {\r\n\t\tconst cookies = new Cookies();\r\n\t\tconst settings = {\r\n            ...cookies.get(\"settings\"),\r\n\t\t\tshowFilters: this.state.showFilters,\r\n\t\t\tshowArchive: this.state.showArchive,\r\n\t\t\tshowInactive: this.state.showInactive,\r\n\t\t\tshowWorking: this.state.showWorking,\r\n\t\t\tshowNotWorking: this.state.showNotWorking,\r\n\t\t\tnameFilter: this.state.nameFilter,\r\n\t\t\tpositionFilter: this.state.positionFilter,\r\n            companyFilter: this.state.companyFilter,\r\n            startDate: this.state.startDate,\r\n            endDate: this.state.endDate,\r\n\t\t}\r\n\r\n\t\tcookies.set(\"settings\", settings);\r\n    }\r\n\r\n    onFilterChange = () => {\r\n        this.props.onFilterChange(this.state);\r\n    }\r\n\r\n    filterData = (tableData) => {\r\n\t\tthis.applyNameFilter(tableData, (nameFilter) => {\r\n\t\t\tthis.applyPositionFilter(nameFilter, (positionFilter) => {\r\n\t\t\t\tthis.applyCompanyFilter(positionFilter, (companyFilter) => {\r\n\t\t\t\t\tthis.applyCheckboxFilters(companyFilter, (checkboxFilter) => {\r\n\t\t\t\t\t\tthis.props.onDataFiltered(checkboxFilter);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n    }\r\n    \r\n    applyNameFilter = (data, callback = () => null) => {\r\n\t\tconst result = data.filter((row) => {\r\n\t\t\treturn (row.name.name + \" \" + row.name.surname).toString().toLowerCase().indexOf(this.state.nameFilter.toLowerCase()) > -1;\r\n\t\t});\r\n\t\tcallback(result);\r\n\t}\r\n\r\n\tapplyCompanyFilter = (data, callback = () => null) => {\r\n\t\tconst result = data.filter((row) => {\r\n\t\t\tconst company = row.company ? row.company : \"\";\r\n\t\t\treturn company.toString().toLowerCase().indexOf(this.state.companyFilter.toLowerCase()) > -1;\r\n\t\t});\r\n\t\tcallback(result);\r\n\t}\r\n\r\n\tapplyPositionFilter = (data, callback = () => null) => {\r\n\t\tconst result = data.filter((row) => {\r\n\t\t\tconst position = row.position ? row.position : \"\";\r\n\t\t\treturn position.toString().toLowerCase().indexOf(this.state.positionFilter.toLowerCase()) > -1;\r\n\t\t});\r\n\t\tcallback(result);\r\n\t}\r\n\r\n\tapplyCheckboxFilters = (data, callback = () => null) => {\r\n\t\tconst result = data.filter((row) => {\r\n\t\t\tif(row.archived && !this.state.showArchive) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(!row.active && !this.state.showInactive) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(row.working && this.state.showNotWorking) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(!row.working && this.state.showWorking) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tcallback(result);\r\n\t}\r\n\r\n    onToggleFilters = () => {\r\n\t\tthis.setState({ showFilters: !this.state.showFilters });\r\n\t}\r\n\r\n    onToggleArchive = () => {\r\n\t\tthis.setState({ showArchive: !this.state.showArchive });\r\n\t}\r\n\r\n\tonToggleInactive = () => {\r\n\t\tthis.setState({ showInactive: !this.state.showInactive });\r\n\t}\r\n\r\n\tonToggleShowWorking = () => {\r\n\t\tthis.setState({ showWorking: !this.state.showWorking });\r\n\t}\r\n\r\n\tonToggleShowNotWorking = () => {\r\n\t\tthis.setState({ showNotWorking: !this.state.showNotWorking });\r\n\t}\r\n\r\n\tonChangeNameFilter = (e) => {\r\n\t\tthis.setState({ nameFilter: e.target.value });\r\n\t}\r\n\r\n\tonChangePositionFilter = (e) => {\r\n\t\tthis.setState({ positionFilter: e.target.value });\r\n\t}\r\n\r\n\tonChangeCompanyFilter = (e) => {\r\n\t\tthis.setState({ companyFilter: e.target.value });\r\n    }\r\n    \r\n    onChangeDateStart = (date) => {\r\n\t\tconst startOfDay = new Date(date);\r\n        startOfDay.setHours(0,0,0,0);\r\n\t\tthis.setState({\r\n\t\t\tstartDate: startOfDay,\r\n\t\t});\r\n\t}\r\n\r\n\tonChangeDateEnd = (date) => {\r\n\t\tconst endOfDay = new Date(date);\r\n\t\tendOfDay.setHours(23,59,59,59);\r\n\t\tthis.setState({\r\n\t\t\tendDate: endOfDay,\r\n\t\t});\r\n    }\r\n    \r\n    onClickFilter = (index) => {\r\n\t\tswitch(index) {\r\n\t\t\tcase 0: {\r\n\t\t\t\tthis.onChangeDateStart(new Date());\r\n\t\t\t\tthis.onChangeDateEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 1: {\r\n\t\t\t\tconst yesterday = new Date();\r\n\t\t\t\tyesterday.setDate(yesterday.getDate() - 1);\r\n\t\t\t\tthis.onChangeDateStart(yesterday);\r\n\t\t\t\tthis.onChangeDateEnd(yesterday);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 2: {\r\n\t\t\t\tconst last7Days = new Date();\r\n\t\t\t\tlast7Days.setDate(last7Days.getDate() - 7);\r\n\t\t\t\tthis.onChangeDateStart(last7Days);\r\n\t\t\t\tthis.onChangeDateEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 3: {\r\n\t\t\t\tconst last30Days = new Date();\r\n\t\t\t\tlast30Days.setDate(last30Days.getDate() - 30);\r\n\t\t\t\tthis.onChangeDateStart(last30Days);\r\n\t\t\t\tthis.onChangeDateEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault: {\r\n\t\t\t\tthis.onChangeDateStart(new Date());\r\n\t\t\t\tthis.onChangeDateEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tdropdown: {\r\n\t\t\t\t...this.state.dropdown,\r\n\t\t\t\tcurrentFilter: this.state.dropdown.filters[index],\r\n\t\t\t}\t\t\t\r\n\t\t})\r\n\t}\r\n\r\n\tclearAllFilters = () => {\r\n\t\tconst startDate = new Date();\r\n\t\tstartDate.setHours(0,0,0);\r\n\r\n\t\tconst endDate = new Date();\r\n\t\tendDate.setHours(23,59,59);\r\n\r\n\t\tthis.setState({\r\n\t\t\tnameFilter: \"\",\r\n\t\t\tpositionFilter: \"\",\r\n\t\t\tcompanyFilter: \"\",\r\n\t\t\tshowArchive: false,\r\n\t\t\tshowInactive: false,\r\n\t\t\tshowWorking: false,\r\n\t\t\tshowNotWorking: false,\r\n\t\t\tstartDate: startDate,\r\n\t\t\tendDate: endDate,\r\n\t\t});\r\n    }\r\n    \r\n\trender() {\r\n        const dateFilter = (\r\n            <>\r\n                <Col xs={\"auto\"}>\r\n                    <Form.Group as={Row}>\r\n                        <Form.Label column xs={\"auto\"} className=\"pr-0\">Dati no</Form.Label>\r\n                        <Col>\r\n                            <BoostrapDatePicker\r\n                                dateFormat=\"dd.MM.yyyy.\"\r\n                                selected={new Date(this.state.startDate)}\r\n                                onChange={this.onChangeDateStart}\r\n                                maxDate={new Date()}\r\n                            />\r\n                        </Col>\r\n                    </Form.Group>\r\n                </Col>\r\n                <Col xs={\"auto\"}>\r\n                    <Form.Group as={Row}>\r\n                        <Form.Label column xs={\"auto\"} className=\"pl-0 pr-0\">līdz</Form.Label>\r\n                        <Col>\r\n                            <BoostrapDatePicker\r\n                                dateFormat=\"dd.MM.yyyy.\"\r\n                                selected={new Date(this.state.endDate)}\r\n                                onChange={this.onChangeDateEnd}\r\n                                minDate={new Date(this.state.startDate)}\r\n                                maxDate={new Date()}\r\n                            />\r\n                        </Col>\r\n                    </Form.Group>\r\n                </Col>\r\n                <Col xs={\"auto\"}>\r\n                    <DropdownButton\r\n                        alignRight\r\n                        variant=\"secondary\"\r\n                        title={this.state.dropdown.currentFilter}\r\n                    >\r\n                    {\r\n                        this.state.dropdown.filters.map((filter, index) => {\r\n                            return <Dropdown.Item key={index} onClick={() => this.onClickFilter(index)}>{filter}</Dropdown.Item>\r\n                        })\r\n                    }\r\n                    </DropdownButton>\r\n                </Col>\r\n            </>\r\n        );\r\n\r\n\t\treturn (\r\n            <Row>\r\n                <Col>\r\n                    <Row>\r\n                        <Col>\r\n                            <Button \r\n                                variant=\"link\" \r\n                                onClick={this.onToggleFilters}\r\n                                className=\"float-left\"\r\n                            >\r\n                                {\r\n                                    this.state.showFilters\r\n                                    ? <FiMinimize2 className=\"mr-2 mb-1\"/>\r\n                                    : <FiMaximize2 className=\"mr-2 mb-1\"/>\r\n                                }\r\n                                Filtri\r\n                            </Button>\r\n                            <Dropdown alignRight className=\"float-right\">\r\n                                <Dropdown.Toggle variant=\"link\">\r\n                                    Opcijas\r\n                                </Dropdown.Toggle>\r\n\r\n                                <Dropdown.Menu>\r\n                                    <Dropdown.Item onClick={this.props.showRegisterEmployee}>Pievienot darbinieku</Dropdown.Item>\r\n                                    <Dropdown.Item onClick={this.props.showCheckCard}>Atrast darbinieku pēc kartes</Dropdown.Item>\r\n                                    <Dropdown.Item onClick={this.props.showExportExcel}>Eksportēt Excel</Dropdown.Item>\r\n                                </Dropdown.Menu>\r\n                            </Dropdown>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col>\r\n                            <Collapse in={this.state.showFilters}>\r\n                                <div>\r\n                                    <Row>\r\n                                        <Col>\r\n                                            <Form.Group>\r\n                                                <Form.Check \r\n                                                    type=\"checkbox\" \r\n                                                    label=\"Rādīt arhīvā esošos darbiniekus\"\r\n                                                    checked={this.state.showArchive}\r\n                                                    onChange={this.onToggleArchive}\r\n                                                />\r\n                                            </Form.Group>\r\n                                            <Form.Group>\r\n                                                <Form.Check \r\n                                                    type=\"checkbox\" \r\n                                                    label=\"Rādīt deaktivizētus darbiniekus\"\r\n                                                    checked={this.state.showInactive}\r\n                                                    onChange={this.onToggleInactive}\r\n                                                />\r\n                                            </Form.Group>\r\n                                            <Form.Group>\r\n                                                <Form.Check \r\n                                                    type=\"checkbox\" \r\n                                                    label=\"Rādīt tikai ienākušos darbiniekus\"\r\n                                                    checked={this.state.showWorking}\r\n                                                    onChange={this.onToggleShowWorking}\r\n                                                />\r\n                                            </Form.Group>\r\n                                            <Form.Group>\r\n                                                <Form.Check \r\n                                                    type=\"checkbox\" \r\n                                                    label=\"Rādīt tikai izgājušos darbiniekus\"\r\n                                                    checked={this.state.showNotWorking}\r\n                                                    onChange={this.onToggleShowNotWorking}\r\n                                                />\r\n                                            </Form.Group>\r\n                                        </Col>\r\n                                        <Col>\r\n                                            <Form.Group>\r\n                                                <Form.Control\r\n                                                    placeholder=\"Vārds...\"\r\n                                                    onChange={this.onChangeNameFilter}\r\n                                                    value={this.state.nameFilter}\r\n                                                />\r\n                                                <Form.Text>\r\n                                                    Meklēt darbinieku pēc vārda vai uzvārda\r\n                                                </Form.Text>\r\n                                            </Form.Group>\r\n                                            <Form.Group>\r\n                                                <Form.Control\r\n                                                    placeholder=\"Amats...\"\r\n                                                    onChange={this.onChangePositionFilter}\r\n                                                    value={this.state.positionFilter}\r\n                                                />\r\n                                                <Form.Text>\r\n                                                    Meklēt darbinieku pēc amata\r\n                                                </Form.Text>\r\n                                            </Form.Group>\r\n                                            <Form.Group>\r\n                                                <Form.Control\r\n                                                    placeholder=\"Uzņēmums...\"\r\n                                                    onChange={this.onChangeCompanyFilter}\r\n                                                    value={this.state.companyFilter}\r\n                                                />\r\n                                                <Form.Text>\r\n                                                    Meklēt darbinieku pēc uzņēmuma\r\n                                                </Form.Text>\r\n                                            </Form.Group>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <Row className=\"mb-2\">\r\n                                        {\r\n                                            this.props.dateFilter\r\n                                            ? dateFilter\r\n                                            : null\r\n                                        }\r\n                                        <Col>\r\n                                            <Button\r\n                                                variant=\"danger\"\r\n                                                onClick={this.clearAllFilters}\r\n                                                className=\"float-right\"\r\n                                            >\r\n                                                <nobr>Notīrīt visus filtrus</nobr>\r\n                                            </Button>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <hr/>\r\n                                </div>\r\n                            </Collapse>\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n            </Row>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowRegisterEmployee: () => dispatch(showRegisterEmployee()),\r\n\t\tshowExportExcel: () => dispatch(showExportExcel()),\r\n\t\tshowCheckCard: () => dispatch(showCheckCard())\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Filters);\r\n","import { request } from \"./config\";\r\n\r\nexport const pingServer = () => {\r\n\treturn request.post(\"/ping\");\r\n}\r\n\r\nexport const addZero = (i) => {\r\n\tif (i < 10) {\r\n\t\ti = \"0\" + i;\r\n\t}\r\n\treturn i;\r\n}\r\n\r\nexport const millisecondConverter = (ms) => {\r\n\tlet seconds = Math.floor(ms/1000);\r\n\tlet minutes = Math.floor(seconds/60);\r\n\tlet hours = Math.floor(minutes/60);\r\n\r\n\tminutes = minutes-(hours*60);\r\n\tseconds = seconds-(hours*60*60)-(minutes*60);\r\n\r\n\treturn {\r\n\t\tseconds,\r\n\t\tminutes,\r\n\t\thours\r\n\t}\r\n}\r\n\r\nexport const formatDate = (date) => {\r\n\tconst dateObj = new Date(date);\r\n\r\n\tlet formatted =\r\n\t\taddZero(dateObj.getDate()) + \".\"\r\n\t\t+ addZero(dateObj.getMonth() + 1) + \".\"\r\n\t\t+ addZero(dateObj.getFullYear()) + \" \";\r\n\r\n\tformatted +=\r\n\t\taddZero(dateObj.getHours()) + \":\"\r\n\t\t+ addZero(dateObj.getMinutes());\r\n\r\n\treturn formatted;\r\n}\r\n\r\nexport const daysInMonth = (month, year) => {\r\n    return new Date(year, month + 1, 0).getDate();\r\n}\r\n\r\nexport const getMonthName = (month) => {\r\n\tconst months = [\r\n\t\t\"Janvāris\",\r\n\t\t\"Februāris\",\r\n\t\t\"Marts\",\r\n\t\t\"Aprīlis\",\r\n\t\t\"Maijs\",\r\n\t\t\"Jūnijs\",\r\n\t\t\"Jūlijs\",\r\n\t\t\"Augusts\",\r\n\t\t\"Septembris\",\r\n\t\t\"Oktobris\",\r\n\t\t\"Novembris\",\r\n\t\t\"Decembris\"\r\n\t];\r\n\r\n\treturn months[month];\r\n}\r\n\r\nexport const isWeekend = (date) => {\r\n\tconst day = date.getDay();\r\n\treturn ((day === 5) || (day === 6));\r\n}\r\n\r\nexport const convertSpecialCharacters = (string) => {\r\n\tconst special = [\"Ā\", \"Č\", \"Ē\", \"Ģ\", \"Ī\", \"Ķ\", \"Ļ\", \"Ņ\", \"Š\", \"Ū\", \"Ž\"];\r\n\tconst normal = [\"A\", \"C\", \"E\", \"G\", \"I\", \"K\", \"L\", \"N\", \"S\", \"U\", \"Z\"];\r\n\r\n\tlet output = \"\";\r\n\tfor (let i = 0; i < string.length; i++) {\r\n\t\tconst letter = string.toUpperCase().charAt(i);\r\n\t\tif(special.indexOf(letter) !== -1) {\r\n\t\t\toutput += normal[special.indexOf(letter)]; \r\n\t\t} else {\r\n\t\t\toutput += letter;\r\n\t\t}\r\n\t}\r\n\treturn output;\r\n}\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport Cookies from 'universal-cookie';\r\n\r\nimport { Badge, Button, Row, Col, Dropdown, OverlayTrigger, Popover } from \"react-bootstrap\";\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\r\n\r\nimport ContainerBox from \"./ContainerBox\";\r\nimport Commands from \"./Commands\";\r\nimport Filters from \"./Filters\";\r\n\r\nimport {\r\n\tshowRegisterEmployee,\r\n\tshowExportExcel,\r\n\tshowCheckCard,\r\n\tshowEmployeeWorkLog\r\n} from \"../actions/employeeActions\";\r\n\r\nimport {\r\n\tstoreUpdateEmployee,\r\n\tdeleteEmployeeComment,\r\n} from \"../utils/employeeUtils\";\r\nimport { addZero, millisecondConverter, convertSpecialCharacters } from \"../utils/commonUtils\";\r\n\r\nimport { FiUser, FiMessageSquare, FiXCircle } from \"react-icons/fi\";\r\n\r\nclass Employees extends React.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tconst cookies = new Cookies();\r\n\t\tlet settings = cookies.get(\"settings\");\r\n\r\n\t\tif(!settings) {\r\n\t\t\tsettings = {\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t}\r\n\r\n\t\t\tcookies.set(\"settings\", settings);\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\tworkLogUserId: null,\r\n\t\t\tshowWorkLogModal: false,\r\n\t\t\ttableData: [],\r\n\t\t\tpageSize: 10,\r\n\t\t\t...settings\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.onTableChange();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif(prevProps.employees !== this.props.employees) {\r\n\t\t\tthis.onTableChange();\r\n\t\t}\r\n\r\n\t\tif(prevState.pageSize !== this.state.pageSize) {\r\n\t\t\tthis.saveSettings();\r\n\t\t}\r\n\t}\r\n\r\n\tsaveSettings = () => {\r\n\t\tconst cookies = new Cookies();\r\n\t\tconst settings = {\r\n\t\t\t...cookies.get(\"settings\"),\r\n\t\t\tpageSize: this.state.pageSize,\r\n\t\t}\r\n\r\n\t\tcookies.set(\"settings\", settings);\r\n\t}\r\n\r\n\tonTableChange = () => {\r\n\t\tthis.formatTable((tableData) => {\r\n\t\t\tthis.filterData(tableData);\r\n\t\t});\r\n\t}\r\n\r\n\tonFilterChange = () => {\r\n\t\tthis.onTableChange();\r\n\t}\r\n\r\n\tonDataFiltered = (data) => {\r\n\t\tthis.setState({\r\n\t\t\ttableData: data\r\n\t\t});\r\n\t}\r\n\r\n\tformatTable = (callback = () => null) => {\r\n\t\tconst workLogFrom = new Date();\r\n\t\tworkLogFrom.setHours(0, 0, 0);\r\n\r\n\t\tconst workLogTo = new Date();\r\n\t\tworkLogTo.setHours(23, 59, 59);\r\n\r\n\t\tconst promise = this.props.employees.map((employee) => {\r\n\t\t\tconst workLogToday = [];\r\n\t\t\temployee.workLog.forEach((workLog) => {\r\n\t\t\t\tif(new Date(workLog.start_time).getTime() >= workLogFrom.getTime() && new Date(workLog.start_time).getTime() <= workLogTo.getTime()) {\r\n\t\t\t\t\treturn workLogToday.push(workLog);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\treturn({\r\n\t\t\t\tid: employee.id,\r\n\t\t\t\tposition: employee.position ? employee.position.toString() : \"\",\r\n\t\t\t\tcompany: employee.company ? employee.company.toString() : \"\",\r\n\t\t\t\tarchived: employee.archived,\r\n\t\t\t\tactive: employee.active,\r\n\t\t\t\tworking: employee.working,\r\n\t\t\t\tname: {\r\n\t\t\t\t\tid: employee.id,\r\n\t\t\t\t\tname: employee.name,\r\n\t\t\t\t\tsurname: employee.surname,\r\n\t\t\t\t\tworking: employee.working,\r\n\t\t\t\t\tcomments: employee.comments,\r\n\t\t\t\t},\r\n\t\t\t\ttoday: {\r\n\t\t\t\t\tworking: employee.working,\r\n\t\t\t\t\tworkLogs: workLogToday,\r\n\t\t\t\t},\r\n\t\t\t\tcommands: employee,\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tPromise.all(promise).then((data) => {\r\n\t\t\tcallback(data);\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst nameFormatter = (cell, row) => {\r\n\t\t\tconst commentBorderStyle = {\r\n\t\t\t\tborderBottom: \"solid 1px gray\"\r\n\t\t\t}\r\n\r\n\t\t\tconst comments = cell.comments.length \r\n\t\t\t? cell.comments.map((comment, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Row \r\n\t\t\t\t\t\tkey={index} \r\n\t\t\t\t\t\tstyle={index < cell.comments.length - 1 ? commentBorderStyle : null} \r\n\t\t\t\t\t\tclassName=\"ml-1 mr-1 pt-1 pb-2\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Col className=\"align-self-center\">\r\n\t\t\t\t\t\t\t<span>{comment.text}</span>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs=\"auto\">\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tsize={\"sm\"}\r\n\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\tonClick={() => deleteEmployeeComment(comment.id).then(() => {\r\n\t\t\t\t\t\t\t\t\tstoreUpdateEmployee(cell.id);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<FiXCircle className=\"mb-1\" />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t\t: null;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<nobr>\r\n\t\t\t\t\t\t<Badge \r\n\t\t\t\t\t\t\tstyle={{ fontSize: \"14px\" }}\r\n\t\t\t\t\t\t\tvariant={ cell.working ? \"success\" : \"danger\" }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FiUser/>\r\n\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t<Button \r\n\t\t\t\t\t\t\tvariant=\"link\" \r\n\t\t\t\t\t\t\tonClick={() => this.props.showEmployeeWorkLog(cell.id)}\r\n\t\t\t\t\t\t\tstyle={{ color: \"#0000FF\" }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{cell.surname + \" \" + cell.name}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcell.comments.length\r\n\t\t\t\t\t\t\t? \r\n\t\t\t\t\t\t\t<OverlayTrigger\r\n\t\t\t\t\t\t\t\ttrigger=\"click\"\r\n\t\t\t\t\t\t\t\trootClose\r\n\t\t\t\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t\t\t\t<Popover>\r\n\t\t\t\t\t\t\t\t\t\t{comments}\r\n\t\t\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tsize={\"sm\"}\r\n\t\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<FiMessageSquare/>\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t\t: \r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</nobr>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tconst companyFormatter = (cell, row) => {\r\n\t\t\treturn (\r\n\t\t\t\t<span className=\"d-none d-md-inline-block text-truncate\" style={{ maxWidth: \"14vw\" }}>\r\n\t\t\t\t\t{cell}\r\n\t\t\t\t</span>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst todayFormatter = (cell, row) => {\r\n\t\t\tlet badges = [];\r\n\t\t\tlet totalWorkTime = 0;\r\n\t\t\tlet totalWorkTimeConverted = {\r\n\t\t\t\thours: 0,\r\n\t\t\t\tminutes: 0,\r\n\t\t\t\tseconds: 0\r\n\t\t\t};\r\n\r\n\t\t\tcell.workLogs.forEach((workLog, index) => {\r\n\t\t\t\tlet workTime = 0;\r\n\t\t\t\tlet workTimeConverted = {\r\n\t\t\t\t\thours: 0,\r\n\t\t\t\t\tminutes: 0,\r\n\t\t\t\t\tseconds: 0\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(workLog.end_time === null) {\r\n\t\t\t\t\tworkLog.end_time = new Date();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Calculate each row data\r\n\t\t\t\tworkTime = new Date(workLog.end_time) - new Date(workLog.start_time);\r\n\t\t\t\tworkTimeConverted = millisecondConverter(workTime);\r\n\r\n\t\t\t\tconst workTimeStartFormatted =\r\n\t\t\t\t\t  addZero(new Date(workLog.start_time).getHours()) + \":\" \r\n\t\t\t\t\t+ addZero(new Date(workLog.start_time).getMinutes());\r\n\t\t\t\t\r\n\t\t\t\tconst workTimeEndFormatted =\r\n\t\t\t\t\t  addZero(new Date(workLog.end_time).getHours()) + \":\" \r\n\t\t\t\t\t+ addZero(new Date(workLog.end_time).getMinutes());\r\n\t\r\n\t\t\t\tconst workTimeFormatted =\r\n\t\t\t\t\tworkTimeConverted.hours + \" st. \" \r\n\t\t\t\t\t+ workTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\t// Calculate the total\r\n\t\t\t\ttotalWorkTime += new Date(workLog.end_time) - new Date(workLog.start_time);\r\n\t\t\t\ttotalWorkTimeConverted = millisecondConverter(totalWorkTime);\r\n\r\n\t\t\t\t// Each work log entry formatted and applied in HTML format\r\n\t\t\t\tbadges.push(\r\n\t\t\t\t\t<Row key={index} style={{ fontSize: \"14px\" }}>\r\n\t\t\t\t\t\t<Col xs={6}>\r\n\t\t\t\t\t\t\t<nobr>\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t{workTimeStartFormatted}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcell.working && index === cell.workLogs.length - 1\r\n\t\t\t\t\t\t\t\t\t? null\r\n\t\t\t\t\t\t\t\t\t: <span>\r\n\t\t\t\t\t\t\t\t\t\t&#8594; {workTimeEndFormatted}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</nobr>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={\"auto\"} className=\"text-center\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tworkTimeFormatted !== null\r\n\t\t\t\t\t\t\t\t? <span>\r\n\t\t\t\t\t\t\t\t\t{workTimeFormatted}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\t\t//Total row formatted\r\n\t\t\tif(badges.length) {\r\n\t\t\t\tconst totalWorkTimeFormatted =\r\n\t\t\t\ttotalWorkTimeConverted.hours + \" st. \" \r\n\t\t\t\t+ totalWorkTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\tbadges.push(\r\n\t\t\t\t\t<Row key={badges.length} style={{ fontSize: \"14px\" }}>\r\n\t\t\t\t\t\t<Col xs={6}>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={\"auto\"} className=\"text-center\" style={{ borderTop: \"solid 1px\" }}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttotalWorkTimeFormatted !== null\r\n\t\t\t\t\t\t\t\t? <span>\r\n\t\t\t\t\t\t\t\t\t<b>{totalWorkTimeFormatted}</b>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\treturn (badges);\r\n\t\t};\r\n\r\n\t\tconst commandFormatter = (cell, row) => {\r\n\t\t\treturn (\r\n\t\t\t\t<Commands employee={cell}/>\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tconst columns = [{\r\n\t\t\tdataField: \"id\",\r\n\t\t\ttext: \"#\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle d-none d-md-table-cell\",\r\n\t\t\theaderClasses: \"d-none d-md-table-cell\",\r\n\t\t\t// hidden: true,\r\n\t\t}, {\r\n\t\t\tdataField: \"name\",\r\n\t\t\ttext: \"Darbinieks\",\r\n\t\t\tsort: true,\r\n\t\t\tsortFunc: (a, b, order) => {\r\n\t\t\t\tif(convertSpecialCharacters(a.surname) < convertSpecialCharacters(b.surname)) {\r\n\t\t\t\t\treturn order === \"asc\" ? -1 : 1;\r\n\t\t\t\t} else if(convertSpecialCharacters(a.surname) > convertSpecialCharacters(b.surname)) {\r\n\t\t\t\t\treturn order === \"asc\" ? 1 : -1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t},\r\n\t\t\tclasses: \"align-middle\",\r\n\t\t\tformatter: nameFormatter,\r\n\t\t}, {\r\n\t\t\tdataField: \"company\",\r\n\t\t\ttext: \"Uzņēmums\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle d-none d-lg-table-cell\",\r\n\t\t\theaderClasses: \"d-none d-lg-table-cell\",\r\n\t\t\tformatter: companyFormatter\r\n\t\t}, {\r\n\t\t\tdataField: \"position\",\r\n\t\t\ttext: \"Amats\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle d-none d-lg-table-cell\",\r\n\t\t\theaderClasses: \"d-none d-lg-table-cell\",\r\n\t\t\tformatter: companyFormatter\r\n\t\t}, {\r\n\t\t\tdataField: \"today\",\r\n\t\t\ttext: \"Šodien\",\r\n\t\t\tsort: true,\r\n\t\t\tsortFunc: (a, b, order) => {\r\n\t\t\t\tif(a.workLogs.length && b.workLogs.length) {\r\n\t\t\t\t\tconst aData = a.working\r\n\t\t\t\t\t? new Date(a.workLogs[a.workLogs.length - 1].start_time)\r\n\t\t\t\t\t: new Date(a.workLogs[a.workLogs.length - 1].end_time);\r\n\r\n\t\t\t\t\tconst bData = b.working\r\n\t\t\t\t\t? new Date(b.workLogs[b.workLogs.length - 1].start_time)\r\n\t\t\t\t\t: new Date(b.workLogs[b.workLogs.length - 1].end_time);\r\n\r\n\t\t\t\t\tif(aData > bData) {\r\n\t\t\t\t\t\treturn order === \"asc\" ? 1 : -1;\r\n\t\t\t\t\t} else if(aData < bData) {\r\n\t\t\t\t\t\treturn order === \"asc\" ? -1 : 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If there are no work logs for today\r\n\t\t\t\tif(!a.workLogs.length) {\r\n\t\t\t\t\treturn order === \"asc\" ? -1 : 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn 0;\r\n\t\t\t},\r\n\t\t\tclasses: \"align-middle\",\r\n\t\t\tformatter: todayFormatter\r\n\t\t}, {\r\n\t\t\tdataField: \"commands\",\r\n\t\t\ttext: \"\",\r\n\t\t\tclasses: \"align-middle\",\r\n\t\t\tformatter: commandFormatter\r\n\t\t}];\r\n\r\n\t\tconst defaultSorted = [{\r\n\t\t\tdataField: \"name\",\r\n\t\t\torder: \"asc\"\r\n\t\t}];\r\n\r\n\t\tconst onClickPageSize = (option) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tpageSize: option.page\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst sizePerPageRenderer = ({\r\n\t\t\toptions,\r\n\t\t\tcurrSizePerPage,\r\n\t\t\tonSizePerPageChange\r\n\t\t}) => (\r\n\t\t\t<Dropdown className=\"d-inline pr-2\">\r\n\t\t\t\t<Dropdown.Toggle variant=\"primary\">\r\n\t\t\t\t\t{this.state.pageSize === 9999 ? \"Viss\" : this.state.pageSize}\r\n\t\t\t\t</Dropdown.Toggle>\r\n\r\n\t\t\t\t<Dropdown.Menu>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toptions.map((option, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\t\t\tkey={index} \r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tonClickPageSize(option);\r\n\t\t\t\t\t\t\t\t\t\tonSizePerPageChange(option.page);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{option.text}\r\n\t\t\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</Dropdown.Menu>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\r\n\t\tconst pagination = paginationFactory({\r\n\t\t\tpage: 1,\r\n\t\t\talwaysShowAllBtns: true,\r\n\t\t\tshowTotal: false,\r\n\t\t\tsizePerPage : this.state.pageSize,\r\n\t\t\tsizePerPageRenderer,\r\n\t\t\tsizePerPageList: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"10\",\r\n\t\t\t\t\tvalue: 10,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"25\",\r\n\t\t\t\t\tvalue: 25,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"50\",\r\n\t\t\t\t\tvalue: 50,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"100\",\r\n\t\t\t\t\tvalue: 100,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"Viss\",\r\n\t\t\t\t\tvalue: 9999,\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\r\n\t\tconst rowStyle = (row) => {\r\n\t\t\tif(!row.active) {\r\n\t\t\t\treturn { backgroundColor: \"rgba(255, 0, 0, 0.1)\" };\r\n\t\t\t}\r\n\r\n\t\t\tif(row.archived) {\r\n\t\t\t\treturn { backgroundColor: \"rgba(255, 255, 0, 0.1)\" };\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<ContainerBox header={\"Darbinieki\"}>\r\n\t\t\t\t<Filters \r\n\t\t\t\t\tonDataFiltered={this.onDataFiltered}\r\n\t\t\t\t\tonFilterChange={this.onFilterChange}\r\n\t\t\t\t\tfilterData={filterData => this.filterData = filterData}\r\n\t\t\t\t/>\r\n\t\t\t\t<BootstrapTable \r\n\t\t\t\t\tbootstrap4={ true }\r\n\t\t\t\t\tkeyField=\"id\"\r\n\t\t\t\t\tdata={ this.state.tableData } \r\n\t\t\t\t\tcolumns={ columns } \r\n\t\t\t\t\tbordered={ false }\r\n\t\t\t\t\thover={ true }\r\n\t\t\t\t\tdefaultSorted={ defaultSorted }\r\n\t\t\t\t\tremote={ { filter: true } }\r\n\t\t\t\t\tonTableChange={ this.onTableChange }\r\n\t\t\t\t\tpagination={ pagination }\r\n\t\t\t\t\trowStyle={ rowStyle }\r\n\t\t\t\t/>\r\n\t\t\t</ContainerBox>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\temployees: state.employees.employees,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowRegisterEmployee: () => dispatch(showRegisterEmployee()),\r\n\t\tshowExportExcel: () => dispatch(showExportExcel()),\r\n\t\tshowCheckCard: () => dispatch(showCheckCard()),\r\n\t\tshowEmployeeWorkLog: (id) => dispatch(showEmployeeWorkLog(id))\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Employees);\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport Cookies from 'universal-cookie';\r\n\r\nimport { Button, Row, Col, Dropdown } from \"react-bootstrap\";\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\r\n\r\nimport ContainerBox from \"./ContainerBox\";\r\nimport Filters from \"./Filters\";\r\n\r\nimport {\r\n\tshowEmployeeWorkLog,\r\n\tshowExportExcel\r\n} from \"../actions/employeeActions\";\r\n\r\nimport { addZero, millisecondConverter, convertSpecialCharacters } from \"../utils/commonUtils\";\r\n\r\nimport { FiUser } from \"react-icons/fi\";\r\n\r\nclass Employees extends React.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tconst cookies = new Cookies();\r\n\t\tlet settings = cookies.get(\"settings\");\r\n\r\n\t\tconst startDate = new Date();\r\n        startDate.setHours(0,0,0);\r\n\r\n        const endDate = new Date();\r\n        endDate.setHours(23,59,59);\r\n\r\n\t\tif(settings) {\r\n\t\t\tsettings = {\r\n                ...settings,\r\n\t\t\t\tstartDate: settings.startDate ? new Date(settings.startDate) : new Date(startDate),\r\n\t\t\t\tendDate: settings.endDate ? new Date(settings.endDate) : new Date(endDate),\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tsettings = {\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t}\r\n\r\n\t\t\tcookies.set(\"settings\", settings);\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\tworkLogUserId: null,\r\n\t\t\tshowWorkLogModal: false,\r\n\t\t\ttableData: [],\r\n\t\t\tpageSize: 10,\r\n\t\t\t...settings,\r\n\t\t\tdropdown: {\r\n\t\t\t\tcurrentFilter: \"Šodiena\",\r\n\t\t\t\tfilters: [\"Šodiena\", \"Vakardiena\", \"Pēdējās 7 dienas\", \"Pēdējās 30 dienas\"]\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.onTableChange();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif(prevProps.employees !== this.props.employees) {\r\n\t\t\tthis.onTableChange();\r\n\t\t}\r\n\r\n\t\tif(prevState.pageSize !== this.state.pageSize) {\r\n\t\t\tthis.saveSettings();\r\n\t\t}\r\n\t}\r\n\r\n\tsaveSettings = () => {\r\n\t\tconst cookies = new Cookies();\r\n\t\tconst settings = {\r\n\t\t\t...cookies.get(\"settings\"),\r\n\t\t\tpageSize: this.state.pageSize,\r\n\t\t}\r\n\r\n\t\tcookies.set(\"settings\", settings);\r\n\t}\r\n\r\n\tonTableChange = () => {\r\n\t\tthis.formatTable((tableData) => {\r\n\t\t\tthis.filterData(tableData);\r\n\t\t});\r\n\t}\r\n\r\n\tonFilterChange = (filters) => {\r\n\t\tthis.setState({\r\n\t\t\tstartDate: filters.startDate,\r\n\t\t\tendDate: filters.endDate,\r\n\t\t}, () => {\r\n\t\t\tthis.onTableChange();\r\n\t\t});\r\n\t}\r\n\r\n\tonDataFiltered = (data) => {\r\n\t\tthis.setState({\r\n\t\t\ttableData: data\r\n\t\t});\r\n\t}\r\n\r\n\tformatTable = (callback = () => null) => {\r\n\t\tconst workLogFrom = new Date(this.state.startDate);\r\n\t\tconst workLogTo = new Date(this.state.endDate);\r\n\r\n\t\tconst promise = this.props.employees.map((employee) => {\r\n\t\t\tconst workLogToday = [];\r\n\t\t\temployee.workLog.forEach((workLog) => {\r\n\t\t\t\tif(new Date(workLog.start_time).getTime() >= workLogFrom.getTime() && new Date(workLog.start_time).getTime() <= workLogTo.getTime()) {\r\n\t\t\t\t\treturn workLogToday.push(workLog);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\treturn({\r\n\t\t\t\tid: employee.id,\r\n\t\t\t\tposition: employee.position ? employee.position.toString() : \"\",\r\n\t\t\t\tcompany: employee.company ? employee.company.toString() : \"\",\r\n\t\t\t\tarchived: employee.archived,\r\n\t\t\t\tactive: employee.active,\r\n\t\t\t\tworking: employee.working,\r\n\t\t\t\tname: {\r\n\t\t\t\t\tid: employee.id,\r\n\t\t\t\t\tname: employee.name,\r\n\t\t\t\t\tsurname: employee.surname,\r\n\t\t\t\t\tworking: employee.working,\r\n\t\t\t\t\tcomments: employee.comments,\r\n\t\t\t\t},\r\n\t\t\t\ttoday: {\r\n\t\t\t\t\tworking: employee.working,\r\n\t\t\t\t\tworkLogs: workLogToday,\r\n\t\t\t\t},\r\n\t\t\t\tcommands: employee,\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tPromise.all(promise).then((data) => {\r\n\t\t\tcallback(data);\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst nameFormatter = (cell, row) => {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<nobr>\r\n\t\t\t\t\t\t<FiUser/>\r\n\t\t\t\t\t\t<Button \r\n\t\t\t\t\t\t\tvariant=\"link\" \r\n\t\t\t\t\t\t\tonClick={() => this.props.showEmployeeWorkLog(cell.id)}\r\n\t\t\t\t\t\t\tstyle={{ color: \"#0000FF\" }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{cell.surname + \" \" + cell.name}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</nobr>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tconst companyFormatter = (cell, row) => {\r\n\t\t\treturn (\r\n\t\t\t\t<span className=\"d-none d-md-inline-block text-truncate\" style={{ maxWidth: \"14vw\" }}>\r\n\t\t\t\t\t{cell}\r\n\t\t\t\t</span>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst todayFormatter = (cell, row) => {\r\n\t\t\tlet badges = [];\r\n\t\t\tlet totalWorkTime = 0;\r\n\t\t\tlet totalWorkTimeConverted = {\r\n\t\t\t\thours: 0,\r\n\t\t\t\tminutes: 0,\r\n\t\t\t\tseconds: 0\r\n\t\t\t};\r\n\r\n\t\t\tconst displayOneDay = cell.endDate - cell.startDate < 86400000;\r\n\r\n\t\t\tcell.workLogs.forEach((workLog, index) => {\r\n\t\t\t\tlet workTime = 0;\r\n\t\t\t\tlet workTimeConverted = {\r\n\t\t\t\t\thours: 0,\r\n\t\t\t\t\tminutes: 0,\r\n\t\t\t\t\tseconds: 0\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(workLog.end_time === null) {\r\n\t\t\t\t\tworkLog.end_time = new Date();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Calculate each row data\r\n\t\t\t\tworkTime = new Date(workLog.end_time) - new Date(workLog.start_time);\r\n\t\t\t\tworkTimeConverted = millisecondConverter(workTime);\r\n\r\n\t\t\t\tconst workTimeStartFormatted =\r\n\t\t\t\t\taddZero(new Date(workLog.start_time).getHours()) + \":\" \r\n\t\t\t\t\t+ addZero(new Date(workLog.start_time).getMinutes());\r\n\t\t\t\t\r\n\t\t\t\tconst workTimeEndFormatted =\r\n\t\t\t\t\taddZero(new Date(workLog.end_time).getHours()) + \":\" \r\n\t\t\t\t\t+ addZero(new Date(workLog.end_time).getMinutes());\r\n\t\r\n\t\t\t\tconst workTimeFormatted =\r\n\t\t\t\t\tworkTimeConverted.hours + \" st. \" \r\n\t\t\t\t\t+ workTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\t// Calculate the total\r\n\t\t\t\ttotalWorkTime += new Date(workLog.end_time) - new Date(workLog.start_time);\r\n\t\t\t\ttotalWorkTimeConverted = millisecondConverter(totalWorkTime);\r\n\r\n\t\t\t\tif(displayOneDay) {\r\n\t\t\t\t\t// Each work log entry formatted and applied in HTML format\r\n\t\t\t\t\tbadges.push(\r\n\t\t\t\t\t\t<Row key={index} style={{ fontSize: \"14px\" }}>\r\n\t\t\t\t\t\t\t<Col xs={6}>\r\n\t\t\t\t\t\t\t\t<nobr>\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{workTimeStartFormatted}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tcell.working && index === cell.workLogs.length - 1\r\n\t\t\t\t\t\t\t\t\t\t? null\r\n\t\t\t\t\t\t\t\t\t\t: <span>\r\n\t\t\t\t\t\t\t\t\t\t\t&#8594; {workTimeEndFormatted}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</nobr>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col xs={\"auto\"} className=\"text-center\">\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tworkTimeFormatted !== null\r\n\t\t\t\t\t\t\t\t\t? <span>\r\n\t\t\t\t\t\t\t\t\t\t{workTimeFormatted}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//Total row formatted\r\n\t\t\tif(badges.length && displayOneDay) {\r\n\t\t\t\tconst totalWorkTimeFormatted =\r\n\t\t\t\ttotalWorkTimeConverted.hours + \" st. \" \r\n\t\t\t\t+ totalWorkTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\tbadges.push(\r\n\t\t\t\t\t<Row key={badges.length} style={{ fontSize: \"14px\" }}>\r\n\t\t\t\t\t\t<Col xs={6}>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={\"auto\"} className=\"text-center\" style={{ borderTop: \"solid 1px\" }}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttotalWorkTimeFormatted !== null\r\n\t\t\t\t\t\t\t\t? <span>\r\n\t\t\t\t\t\t\t\t\t<b>{totalWorkTimeFormatted}</b>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\t\t\t} else if(!displayOneDay) {\r\n\t\t\t\tconst totalWorkTimeFormatted =\r\n\t\t\t\ttotalWorkTimeConverted.hours + \" st. \" \r\n\t\t\t\t+ totalWorkTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\tbadges.push(\r\n\t\t\t\t\t<Row key={badges.length} style={{ fontSize: \"14px\" }}>\r\n\t\t\t\t\t\t<Col className=\"text-center\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttotalWorkTimeFormatted !== null\r\n\t\t\t\t\t\t\t\t? <span>\r\n\t\t\t\t\t\t\t\t\t{totalWorkTimeFormatted}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs=\"4\">\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs=\"4\">\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\treturn (badges);\r\n\t\t};\r\n\r\n\t\tconst startDateFormatted = \r\n\t\t\t  addZero(new Date(this.state.startDate).getDate()) + \".\" \r\n\t\t\t+ addZero(new Date(this.state.startDate).getMonth() + 1) + \".\" \r\n\t\t\t+ addZero(new Date(this.state.startDate).getFullYear());\r\n\r\n\r\n\t\tconst endDateFormatted =\r\n\t\t\t  addZero(new Date(this.state.endDate).getDate()) + \".\" \r\n\t\t\t+ addZero(new Date(this.state.endDate).getMonth() + 1) + \".\" \r\n\t\t\t+ addZero(new Date(this.state.endDate).getFullYear());\r\n\r\n\t\tconst dateRange = startDateFormatted + (startDateFormatted === endDateFormatted ? \"\" : \" - \" + endDateFormatted);\r\n\r\n\t\tconst columns = [{\r\n\t\t\tdataField: \"id\",\r\n\t\t\ttext: \"#\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle\",\r\n\t\t\t// hidden: true,\r\n\t\t}, {\r\n\t\t\tdataField: \"name\",\r\n\t\t\ttext: \"Darbinieks\",\r\n\t\t\tsort: true,\r\n\t\t\tsortFunc: (a, b, order) => {\r\n\t\t\t\tif(convertSpecialCharacters(a.surname) < convertSpecialCharacters(b.surname)) {\r\n\t\t\t\t\treturn order === \"asc\" ? -1 : 1;\r\n\t\t\t\t} else if(convertSpecialCharacters(a.surname) > convertSpecialCharacters(b.surname)) {\r\n\t\t\t\t\treturn order === \"asc\" ? 1 : -1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t},\r\n\t\t\tclasses: \"align-middle\",\r\n\t\t\tformatter: nameFormatter,\r\n\t\t}, {\r\n\t\t\tdataField: \"company\",\r\n\t\t\ttext: \"Uzņēmums\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle d-none d-lg-table-cell\",\r\n\t\t\theaderClasses: \"d-none d-lg-table-cell\",\r\n\t\t\tformatter: companyFormatter\r\n\t\t}, {\r\n\t\t\tdataField: \"position\",\r\n\t\t\ttext: \"Amats\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle d-none d-lg-table-cell\",\r\n\t\t\theaderClasses: \"d-none d-lg-table-cell\",\r\n\t\t\tformatter: companyFormatter\r\n\t\t}, {\r\n\t\t\tdataField: \"today\",\r\n\t\t\ttext: dateRange,\r\n\t\t\tsort: true,\r\n\t\t\tsortFunc: (a, b, order) => {\r\n\t\t\t\tif(a.workLogs.length && b.workLogs.length) {\r\n\t\t\t\t\tconst aData = a.working\r\n\t\t\t\t\t? new Date(a.workLogs[a.workLogs.length - 1].start_time)\r\n\t\t\t\t\t: new Date(a.workLogs[a.workLogs.length - 1].end_time);\r\n\r\n\t\t\t\t\tconst bData = b.working\r\n\t\t\t\t\t? new Date(b.workLogs[b.workLogs.length - 1].start_time)\r\n\t\t\t\t\t: new Date(b.workLogs[b.workLogs.length - 1].end_time);\r\n\r\n\t\t\t\t\tif(aData > bData) {\r\n\t\t\t\t\t\treturn order === \"asc\" ? 1 : -1;\r\n\t\t\t\t\t} else if(aData < bData) {\r\n\t\t\t\t\t\treturn order === \"asc\" ? -1 : 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t},\r\n\t\t\tclasses: \"align-middle\",\r\n\t\t\tformatter: todayFormatter\r\n\t\t}];\r\n\r\n\t\tconst defaultSorted = [{\r\n\t\t\tdataField: \"name\",\r\n\t\t\torder: \"asc\"\r\n\t\t}];\r\n\r\n\t\tconst onClickPageSize = (option) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tpageSize: option.page\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst sizePerPageRenderer = ({\r\n\t\t\toptions,\r\n\t\t\tcurrSizePerPage,\r\n\t\t\tonSizePerPageChange\r\n\t\t}) => (\r\n\t\t\t<Dropdown className=\"d-inline pr-2\">\r\n\t\t\t\t<Dropdown.Toggle variant=\"primary\">\r\n\t\t\t\t\t{this.state.pageSize === 9999 ? \"Viss\" : this.state.pageSize}\r\n\t\t\t\t</Dropdown.Toggle>\r\n\r\n\t\t\t\t<Dropdown.Menu>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toptions.map((option, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\t\t\tkey={index} \r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tonClickPageSize(option);\r\n\t\t\t\t\t\t\t\t\t\tonSizePerPageChange(option.page);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{option.text}\r\n\t\t\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</Dropdown.Menu>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\r\n\t\tconst pagination = paginationFactory({\r\n\t\t\tpage: 1,\r\n\t\t\talwaysShowAllBtns: true,\r\n\t\t\tshowTotal: false,\r\n\t\t\tsizePerPage : this.state.pageSize,\r\n\t\t\tsizePerPageRenderer,\r\n\t\t\tsizePerPageList: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"10\",\r\n\t\t\t\t\tvalue: 10,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"25\",\r\n\t\t\t\t\tvalue: 25,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"50\",\r\n\t\t\t\t\tvalue: 50,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"100\",\r\n\t\t\t\t\tvalue: 100,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"Viss\",\r\n\t\t\t\t\tvalue: 9999,\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\r\n\r\n\t\tconst rowStyle = (row) => {\r\n\t\t\tif(!row.commands.active) {\r\n\t\t\t\treturn { backgroundColor: \"rgba(255, 0, 0, 0.1)\" };\r\n\t\t\t}\r\n\r\n\t\t\tif(row.commands.archived) {\r\n\t\t\t\treturn { backgroundColor: \"rgba(255, 255, 0, 0.1)\" };\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<ContainerBox header={\"Atskaites\"}>\r\n\t\t\t\t<Filters \r\n\t\t\t\t\tonDataFiltered={this.onDataFiltered}\r\n\t\t\t\t\tonFilterChange={this.onFilterChange}\r\n\t\t\t\t\tfilterData={filterData => this.filterData = filterData}\r\n\t\t\t\t\tdateFilter={true}\r\n\t\t\t\t/>\r\n\t\t\t\t<BootstrapTable\r\n\t\t\t\t\tbootstrap4={ true }\r\n\t\t\t\t\tkeyField=\"id\" \r\n\t\t\t\t\tdata={ this.state.tableData } \r\n\t\t\t\t\tcolumns={ columns } \r\n\t\t\t\t\tbordered={ false }\r\n\t\t\t\t\thover={ true }\r\n\t\t\t\t\tdefaultSorted={ defaultSorted }\r\n\t\t\t\t\tremote={ { filter: true } }\r\n\t\t\t\t\tonTableChange={ this.onTableChange }\r\n\t\t\t\t\tpagination={ pagination }\r\n\t\t\t\t\trowStyle={ rowStyle }\r\n\t\t\t\t/>\r\n\t\t\t</ContainerBox>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\temployees: state.employees.employees,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowEmployeeWorkLog: (id) => dispatch(showEmployeeWorkLog(id)),\r\n\t\tshowExportExcel: () => dispatch(showExportExcel()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Employees);\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport { Form, Button, Alert, Modal, Row, Col } from \"react-bootstrap\";\r\n\r\nimport { showRegisterEmployee, hideRegisterEmployee } from \"../actions/employeeActions\";\r\n\r\nimport { addNotification, storeUpdateEmployees, addServerEmployee, awaitCard, deleteServerEmployee } from \"../utils/employeeUtils\";\r\nimport * as LOG_TYPE from \"../utils/logTypes\";\r\n\r\nconst REGISTER_STATE = {\r\n\tDATA_INPUT: 0,\r\n\tRFID_WAIT: 1,\r\n\tCOMPLETE: 2,\r\n}\r\n\r\nclass RegisterEmployee extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.initialState = {\r\n\t\t\tregistrationState: REGISTER_STATE.DATA_INPUT,\r\n\t\t\tcheckInterval: null,\r\n\t\t\tnewEmployee: {},\r\n\t\t\tname: \"\",\r\n\t\t\tsurname: \"\",\r\n\t\t\tcompany: 'SIA \"Vārpas 1\"',\r\n\t\t\tposition: \"\",\r\n\t\t\tnumber: \"\",\r\n\t\t\tpersonalCode: \"\",\r\n\t\t\taddCard: true,\r\n\t\t\tuid: null,\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\t...this.initialState\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tonNameChange = (event) => {\r\n\t\tthis.setState({ name: event.target.value });\r\n\t}\r\n\r\n\tonSurnameChange = (event) => {\r\n\t\tthis.setState({ surname: event.target.value });\r\n\t}\r\n\r\n\tonCompanyChange = (event) => {\r\n\t\tthis.setState({ company: event.target.value });\r\n\t}\r\n\r\n\tonPositionChange = (event) => {\r\n\t\tthis.setState({ position: event.target.value });\r\n\t}\r\n\r\n\tonNumberChange = (event) => {\r\n\t\tthis.setState({ number: event.target.value });\r\n\t}\r\n\r\n\tonPersonalCodeChange = (event) => {\r\n\t\tthis.setState({ personalCode: event.target.value });\r\n\t}\r\n\r\n\tonAddCardChange = () => {\r\n\t\tthis.setState({ addCard: !this.state.addCard });\r\n\t}\r\n\r\n\tonFormSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\tlet employee = {\r\n\t\t\tname: this.state.name,\r\n\t\t\tsurname: this.state.surname,\r\n\t\t\tcompany: this.state.company,\r\n\t\t\tposition: this.state.position,\r\n\t\t\tnumber: this.state.number,\r\n\t\t\tpersonalCode: this.state.personalCode,\r\n\t\t\tuid: this.state.uid,\r\n\t\t}\r\n\t\t\r\n\t\tif(this.state.registrationState === REGISTER_STATE.DATA_INPUT) {\r\n\t\t\tif(this.state.addCard) {\r\n\t\t\t\tthis.setState({ \r\n\t\t\t\t\tregistrationState: REGISTER_STATE.RFID_WAIT,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tawaitCard().then((res) => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tuid: res.data.uid,\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\temployee = {\r\n\t\t\t\t\t\t\t...employee,\r\n\t\t\t\t\t\t\tuid: res.data.uid,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\taddServerEmployee(employee).then((res) => {\r\n\t\t\t\t\t\t\tstoreUpdateEmployees();\r\n\t\t\t\t\t\t\taddNotification(LOG_TYPE.LOG_ADD_EMPLOYEE, { user: this.props.user.username, id: res.data.id });\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tregistrationState: REGISTER_STATE.COMPLETE,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\taddServerEmployee(employee).then((res) => {\r\n\t\t\t\t\tstoreUpdateEmployees();\r\n\t\t\t\t\taddNotification(LOG_TYPE.LOG_ADD_EMPLOYEE, { user: this.props.user.username, id: res.data.id });\r\n\t\t\t\t\tif(res.data) {\r\n\t\t\t\t\t\tthis.setState({ \r\n\t\t\t\t\t\t\tregistrationState: REGISTER_STATE.COMPLETE,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if(this.state.registrationState === REGISTER_STATE.COMPLETE) {\r\n\t\t\tthis.props.hideRegisterEmployee();\r\n\t\t}\r\n\t}\r\n\r\n\thideRegisterEmployeeAndDelete = () => {\r\n\t\tif(this.state.registrationState >= REGISTER_STATE.RFID_WAIT) {\r\n\t\t\tdeleteServerEmployee(this.state.newEmployee.id);\r\n\t\t\tthis.props.hideRegisterEmployee();\r\n\t\t}\r\n\t}\r\n\r\n\tonExited = () => {\r\n\t\tthis.setState({\r\n\t\t\t...this.initialState\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal \r\n\t\t\t\tshow={this.props.registerEmployee.show} \r\n\t\t\t\tonHide={() => this.props.hideRegisterEmployee()}\r\n\t\t\t\tonExit={this.deleteAndCancel}\r\n\t\t\t\tonExited={this.onExited}\r\n\t\t\t>\r\n\t\t\t\t<Form onSubmit={this.onFormSubmit}>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>Pievienot Darbinieku</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\t\t\t\t<Modal.Body>\r\n\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>* Vārds</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\t\trequired \r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.registrationState !== REGISTER_STATE.DATA_INPUT} \r\n\t\t\t\t\t\t\t\t\tvalue={this.state.name} \r\n\t\t\t\t\t\t\t\t\tonChange={this.onNameChange}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Vārds\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>* Uzvārds</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\t\trequired \r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.registrationState !== REGISTER_STATE.DATA_INPUT} \r\n\t\t\t\t\t\t\t\t\tvalue={this.state.surname} \r\n\t\t\t\t\t\t\t\t\tonChange={this.onSurnameChange}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Uzvārds\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>Personas Kods</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.registrationState !== REGISTER_STATE.DATA_INPUT} \r\n\t\t\t\t\t\t\t\t\tvalue={this.state.personalCode} \r\n\t\t\t\t\t\t\t\t\tonChange={this.onPersonalCodeChange}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Personas Kods\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>Telefona Numurs</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\t\tdisabled={this.state.registrationState !== REGISTER_STATE.DATA_INPUT} \r\n\t\t\t\t\t\t\t\t\tvalue={this.state.number} \r\n\t\t\t\t\t\t\t\t\tonChange={this.onNumberChange}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Telefona Numurs\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Uzņēmums</Form.Label>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tas=\"select\"\r\n\t\t\t\t\t\t\tdisabled={this.state.registrationState !== REGISTER_STATE.DATA_INPUT}  \r\n\t\t\t\t\t\t\tonChange={this.onCompanyChange}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option>SIA \"Vārpas 1\"</option>\r\n\t\t\t\t\t\t\t<option>SIA \"Adeptus Renewable Energy\"</option>\r\n\t\t\t\t\t\t\t<option>SIA \"Valkas koks\"</option>\r\n\t\t\t\t\t\t</Form.Control>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Amats</Form.Label>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tdisabled={this.state.registrationState !== REGISTER_STATE.DATA_INPUT} \r\n\t\t\t\t\t\t\tvalue={this.state.position} \r\n\t\t\t\t\t\t\tonChange={this.onPositionChange}\r\n\t\t\t\t\t\t\tplaceholder=\"Darba Amats\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group controlId=\"formBasicChecbox\">\r\n\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\ttype=\"checkbox\" \r\n\t\t\t\t\t\t\tlabel=\"Turpināt reģistrāciju pievienojot NFC karti\"\r\n\t\t\t\t\t\t\tname=\"addCard\"\r\n\t\t\t\t\t\t\tchecked={this.state.addCard}\r\n\t\t\t\t\t\t\tonChange={this.onAddCardChange}/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Alert variant={\"primary\"} show={this.state.registrationState === REGISTER_STATE.RFID_WAIT} onClose={() => null}>\r\n\t\t\t\t\t\tNoskenējiet vēlamo kartiņu.\r\n\t\t\t\t\t</Alert>\r\n\r\n\t\t\t\t\t<Alert variant={\"success\"} show={this.state.registrationState === REGISTER_STATE.COMPLETE} onClose={() => null}>\r\n\t\t\t\t\t\tDarbinieks veiksmīgi pievienots darbinieku sarakstam.\r\n\t\t\t\t\t</Alert>\r\n\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Buttons \r\n\t\t\t\t\t\tregistrationState={this.state.registrationState}\r\n\t\t\t\t\t\thideRegisterEmployee={this.props.hideRegisterEmployee}\r\n\t\t\t\t\t\thideRegisterEmployeeAndDelete={this.hideRegisterEmployeeAndDelete}\r\n\t\t\t\t\t\taddCard={this.state.addCard}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction Buttons(props) {\r\n\tswitch(props.registrationState) {\r\n\t\tdefault:\r\n\t\tcase REGISTER_STATE.DATA_INPUT: {\r\n\t\t\treturn(\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Button variant={ props.addCard ? \"primary\" : \"success\"} type=\"submit\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tprops.addCard \r\n\t\t\t\t\t\t\t? \"Tālāk\"\r\n\t\t\t\t\t\t\t: \"Pabeigt\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t}\r\n\t\tcase REGISTER_STATE.RFID_WAIT: {\r\n\t\t\treturn(\r\n\t\t\t\tnull\r\n\t\t\t);\r\n\t\t}\r\n\t\tcase REGISTER_STATE.COMPLETE: {\r\n\t\t\treturn(\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Button variant=\"success\" type=\"submit\">\r\n\t\t\t\t\t\tPabeigt\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\temployees: state.employees.employees,\r\n\t\tregisterEmployee: state.employees.registerEmployee,\r\n\t\tuser: state.employees.user,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowRegisterEmployee: () => dispatch(showRegisterEmployee()),\r\n\t\thideRegisterEmployee: () => dispatch(hideRegisterEmployee()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(RegisterEmployee);\r\n","import React from \"react\";\r\nimport { Row, Col } from \"react-bootstrap\";\r\n\r\nconst NotFound = () => {\r\n\treturn (\r\n\t\t<Row>\r\n\t\t\t<Col className=\"text-center mt-4 mb-4\">\r\n\t\t\t\t<h1>404</h1>\r\n\t\t\t\t<h5>Lapa netika atrasta...</h5>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t);\r\n}\r\n\r\nexport default NotFound;\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport { Table, Modal, Dropdown, DropdownButton, Col, Row, Form, Button } from \"react-bootstrap\";\r\nimport BoostrapDatePicker from \"./BoostrapDatePicker\";\r\n\r\nimport { workLogUpdateInterval } from \"../utils/config\";\r\n\r\nimport { hideEmployeeWorkLog } from \"../actions/employeeActions\";\r\n\r\nimport { getServerEmployee, getServerEmployeeWorkLog, deleteServerWorkLog, editServerWorkLog } from \"../utils/employeeUtils\";\r\nimport { addZero, millisecondConverter } from \"../utils/commonUtils\";\r\n\r\nimport { FiTrash, FiEdit, FiX, FiCheck } from \"react-icons/fi\";\r\n\r\nclass ViewEmployee extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tconst startDate = new Date();\r\n\t\tstartDate.setHours(0, 0, 0);\r\n\r\n\t\tconst endDate = new Date();\r\n\t\tendDate.setHours(23, 59, 59);\r\n\r\n\t\tthis.state = {\r\n\t\t\temployee: {\r\n\t\t\t\tname: \"Ielādē...\",\r\n\t\t\t\tsurname: \" \"\r\n\t\t\t},\r\n\t\t\tworkLog: [],\r\n\t\t\teditWorkLog: {\r\n\t\t\t\tid: null,\r\n\t\t\t\tstartDate: null,\r\n\t\t\t\tendDate: null,\r\n\t\t\t\tworking: false,\r\n\t\t\t},\r\n\t\t\tresults: 0,\r\n\t\t\tupdateInterval: null,\r\n\t\t\tstartDate: startDate,\r\n\t\t\tendDate: endDate,\r\n\t\t\tdropdown: {\r\n\t\t\t\tcurrentFilter: \"Šodiena\",\r\n\t\t\t\tfilters: [\"Šodiena\", \"Vakardiena\", \"Pēdējās 7 dienas\", \"Pēdējās 30 dienas\"]\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (this.props.employeeWorkLog.id !== prevProps.employeeWorkLog.id && this.props.employeeWorkLog.id !== null) {\r\n\t\t\tthis.fetchWorkLog();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.state.updateInterval);\r\n\t}\r\n\r\n\tfetchWorkLog = () => {\r\n\t\tgetServerEmployee(this.props.employeeWorkLog.id).then((res) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\temployee: res.data\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tgetServerEmployeeWorkLog(this.props.employeeWorkLog.id, \"DESC\").then((res) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tworkLog: res.data\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tclearInterval(this.state.updateInterval);\r\n\t\tthis.setState({\r\n\t\t\tupdateInterval: setInterval(() => {\r\n\t\t\t\tgetServerEmployee(this.props.employeeWorkLog.id).then((res) => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\temployee: res.data\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgetServerEmployeeWorkLog(this.props.employeeWorkLog.id, \"DESC\").then((res) => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tworkLog: res.data\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}, workLogUpdateInterval)\r\n\t\t});\r\n\t}\r\n\r\n\tonHide = () => {\r\n\t\tclearInterval(this.state.updateInterval);\r\n\t\tthis.props.hideEmployeeWorkLog();\r\n\t}\r\n\r\n\tonExited = () => {\r\n\t\tthis.setState({\r\n\t\t\temployee: {\r\n\t\t\t\tname: \"Ielādē...\",\r\n\t\t\t\tsurname: \" \"\r\n\t\t\t},\r\n\t\t\tworkLog: [],\r\n\t\t\teditWorkLog: {\r\n\t\t\t\tid: null,\r\n\t\t\t\tstartDate: null,\r\n\t\t\t\tendDate: null,\r\n\t\t\t\tworking: false,\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\thandleDateChangeStart = (date) => {\r\n\t\tconst startOfDay = new Date(date);\r\n\t\tstartOfDay.setHours(0, 0, 0);\r\n\t\tthis.setState({\r\n\t\t\tstartDate: startOfDay,\r\n\t\t});\r\n\t}\r\n\r\n\thandleDateChangeEnd = (date) => {\r\n\t\tconst endOfDay = new Date(date);\r\n\t\tendOfDay.setHours(23, 59, 59);\r\n\t\tthis.setState({\r\n\t\t\tendDate: endOfDay,\r\n\t\t});\r\n\t}\r\n\r\n\tonClickFilter = (index) => {\r\n\t\tswitch (index) {\r\n\t\t\tcase 0: {\r\n\t\t\t\tthis.handleDateChangeStart(new Date());\r\n\t\t\t\tthis.handleDateChangeEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 1: {\r\n\t\t\t\tconst yesterday = new Date();\r\n\t\t\t\tyesterday.setDate(yesterday.getDate() - 1);\r\n\t\t\t\tthis.handleDateChangeStart(yesterday);\r\n\t\t\t\tthis.handleDateChangeEnd(yesterday);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 2: {\r\n\t\t\t\tconst last7Days = new Date();\r\n\t\t\t\tlast7Days.setDate(last7Days.getDate() - 7);\r\n\t\t\t\tthis.handleDateChangeStart(last7Days);\r\n\t\t\t\tthis.handleDateChangeEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 3: {\r\n\t\t\t\tconst last30Days = new Date();\r\n\t\t\t\tlast30Days.setDate(last30Days.getDate() - 30);\r\n\t\t\t\tthis.handleDateChangeStart(last30Days);\r\n\t\t\t\tthis.handleDateChangeEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault: {\r\n\t\t\t\tthis.handleDateChangeStart(new Date());\r\n\t\t\t\tthis.handleDateChangeEnd(new Date());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tdropdown: {\r\n\t\t\t\t...this.state.dropdown,\r\n\t\t\t\tcurrentFilter: this.state.dropdown.filters[index],\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tdeleteWorkLog = (id, working, employeeId) => {\r\n\t\tdeleteServerWorkLog(id, working, employeeId).then(() => {\r\n\t\t\tthis.fetchWorkLog();\r\n\t\t});\r\n\t}\r\n\r\n\teditWorkLog = (id, startDate, endDate, working) => {\r\n\t\tthis.setState({\r\n\t\t\teditWorkLog: {\r\n\t\t\t\t...this.state.editWorkLog,\r\n\t\t\t\tid: id,\r\n\t\t\t\tstartDate: startDate,\r\n\t\t\t\tendDate: endDate,\r\n\t\t\t\tworking: working,\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tconfirmEditWorkLog = () => {\r\n\t\teditServerWorkLog(\r\n\t\t\tthis.state.editWorkLog.id,\r\n\t\t\tthis.state.editWorkLog.startDate,\r\n\t\t\tthis.state.editWorkLog.endDate,\r\n\t\t\tthis.state.editWorkLog.working).then(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\teditWorkLog: {\r\n\t\t\t\t\t\tid: null,\r\n\t\t\t\t\t\tstartDate: null,\r\n\t\t\t\t\t\tendDate: null,\r\n\t\t\t\t\t\tworking: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.fetchWorkLog();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\r\n\tcancelEditWorkLog = () => {\r\n\t\tthis.setState({\r\n\t\t\teditWorkLog: {\r\n\t\t\t\tid: null,\r\n\t\t\t\tstartDate: null,\r\n\t\t\t\tendDate: null,\r\n\t\t\t\tworking: false,\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tonStartDateChange = (date) => {\r\n\t\tthis.setState({\r\n\t\t\teditWorkLog: {\r\n\t\t\t\t...this.state.editWorkLog,\r\n\t\t\t\tstartDate: date\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonEndDateChange = (date) => {\r\n\t\tthis.setState({\r\n\t\t\teditWorkLog: {\r\n\t\t\t\t...this.state.editWorkLog,\r\n\t\t\t\tendDate: date\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet filterResults = 0;\r\n\t\tlet lastStartDate = null;\r\n\t\tlet totalDayWorkTime = 0;\r\n\t\tlet totalWorkTime = 0;\r\n\t\tlet totalDays = 0;\r\n\r\n\t\tconst workLogFiltered = this.state.workLog\r\n\t\t\t.filter((log) => {\r\n\t\t\t\t// Filter out all rows which do not match the date\r\n\t\t\t\tconst startTimePure = new Date(log.start_time);\r\n\r\n\t\t\t\tif (startTimePure < this.state.startDate || startTimePure > this.state.endDate) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tfilterResults++;\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\r\n\t\tconst workLog = workLogFiltered\r\n\t\t\t.map((log, index) => {\r\n\t\t\t\t// Format the remaining filtered work logs\r\n\t\t\t\tconst stillWorking = log.end_time === null ? true : false;\r\n\t\t\t\tconst startTimePure = new Date(log.start_time);\r\n\t\t\t\tconst endTimePure = stillWorking ? new Date() : new Date(log.end_time);\r\n\r\n\t\t\t\tconst startTimeFormatted =\r\n\t\t\t\t\taddZero(startTimePure.getHours()) + \":\"\r\n\t\t\t\t\t+ addZero(startTimePure.getMinutes());\r\n\r\n\t\t\t\tconst endTimeFormatted = stillWorking ? \" - \" :\r\n\t\t\t\t\taddZero(endTimePure.getHours()) + \":\"\r\n\t\t\t\t\t+ addZero(endTimePure.getMinutes());\r\n\r\n\t\t\t\tconst workTime = millisecondConverter(endTimePure - startTimePure);\r\n\t\t\t\ttotalDayWorkTime += (endTimePure - startTimePure);\r\n\t\t\t\ttotalWorkTime += (endTimePure - startTimePure);\r\n\t\t\t\tconst workTimeFormatted =\r\n\t\t\t\t\t+ workTime.hours + \" st. \"\r\n\t\t\t\t\t+ workTime.minutes + \" min. \";\r\n\r\n\t\t\t\tconst workingStyle = {\r\n\t\t\t\t\tbackgroundColor: \"#ffffe6\",\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst commands = (\r\n\t\t\t\t\t<Row className=\"text-center\">\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.editWorkLog.id === log.id\r\n\t\t\t\t\t\t\t\t\t? <>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tsize={\"sm\"}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.confirmEditWorkLog()}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<FiCheck className=\"mb-1\" />\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tsize={\"sm\"}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.cancelEditWorkLog()}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<FiX className=\"mb-1\" />\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t: <>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tsize={\"sm\"}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.editWorkLog(log.id, log.start_time, log.end_time, stillWorking)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<FiEdit className=\"mb-1\" />\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tsize={\"sm\"}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.deleteWorkLog(log.id, stillWorking, log.employee_id)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<FiTrash className=\"mb-1\" />\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\r\n\t\t\t\tconst workRow = (\r\n\t\t\t\t\t<tr className=\"text-center\" style={stillWorking ? workingStyle : null}>\r\n\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.editWorkLog.id === log.id\r\n\t\t\t\t\t\t\t\t\t? <BoostrapDatePicker\r\n\t\t\t\t\t\t\t\t\t\tdateFormat=\"dd.MM.yyyy. HH:mm\"\r\n\t\t\t\t\t\t\t\t\t\tselected={new Date(this.state.editWorkLog.startDate)}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onStartDateChange}\r\n\t\t\t\t\t\t\t\t\t\ttimeIntervals={1}\r\n\t\t\t\t\t\t\t\t\t\tshowTimeSelect\r\n\t\t\t\t\t\t\t\t\t\ttimeFormat=\"HH:mm\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t: startTimeFormatted\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.editWorkLog.id === log.id && !stillWorking\r\n\t\t\t\t\t\t\t\t\t? <BoostrapDatePicker\r\n\t\t\t\t\t\t\t\t\t\tdateFormat=\"dd.MM.yyyy. HH:mm\"\r\n\t\t\t\t\t\t\t\t\t\tselected={new Date(this.state.editWorkLog.endDate)}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onEndDateChange}\r\n\t\t\t\t\t\t\t\t\t\ttimeIntervals={1}\r\n\t\t\t\t\t\t\t\t\t\tshowTimeSelect\r\n\t\t\t\t\t\t\t\t\t\ttimeFormat=\"HH:mm\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t: endTimeFormatted\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>{workTimeFormatted}</td>\r\n\t\t\t\t\t\t<td>{commands}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlet dateRow = null;\r\n\t\t\t\tlet totalDayRow = null;\r\n\t\t\t\tlet totalRow = null;\r\n\r\n\t\t\t\tif (lastStartDate === null || lastStartDate !== startTimePure.getDate()) {\r\n\t\t\t\t\tlastStartDate = startTimePure.getDate();\r\n\r\n\t\t\t\t\tconst dateFormatted =\r\n\t\t\t\t\t\taddZero(startTimePure.getDate()) + \".\"\r\n\t\t\t\t\t\t+ addZero(startTimePure.getMonth() + 1) + \".\"\r\n\t\t\t\t\t\t+ addZero(startTimePure.getFullYear());\r\n\r\n\t\t\t\t\tdateRow = (\r\n\t\t\t\t\t\t<tr className=\"bg-dark text-light\">\r\n\t\t\t\t\t\t\t<td style={{ width: \"100px\" }}><b>{dateFormatted}</b></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet nextStartDate = null;\r\n\r\n\t\t\t\tif (workLogFiltered[index + 1]) {\r\n\t\t\t\t\tnextStartDate = new Date(workLogFiltered[index + 1].start_time).getDate();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (nextStartDate !== startTimePure.getDate()) {\r\n\t\t\t\t\tconst totalDayWorkTimeConverted = millisecondConverter(totalDayWorkTime);\r\n\r\n\t\t\t\t\tconst totalDayWorkTimeFormatted =\r\n\t\t\t\t\t\t+ totalDayWorkTimeConverted.hours + \" st. \"\r\n\t\t\t\t\t\t+ totalDayWorkTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\t\ttotalDayRow = (\r\n\t\t\t\t\t\t<tr className=\"bg-light text-dark\">\r\n\t\t\t\t\t\t\t<td><b>KOPĀ</b></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td className=\"text-center\"><b>{totalDayWorkTimeFormatted}</b></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\ttotalDays++;\r\n\t\t\t\t\ttotalDayWorkTime = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (totalDays > 1 && nextStartDate === null) {\r\n\t\t\t\t\tconst totalWorkTimeConverted = millisecondConverter(totalWorkTime);\r\n\r\n\t\t\t\t\tconst totalWorkTimeFormatted =\r\n\t\t\t\t\t\t+ totalWorkTimeConverted.hours + \" st. \"\r\n\t\t\t\t\t\t+ totalWorkTimeConverted.minutes + \" min. \";\r\n\r\n\t\t\t\t\tconst fromDateFormatted =\r\n\t\t\t\t\t\taddZero(this.state.startDate.getDate()) + \".\"\r\n\t\t\t\t\t\t+ addZero(this.state.startDate.getMonth() + 1) + \".\"\r\n\t\t\t\t\t\t+ addZero(this.state.startDate.getFullYear());\r\n\r\n\t\t\t\t\tconst toDateFormatted =\r\n\t\t\t\t\t\taddZero(this.state.endDate.getDate()) + \".\"\r\n\t\t\t\t\t\t+ addZero(this.state.endDate.getMonth() + 1) + \".\"\r\n\t\t\t\t\t\t+ addZero(this.state.endDate.getFullYear());\r\n\r\n\r\n\t\t\t\t\ttotalRow = (\r\n\t\t\t\t\t\t<tr className=\"text-dark\">\r\n\t\t\t\t\t\t\t<td colSpan={2}><b>{fromDateFormatted} - {toDateFormatted}</b></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td className=\"text-center\"><b>{totalWorkTimeFormatted}</b></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\ttotalWorkTime = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<tbody key={index} className=\"vertical-align-center\">\r\n\t\t\t\t\t\t{dateRow}\r\n\t\t\t\t\t\t{workRow}\r\n\t\t\t\t\t\t{totalDayRow}\r\n\t\t\t\t\t\t{totalRow}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\tshow={this.props.employeeWorkLog.show}\r\n\t\t\t\tonHide={this.onHide}\r\n\t\t\t\tonExited={this.onExited}\r\n\t\t\t\tsize={\"lg\"}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title className=\"w-100\">\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<h4>\r\n\t\t\t\t\t\t\t\t\t{this.state.employee.surname + \" \" + this.state.employee.name}\r\n\t\t\t\t\t\t\t\t\t{this.state.employee.personalCode\r\n\t\t\t\t\t\t\t\t\t\t? \" (\" + this.state.employee.personalCode + \")\"\r\n\t\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<h5 className=\"text-secondary\">{this.state.employee.company}</h5>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<h5 className=\"text-secondary\">{this.state.employee.position}</h5>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col className=\"text-right\">\r\n\t\t\t\t\t\t\t\t<h5 className=\"text-secondary\">\r\n\t\t\t\t\t\t\t\t\t{this.state.employee.number\r\n\t\t\t\t\t\t\t\t\t\t? \"Tel. \" + this.state.employee.number\r\n\t\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<Form.Group as={Row}>\r\n\t\t\t\t\t\t\t\t\t<Form.Label column xs={2}>No</Form.Label>\r\n\t\t\t\t\t\t\t\t\t<Col xs={10}>\r\n\t\t\t\t\t\t\t\t\t\t<BoostrapDatePicker\r\n\t\t\t\t\t\t\t\t\t\t\tdateFormat=\"dd.MM.yyyy.\"\r\n\t\t\t\t\t\t\t\t\t\t\tselected={this.state.startDate}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleDateChangeStart}\r\n\t\t\t\t\t\t\t\t\t\t\tmaxDate={new Date()}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<Form.Group as={Row}>\r\n\t\t\t\t\t\t\t\t\t<Form.Label column xs={2}>Līdz</Form.Label>\r\n\t\t\t\t\t\t\t\t\t<Col xs={10}>\r\n\t\t\t\t\t\t\t\t\t\t<BoostrapDatePicker\r\n\t\t\t\t\t\t\t\t\t\t\tdateFormat=\"dd.MM.yyyy.\"\r\n\t\t\t\t\t\t\t\t\t\t\tselected={this.state.endDate}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleDateChangeEnd}\r\n\t\t\t\t\t\t\t\t\t\t\tminDate={this.state.startDate}\r\n\t\t\t\t\t\t\t\t\t\t\tmaxDate={new Date()}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t<Col className=\"d-flex flex-column\">\r\n\t\t\t\t\t\t\t\t<DropdownButton\r\n\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t\t\t\t\ttitle={this.state.dropdown.currentFilter}\r\n\t\t\t\t\t\t\t\t\tclassName=\"text-right mt-auto mb-3\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tthis.state.dropdown.filters.map((filter, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn <Dropdown.Item key={index} onClick={() => this.onClickFilter(index)}>{filter}</Dropdown.Item>\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</DropdownButton>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.workLog.length && filterResults\r\n\t\t\t\t\t\t\t? (\r\n\t\t\t\t\t\t\t\t<Table size=\"sm\">\r\n\t\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t\t<tr className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Ienāca</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Izgāja</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Nostrādāja</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t{workLog}\r\n\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\tNetika atrasts neviens ieraksts...\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\temployeeWorkLog: state.employees.employeeWorkLog,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\thideEmployeeWorkLog: () => dispatch(hideEmployeeWorkLog()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(ViewEmployee);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Button } from \"react-bootstrap\";\r\n\r\nimport { showDeleteEmployee, hideDeleteEmployee } from \"../actions/employeeActions\";\r\n\r\nimport { storeUpdateEmployees, deleteServerEmployee } from \"../utils/employeeUtils\";\r\n\r\nclass DeleteEmployee extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal \r\n\t\t\t\tshow={this.props.deleteEmployee.show}\r\n\t\t\t\tonHide={() => this.props.hideDeleteEmployee()}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>{this.props.deleteEmployee.employee.name + \" \" + this.props.deleteEmployee.employee.surname}</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\tVai esiet pārliecināts ka vēlaties dzēst šo darbinieku?\r\n\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button variant=\"danger\" onClick={() => {\r\n\t\t\t\t\t\tdeleteServerEmployee(this.props.deleteEmployee.employee.id).then(() => {\r\n\t\t\t\t\t\t\tstoreUpdateEmployees();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.props.hideDeleteEmployee();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\tDzēst\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tdeleteEmployee: state.employees.deleteEmployee,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowDeleteEmployee: () => dispatch(showDeleteEmployee()),\r\n\t\thideDeleteEmployee: () => dispatch(hideDeleteEmployee()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(DeleteEmployee);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Button, Form, Row, Col, Alert } from \"react-bootstrap\";\r\n\r\nimport { showEditEmployee, hideEditEmployee } from \"../actions/employeeActions\";\r\n\r\nimport {\r\n\tsetEmployeeUID,\r\n\tremoveEmployeeUID,\r\n\tawaitCard,\r\n\tstoreUpdateEmployee,\r\n\teditServerEmployee,\r\n} from \"../utils/employeeUtils\";\r\n\r\nimport {\r\n\taddZero\r\n} from \"../utils/commonUtils\";\r\n\r\nconst CHANGE_CARD_STATE = {\r\n\tOFF: 0,\r\n\tRFID_WAIT: 1,\r\n\tCOMPLETE: 2,\r\n\tDELETED: 3,\r\n}\r\n\r\nclass EditEmployee extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.initialState = {\r\n\t\t\temployee: {\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tsurname: \"\",\r\n\t\t\t\tpersonalCode: \"\",\r\n\t\t\t\tcompany: \"\",\r\n\t\t\t\tposition: \"\",\r\n\t\t\t\tnumber: \"\",\r\n\t\t\t\tuid: \"\"\r\n\t\t\t},\r\n\t\t\tchangeCard: {\r\n\t\t\t\tstatus: 0,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\t...this.initialState\r\n\t\t}\r\n\t}\r\n\r\n\tonEnter = () => {\r\n\t\tthis.setState({\r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\t...this.props.editEmployee.employee,\r\n\t\t\t}\r\n\t\t}, () => {\r\n\t\t\tif(!this.state.employee.company) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\temployee: {\r\n\t\t\t\t\t\t...this.state.employee,\r\n\t\t\t\t\t\tcompany: 'SIA \"Vārpas 1\"',\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonHide = () => {\r\n\t\tthis.props.hideEditEmployee();\r\n\t\tthis.setState({\r\n\t\t\t...this.initialState\r\n\t\t});\r\n\t}\r\n\r\n\tonNameChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\tname: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonSurnameChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\tsurname: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonPersonalCodeChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\tpersonalCode: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonCompanyChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\tcompany: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonPositionChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\tposition: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonNumberChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\temployee: {\r\n\t\t\t\t...this.state.employee,\r\n\t\t\t\tnumber: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tchangeCard = (id) => {\r\n\t\tthis.setState({\r\n\t\t\tchangeCard: {\r\n\t\t\t\tstatus: CHANGE_CARD_STATE.RFID_WAIT\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tawaitCard().then((res) => {\r\n\t\t\tif(res.data) {\r\n\t\t\t\tsetEmployeeUID(res.data.uid, id).then(() => {\r\n\t\t\t\t\tstoreUpdateEmployee(id);\r\n\t\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\temployee: {\r\n\t\t\t\t\t\t\t...this.state.employee,\r\n\t\t\t\t\t\t\tuid: res.data.uid,\r\n\t\t\t\t\t\t\tuid_added: new Date(),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tchangeCard: {\r\n\t\t\t\t\t\t\tstatus: CHANGE_CARD_STATE.COMPLETE\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tchangeCard: {\r\n\t\t\t\t\t\tstatus: CHANGE_CARD_STATE.OFF\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdeleteCard = (id) => {\r\n\t\tremoveEmployeeUID(id).then(() => {\r\n\t\t\tstoreUpdateEmployee(id);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\temployee: {\r\n\t\t\t\t\t...this.state.employee,\r\n\t\t\t\t\tuid: \"N/A\",\r\n\t\t\t\t\tuid_added: null,\r\n\t\t\t\t},\r\n\t\t\t\tchangeCard: {\r\n\t\t\t\t\tstatus: CHANGE_CARD_STATE.DELETED\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst uidAddedDate = new Date(this.state.employee.uid_added);\r\n\t\tconst uidAdded = \r\n\t\t\taddZero(uidAddedDate.getDate()) + \".\" \r\n\t\t\t+ addZero(uidAddedDate.getMonth() + 1) + \".\" \r\n\t\t\t+ addZero(uidAddedDate.getFullYear());\r\n\r\n\t\treturn (\r\n\t\t\t<Modal \r\n\t\t\t\tshow={this.props.editEmployee.show}\r\n\t\t\t\tonHide={() => this.onHide()}\r\n\t\t\t\tonEnter={() => this.onEnter()}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>{this.props.editEmployee.employee.name + \" \" + this.props.editEmployee.employee.surname}</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>* Vārds</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control required value={this.state.employee.name} onChange={this.onNameChange}/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>* Uzvārds</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control required value={this.state.employee.surname} onChange={this.onSurnameChange}/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>Personas Kods</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control value={this.state.employee.personalCode} onChange={this.onPersonalCodeChange}/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Label>Telefona Numurs</Form.Label>\r\n\t\t\t\t\t\t\t\t<Form.Control value={this.state.employee.number} onChange={this.onNumberChange}/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Uzņēmums</Form.Label>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tas=\"select\"\r\n\t\t\t\t\t\t\tonChange={this.onCompanyChange}\r\n\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\tthis.state.employee.company\r\n\t\t\t\t\t\t\t\t? this.state.employee.company\r\n\t\t\t\t\t\t\t\t: 'SIA \"Vārpas 1\"'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value='SIA \"Vārpas 1\"'>SIA \"Vārpas 1\"</option>\r\n\t\t\t\t\t\t\t<option value='SIA \"Adeptus Renewable Energy\"'>SIA \"Adeptus Renewable Energy\"</option>\r\n\t\t\t\t\t\t\t<option value='SIA \"Valkas koks\"'>SIA \"Valkas koks\"</option>\r\n\t\t\t\t\t\t</Form.Control>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Amats</Form.Label>\r\n\t\t\t\t\t\t<Form.Control value={this.state.employee.position} onChange={this.onPositionChange}/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Row}>\r\n\t\t\t\t\t\t<Form.Label column xs={\"auto\"}>UID (NFC Karte)</Form.Label>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\tdisabled \r\n\t\t\t\t\t\t\t\tvalue={this.state.employee.uid ? this.state.employee.uid : \"N/A\"}\r\n\t\t\t\t\t\t\t\tclassName=\"text-center\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={\"auto\"}>\r\n\t\t\t\t\t\t\t<Button variant=\"link\" onClick={() => this.deleteCard(this.props.editEmployee.employee.id)}>Dzēst</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={\"auto\"}>\r\n\t\t\t\t\t\t\t<Button variant=\"link\" onClick={() => this.changeCard(this.props.editEmployee.employee.id)}>Mainīt</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.employee.uid_added\r\n\t\t\t\t\t\t? <Form.Group as={Row}>\r\n\t\t\t\t\t\t\t<Form.Label column>Karte reģistrēta: { uidAdded }</Form.Label>\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t<Alert \r\n\t\t\t\t\t\tvariant={\"primary\"} \r\n\t\t\t\t\t\tshow={\r\n\t\t\t\t\t\t\tthis.state.changeCard.status === CHANGE_CARD_STATE.RFID_WAIT\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\tonClose={() => null}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tNoskenējiet vēlamo kartiņu.\r\n\t\t\t\t\t</Alert>\r\n\r\n\t\t\t\t\t<Alert \r\n\t\t\t\t\t\tvariant={\"success\"} \r\n\t\t\t\t\t\tshow={\r\n\t\t\t\t\t\t\tthis.state.changeCard.status === CHANGE_CARD_STATE.COMPLETE\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\tonClose={() => null}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tDarbiniekam karte nomainīta.\r\n\t\t\t\t\t</Alert>\r\n\r\n\t\t\t\t\t<Alert \r\n\t\t\t\t\t\tvariant={\"danger\"} \r\n\t\t\t\t\t\tshow={\r\n\t\t\t\t\t\t\tthis.state.changeCard.status === CHANGE_CARD_STATE.DELETED\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\tonClose={() => null}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tDarbinieka karte dzēsta.\r\n\t\t\t\t\t</Alert>\r\n\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button variant=\"success\" onClick={() => {\r\n\t\t\t\t\t\tconst employeeId = this.state.employee.id;\r\n\t\t\t\t\t\teditServerEmployee(this.state.employee).then(() => {\r\n\t\t\t\t\t\t\tstoreUpdateEmployee(employeeId);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.props.hideEditEmployee();\r\n\t\t\t\t\t\tthis.onHide();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\tRediģēt\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\teditEmployee: state.employees.editEmployee,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowEditEmployee: () => dispatch(showEditEmployee()),\r\n\t\thideEditEmployee: () => dispatch(hideEditEmployee()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(EditEmployee);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Button, Row, Col, Table, Form } from \"react-bootstrap\";\r\nimport BoostrapDatePicker from \"./BoostrapDatePicker\";\r\nimport download from \"downloadjs\";\r\n\r\nimport { showExportExcel, hideExportExcel } from \"../actions/employeeActions\";\r\n\r\nimport { exportServerEmployees } from \"../utils/employeeUtils\";\r\n\r\nclass ExportExcel extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tmonth: new Date(),\r\n\t\t\temployeeList: [],\r\n\t\t\tcheckAll: false,\r\n\t\t\tincludeNoHours: false,\r\n\t\t\tincludeInactive: false,\r\n\t\t\tincludeArchived: false\r\n\t\t}\r\n\t}\r\n\r\n\thandleDateChange = (date) => {\r\n\t\tthis.setState({\r\n\t\t\tmonth: date,\r\n\t\t});\r\n\t}\r\n\r\n\tonToggleIncludeNoHours = () => {\r\n\t\tthis.setState({\r\n\t\t\tincludeNoHours: !this.state.includeNoHours\r\n\t\t});\r\n\t}\r\n\r\n\tonToggleIncludeInactive = () => {\r\n\t\tthis.setState({\r\n\t\t\tincludeInactive: !this.state.includeInactive\r\n\t\t});\r\n\t}\r\n\r\n\tonToggleIncludeArchived = () => {\r\n\t\tthis.setState({\r\n\t\t\tincludeArchived: !this.state.includeArchived\r\n\t\t});\r\n\t}\r\n\r\n\tonEmployeeCheck = (index) => {\r\n\t\tconst newList = this.state.employeeList;\r\n\t\tnewList[index].checked = !newList[index].checked;\r\n\r\n\t\tthis.setState({\r\n\t\t\temployeeList: newList\r\n\t\t});\r\n\t}\r\n\r\n\tonCheckAll = () => {\r\n\t\tthis.setState({\r\n\t\t\temployeeList: this.state.employeeList.map(employee => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...employee,\r\n\t\t\t\t\tchecked: !this.state.checkAll\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tcheckAll: !this.state.checkAll\r\n\t\t});\r\n\t}\r\n\r\n\texport = () => {\r\n\t\texportServerEmployees({\r\n\t\t\tmonth: this.state.month,\r\n\t\t\temployees: this.state.employeeList.filter(employee => {\r\n\t\t\t\treturn employee.checked;\r\n\t\t\t}),\r\n\t\t\tincludeNoHours: this.state.includeNoHours,\r\n\t\t\tincludeInactive: this.state.includeInactive,\r\n\t\t\tincludeArchived: this.state.includeArchived\r\n\t\t}).then((response) => {\r\n\t\t\tconst content = response.headers[\"content-type\"];\r\n           \tdownload(response.data, \"Varpas 1.xlsx\", content);\r\n\t\t});\r\n\t}\r\n\r\n\tonEnter = () => {\r\n\t\tthis.setState({\r\n\t\t\temployeeList: this.props.employees.map(employee => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...employee,\r\n\t\t\t\t\tchecked: false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(!this.props.exportExcel.show) return null;\r\n\r\n\t\tconst employees = this.state.employeeList.map((employee, index) => {\r\n\t\t\treturn (\r\n\t\t\t\t<tbody key={index}>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tchecked={employee.checked}\r\n\t\t\t\t\t\t\t\tonChange={() => this.onEmployeeCheck(index)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>{employee.surname + \" \" + employee.name}</td>\r\n\t\t\t\t\t\t<td>{employee.personalCode}</td>\r\n\t\t\t\t\t\t<td>{employee.position}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<Modal \r\n\t\t\t\tsize=\"lg\"\r\n\t\t\t\tshow={this.props.exportExcel.show}\r\n\t\t\t\tonEnter={() => this.onEnter()}\r\n\t\t\t\tonHide={() => this.props.hideExportExcel()}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>Eksports</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<h5>Periods</h5>\r\n\t\t\t\t\t\t\t<Form.Group as={Row} className=\"ml-1\">\r\n\t\t\t\t\t\t\t\t<Form.Label column xs={\"3\"}>Mēnesis: </Form.Label>\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t<BoostrapDatePicker\r\n\t\t\t\t\t\t\t\t\t\tdateFormat=\"MM.yyyy.\"\r\n\t\t\t\t\t\t\t\t\t\tselected={this.state.month}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleDateChange}\r\n\t\t\t\t\t\t\t\t\t\tshowMonthYearPicker\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<h5>Iekļaut</h5>\r\n\t\t\t\t\t\t\t<Form.Group as={Row} className=\"ml-1\">\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\" \r\n\t\t\t\t\t\t\t\t\t\tlabel=\"darbiniekus bez nostrādātām stundām\"\r\n\t\t\t\t\t\t\t\t\t\tchecked={this.state.includeNoHours}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onToggleIncludeNoHours}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t<Form.Group as={Row} className=\"ml-1\">\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\" \r\n\t\t\t\t\t\t\t\t\t\tlabel=\"deaktivizētus darbiniekus\"\r\n\t\t\t\t\t\t\t\t\t\tchecked={this.state.includeInactive}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onToggleIncludeInactive}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t<Form.Group as={Row} className=\"ml-1\">\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\" \r\n\t\t\t\t\t\t\t\t\t\tlabel=\"arhivētus darbiniekus\"\r\n\t\t\t\t\t\t\t\t\t\tchecked={this.state.includeArchived}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.onToggleIncludeArchived}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<h5>Atlasīt Darbiniekus</h5>\r\n\t\t\t\t\t\t\t<Table size=\"sm\">\r\n\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={this.state.checkAll}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={() => this.onCheckAll()}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Vārds</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Personas Kods</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Amats</th>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t{employees}\r\n\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button variant=\"success\" onClick={() => {\r\n\t\t\t\t\t\tthis.export();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\tEksportēt\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\texportExcel: state.employees.exportExcel,\r\n\t\temployees: state.employees.employees\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowExportExcel: () => dispatch(showExportExcel()),\r\n\t\thideExportExcel: () => dispatch(hideExportExcel()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(ExportExcel);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Button, Form, Alert } from \"react-bootstrap\";\r\n\r\nimport { authenticate } from \"../utils/userUtils\";\r\nimport { production } from \"../utils/config\";\r\n\r\nimport logo from \"../images/logo.png\";\r\n\r\nconst DEBUG = !production;\r\n\r\nclass LogIn extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.state = {\r\n\t\t\tusername: DEBUG ? \"nils.asejevs\" : \"\",\r\n\t\t\tpassword: DEBUG ? \"EvoNils112\" : \"\",\r\n\t\t\trememberMe: true,\r\n\t\t\tauthenticationError: false,\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif(DEBUG) {\r\n\t\t\tthis.logIn();\r\n\t\t}\r\n\t}\r\n\r\n\tonUsernameChange = (event) => {\r\n\t\tthis.setState({ username: event.target.value });\r\n\t}\r\n\r\n\tonPasswordChange = (event) => {\r\n\t\tthis.setState({ password: event.target.value });\r\n\t}\r\n\r\n\tonRememberMeChange = () => {\r\n\t\tthis.setState({ rememberMe: !this.state.rememberMe });\r\n\t}\r\n\r\n\tlogIn = (e) => {\r\n\t\tif(DEBUG === false) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\tauthenticate(this.state.username, this.state.password, this.state.rememberMe).then((res) => {\r\n\t\t\tif(res.data) {\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tauthenticationError: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\tcentered\r\n\t\t\t\tshow={true}\r\n\t\t\t\tonHide={() => null}\r\n\t\t\t>\r\n\t\t\t\t<Form onSubmit={e => this.logIn(e)}>\r\n\t\t\t\t<Modal.Header className=\"justify-content-center\">\r\n\t\t\t\t\t<Modal.Title>\r\n\t\t\t\t\t\t<img \r\n\t\t\t\t\t\t\tsrc={logo}\r\n\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\twidth=\"auto\"\r\n\t\t\t\t\t\t\theight=\"40px\"\r\n\t\t\t\t\t\t\tclassName=\"d-inline-block align-top mr-2\"\r\n\t\t\t\t\t\t\tstyle={{filter: \"invert(100%)\"}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\tAutentifikācija\r\n\t\t\t\t\t</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Lietotājvārds</Form.Label>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tvalue={this.state.username} \r\n\t\t\t\t\t\t\tonChange={this.onUsernameChange}\r\n\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Label>Parole</Form.Label>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tvalue={this.state.password} \r\n\t\t\t\t\t\t\tonChange={this.onPasswordChange}\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group controlId=\"formBasicChecbox\">\r\n\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\ttype=\"checkbox\" \r\n\t\t\t\t\t\t\tlabel=\"Atcerēties mani\"\r\n\t\t\t\t\t\t\tname=\"rememberMe\"\r\n\t\t\t\t\t\t\tchecked={this.state.rememberMe}\r\n\t\t\t\t\t\t\tonChange={this.onRememberMeChange}/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Alert variant={\"danger\"} show={this.state.authenticationError} onClose={() => null}>\r\n\t\t\t\t\t\tNepareizs lietotājvārds un/vai parole.\r\n\t\t\t\t\t</Alert>\r\n\r\n\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button variant=\"success\" type=\"submit\">\r\n\t\t\t\t\t\tIelogoties\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(LogIn);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Alert } from \"react-bootstrap\";\r\n\r\nimport { showCheckCard, hideCheckCard, showEmployeeWorkLog } from \"../actions/employeeActions\";\r\n\r\nimport { awaitCard, getEmployeeByUID } from \"../utils/employeeUtils\";\r\n\r\n//import { checkCard } from \"../utils/employeeUtils\";\r\n\r\nclass CheckCard extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.state = {\r\n\t\t\tcardScanned: false,\r\n\t\t\tnotFound: false,\r\n\t\t}\r\n\t}\r\n\r\n\tcheckCard = () => {\r\n\t\tawaitCard().then((res) => {\r\n\t\t\tif(res.data) {\t\r\n\t\t\t\tgetEmployeeByUID(res.data.uid).then((res2) => {\r\n\t\t\t\t\tif(res2.data) {\r\n\t\t\t\t\t\tthis.hideModal();\r\n\t\t\t\t\t\tthis.props.showEmployeeWorkLog(res2.data.id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tcardScanned: true,\r\n\t\t\t\t\t\t\tnotFound: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thideModal = () => {\r\n\t\tthis.props.hideCheckCard();\r\n\r\n\t\tthis.setState({\r\n\t\t\tcardScanned: false,\r\n\t\t\temployee: {}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal \r\n\t\t\t\tshow={this.props.checkCard.show}\r\n\t\t\t\tonHide={this.hideModal}\r\n\t\t\t\tonEntered={() => this.checkCard()}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>Atrast darbinieku pēc kartes</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Alert variant={\"primary\"} show={!this.state.cardScanned}>\r\n\t\t\t\t\t\tNoskenējiet NFC kartiņu...\r\n\t\t\t\t\t</Alert>\r\n\t\t\t\t\t<Alert variant={\"danger\"} show={this.state.cardScanned && this.state.notFound}>\r\n\t\t\t\t\t\tUz šīs kartiņas nav reģistrēts neviens darbinieks.\r\n\t\t\t\t\t</Alert>\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tcheckCard: state.employees.checkCard,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowCheckCard: () => dispatch(showCheckCard()),\r\n\t\thideCheckCard: () => dispatch(hideCheckCard()),\r\n\t\tshowEmployeeWorkLog: (id) => dispatch(showEmployeeWorkLog(id)),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(CheckCard);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Button, Form, Row, Col } from \"react-bootstrap\";\r\nimport BoostrapDatePicker from \"./BoostrapDatePicker\";\r\n\r\nimport { showCommentEmployee, hideCommentEmployee } from \"../actions/employeeActions\";\r\n\r\nimport { storeUpdateEmployee, addEmployeeComment } from \"../utils/employeeUtils\";\r\n\r\nclass CommentEmployee extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.initialState = {\r\n\t\t\tcomment: {\r\n\t\t\t\ttext: \"\",\r\n\t\t\t\texpires: new Date(),\r\n\t\t\t\tmanualDelete: false,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\t...this.initialState\r\n\t\t}\r\n\t}\r\n\r\n\tonExited = () => {\r\n\t\tthis.props.hideCommentEmployee();\r\n\t\tthis.setState({\r\n\t\t\t...this.initialState\r\n\t\t});\r\n\t}\r\n\r\n\tonCommentChange = (event) => {\r\n\t\tthis.setState({ \r\n\t\t\tcomment: {\r\n\t\t\t\t...this.state.comment,\r\n\t\t\t\ttext: event.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonExpiryDateChange = (date) => {\r\n\t\tthis.setState({\r\n\t\t\tcomment: {\r\n\t\t\t\t...this.state.comment,\r\n\t\t\t\texpires: date\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonManualDeleteChange = () => {\r\n\t\tthis.setState({ \r\n\t\t\tcomment: {\r\n\t\t\t\t...this.state.comment,\r\n\t\t\t\tmanualDelete: !this.state.comment.manualDelete\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal\r\n\t\t\t\tshow={this.props.commentEmployee.show}\r\n\t\t\t\tonExited={() => this.onExited()}\r\n\t\t\t\tonHide={() => this.props.hideCommentEmployee()}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>{this.props.employee.name + \" \" + this.props.employee.surname}</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Form.Group as={Row}>\r\n\t\t\t\t\t\t<Form.Label column xs={2}>Komentārs</Form.Label>\r\n\t\t\t\t\t\t<Col xs={10}>\r\n\t\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\t\tas=\"textarea\"\r\n\t\t\t\t\t\t\t\trows=\"3\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.comment.text}\r\n\t\t\t\t\t\t\t\tonChange={this.onCommentChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Group as={Row}>\r\n\t\t\t\t\t\t<Form.Label column xs={2}>Dzēst</Form.Label>\r\n\t\t\t\t\t\t<Col xs={10}>\r\n\t\t\t\t\t\t\t<BoostrapDatePicker\r\n\t\t\t\t\t\t\t\tdisabled={this.state.comment.manualDelete}\r\n\t\t\t\t\t\t\t\tdateFormat=\"dd.MM.yyyy. HH:mm\"\r\n\t\t\t\t\t\t\t\tselected={this.state.comment.expires}\r\n\t\t\t\t\t\t\t\tonChange={this.onExpiryDateChange}\r\n\t\t\t\t\t\t\t\tmaxDate={new Date()}\r\n\t\t\t\t\t\t\t\ttimeIntervals={1}\r\n\t\t\t\t\t\t\t\tshowTimeSelect\r\n\t\t\t\t\t\t\t\ttimeFormat=\"HH:mm\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\ttype=\"checkbox\" \r\n\t\t\t\t\t\t\tlabel=\"Tikai manuāli dzēšams\"\r\n\t\t\t\t\t\t\tname=\"manualDelete\"\r\n\t\t\t\t\t\t\tchecked={this.state.comment.manualDelete}\r\n\t\t\t\t\t\t\tonChange={this.onManualDeleteChange}/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Modal.Body>\r\n\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button variant=\"success\" onClick={() => {\r\n\t\t\t\t\t\tconst employeeId = this.props.employee.id;\r\n\t\t\t\t\t\taddEmployeeComment(this.props.employee, this.state.comment).then(() => {\r\n\t\t\t\t\t\t\tstoreUpdateEmployee(employeeId);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.props.hideCommentEmployee();\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\tPievienot\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tcommentEmployee: state.employees.commentEmployee,\r\n\t\temployee: state.employees.commentEmployee.employee,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowCommentEmployee: () => dispatch(showCommentEmployee()),\r\n\t\thideCommentEmployee: () => dispatch(hideCommentEmployee()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(CommentEmployee);\r\n","import React from \"react\";\r\n\r\nclass ScheduleCell extends React.Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.transparentColor = \"RGBA(0, 0, 0, 0)\";\r\n\t\tthis.dayColor = \"#ffcc00\";\r\n\t\tthis.nightColor = \"#005f9d\";\r\n\t\tthis.dayOffColor = \"#ff99cc\";\r\n\t\tthis.vacationColor = \"#00ff00\";\r\n\t\tthis.sickListColor = \"#2fc2b5\";\r\n\t\tthis.lateColor = \"red\";\r\n\t}\r\n\t\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tif(nextProps.row.selectedFields.find((selectedField) => {\r\n\t\t\treturn selectedField[1] === this.props.rowIndex &&\r\n\t\t\tselectedField[2] === this.props.extraData.colIndex;\r\n\t\t}) || this.props.row.selectedFields.find((selectedField) => {\r\n\t\t\treturn selectedField[1] === this.props.rowIndex &&\r\n\t\t\tselectedField[2] === this.props.extraData.colIndex;\r\n\t\t})) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif(JSON.stringify(nextProps.row.schedule.days[nextProps.extraData.colIndex]) !== \r\n\t\t\tJSON.stringify(this.props.row.schedule.days[this.props.extraData.colIndex])) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst rowIndex = this.props.rowIndex;\r\n\t\tconst colIndex = this.props.extraData.colIndex;\r\n\t\tlet selectedFields = this.props.row.selectedFields;\r\n\r\n\t\tlet color = this.transparentColor;\r\n\t\tlet outline = \"0px\";\r\n\r\n\t\tswitch(this.props.row.schedule.days[colIndex]) {\r\n\t\t\tcase \"D\": {\r\n\t\t\t\tcolor = this.dayColor;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"N\": {\r\n\t\t\t\tcolor = this.nightColor;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"B\": {\r\n\t\t\t\tcolor = this.dayOffColor;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"A\": {\r\n\t\t\t\tcolor = this.vacationColor;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"S\": {\r\n\t\t\t\tcolor = this.sickListColor;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase \"K\": {\r\n\t\t\t\tcolor = this.lateColor;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault: {\r\n\t\t\t\tcolor = this.transparentColor;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(let i = 0; i < selectedFields.length; i++) {\r\n\t\t\tif(selectedFields[i][1] === rowIndex &&\r\n\t\t\t\tselectedFields[i][2] === colIndex) {\r\n\t\t\t\toutline = \"2px #2f8cfb solid\";\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div style={{ backgroundColor: color, outline: outline }}>\r\n\t\t\t\t<input \r\n\t\t\t\t\tonClick={(event) => this.props.onClickScheduleInput(event, this.props.row.scheduleIndex, rowIndex, colIndex)}\r\n\t\t\t\t\tonFocus={(event) => this.props.onFocusScheduleInput(event, this.props.row.scheduleIndex, rowIndex, colIndex)}\r\n\t\t\t\t\tonChange={(event) => this.props.onChangeScheduleInput(event, this.props.row.scheduleIndex, rowIndex, colIndex)}\r\n\t\t\t\t\tclassName=\"border-0 text-center\" \r\n\t\t\t\t\tstyle={{ width: \"32px\", height: \"32px\", fontSize: \"12px\", backgroundColor: \"RGBA(0, 0, 0, 0)\", outline: \"none\"}}\r\n\t\t\t\t\tvalue={this.props.row.schedule.days[colIndex]}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ScheduleCell;\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport Cookies from \"universal-cookie\";\r\n\r\nimport { Row, Col, Button, Dropdown } from \"react-bootstrap\";\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\r\n\r\nimport ContainerBox from \"./ContainerBox\";\r\nimport Filters from \"./Filters\";\r\nimport ScheduleCell from \"./ScheduleCell\";\r\nimport BoostrapDatePicker from \"./BoostrapDatePicker\";\r\n\r\nimport {\r\n\tshowRegisterEmployee,\r\n\tshowExportExcel,\r\n\tshowCheckCard,\r\n\tshowEmployeeWorkLog\r\n} from \"../actions/employeeActions\";\r\n\r\nimport { getSchedules, saveSchedules } from \"../utils/employeeUtils\";\r\n\r\nimport { daysInMonth, convertSpecialCharacters, isWeekend } from \"../utils/commonUtils\";\r\n\r\nclass Employees extends React.Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.transparentColor = \"RGBA(0, 0, 0, 0)\";\r\n\t\tthis.dayColor = \"#ffcc00\";\r\n\t\tthis.nightColor = \"#005f9d\";\r\n\t\tthis.dayOffColor = \"#ff99cc\";\r\n\t\tthis.vacationColor = \"#00ff00\";\r\n\t\tthis.sickListColor = \"#2fc2b5\";\r\n\t\tthis.weekendColor = \"#ffcc99\";\r\n\t\tthis.lateColor = \"red\";\r\n\r\n\t\tthis.keyDown = {};\r\n\r\n\t\tthis.cellRefs = [];\r\n\r\n\t\tconst cookies = new Cookies();\r\n\t\tlet settings = cookies.get(\"settings\");\r\n\r\n\t\tif(!settings) {\r\n\t\t\tsettings = {\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t}\r\n\r\n\t\t\tcookies.set(\"settings\", settings);\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\t// General\r\n\t\t\ttableData: [],\r\n\t\t\tpageSize: 10,\r\n\t\t\t...settings,\r\n\t\t\tsaving: false,\r\n\t\t\t// Scheduling specific\r\n\t\t\tschedules: [],\r\n\t\t\tselectedFields: [],\r\n\t\t\tscheduleDate: new Date(),\r\n\t\t}\r\n\r\n\t\tthis.columns = [{\r\n\t\t\tdataField: \"id\",\r\n\t\t\ttext: \"#\",\r\n\t\t\tsort: true,\r\n\t\t\tclasses: \"align-middle d-none d-md-table-cell\",\r\n\t\t\theaderClasses: \"d-none d-md-table-cell\",\r\n\t\t\thidden: true,\r\n\t\t}, {\r\n\t\t\tdataField: \"name\",\r\n\t\t\ttext: \"Vārds\",\r\n\t\t\tsort: true,\r\n\t\t\tsortFunc: (a, b, order) => {\r\n\t\t\t\tif(convertSpecialCharacters(a.surname) < convertSpecialCharacters(b.surname)) {\r\n\t\t\t\t\treturn order === \"asc\" ? -1 : 1;\r\n\t\t\t\t} else if(convertSpecialCharacters(a.surname) > convertSpecialCharacters(b.surname)) {\r\n\t\t\t\t\treturn order === \"asc\" ? 1 : -1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t},\r\n\t\t\tformatter: this.nameFormatter,\r\n\t\t}];\r\n\r\n\t\tconst days = daysInMonth(new Date().getMonth(), new Date().getFullYear());\r\n\r\n\t\tfor(let i = 0; i < days; i++) {\r\n\t\t\tconst date = new Date(this.state.scheduleDate);\r\n\t\t\tdate.setDate(i);\r\n\r\n\t\t\tlet color = \"RGBA(0, 0, 0, 0)\";\r\n\t\t\tif(isWeekend(date)) {\r\n\t\t\t\tcolor = this.weekendColor;\r\n\t\t\t}\r\n\r\n\t\t\tthis.columns.push({\r\n\t\t\t\tdataField: \"schedule\" + i,\r\n\t\t\t\ttext: (i + 1).toString(),\r\n\t\t\t\tformatter: this.dayFormatter,\r\n\t\t\t\tformatExtraData: { \r\n\t\t\t\t\tcolIndex: i,\r\n\t\t\t\t},\r\n\t\t\t\theaderClasses: \"text-center\",\r\n\t\t\t\theaderStyle: { backgroundColor: color },\r\n\t\t\t\tclasses: \"text-center p-0 m-0\",\r\n\t\t\t\tstyle: { backgroundColor: color }\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.defaultSorted = [{\r\n\t\t\tdataField: \"name\",\r\n\t\t\torder: \"asc\"\r\n\t\t}];\r\n\r\n\t\tthis.pagination = paginationFactory({\r\n\t\t\tpage: 1,\r\n\t\t\talwaysShowAllBtns: true,\r\n\t\t\tshowTotal: false,\r\n\t\t\tsizePerPage : this.state.pageSize,\r\n\t\t\tsizePerPageRenderer: this.sizePerPageRenderer,\r\n\t\t\tsizePerPageList: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"10\",\r\n\t\t\t\t\tvalue: 10,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"25\",\r\n\t\t\t\t\tvalue: 25,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"50\",\r\n\t\t\t\t\tvalue: 50,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"100\",\r\n\t\t\t\t\tvalue: 100,\r\n\t\t\t\t},{\r\n\t\t\t\t\ttext: \"Viss\",\r\n\t\t\t\t\tvalue: 9999,\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.fetchSchedules();\r\n\r\n\t\twindow.addEventListener(\"keydown\", (event) => {\r\n\t\t\tthis.keyDown[event.keyCode] = true;\r\n\t\t});\r\n\r\n\t\twindow.addEventListener(\"keyup\", (event) => {\r\n\t\t\tthis.keyDown[event.keyCode] = false;\r\n\t\t});\r\n\t}\r\n\r\n\tfetchSchedules = () => {\r\n\t\tgetSchedules(this.state.scheduleDate.getMonth()).then((res) => {\r\n\t\t\tconst newSchedules = this.props.employees.map((employee) => {\r\n\t\t\t\tlet days = [];\r\n\t\t\t\tconst schedule = res.data.find((schedule) => {\r\n\t\t\t\t\treturn schedule.employee_id === employee.id\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(schedule === undefined) {\r\n\t\t\t\t\tdays = new Array(31).fill(\" \", 0, 31);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdays = JSON.parse(schedule.days);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\temployee_id: employee.id,\r\n\t\t\t\t\tmonth: this.state.scheduleDate.getMonth(),\r\n\t\t\t\t\tdays: days\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\r\n\t\t\tPromise.all(newSchedules).then((data) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tschedules: JSON.parse(JSON.stringify(data)),\r\n\t\t\t\t\tselectedFields: [],\r\n\t\t\t\t}, () => this.onTableChange());\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tcheckEmptySchedules = () => {\r\n\t\tconst newSchedules = this.props.employees.map((employee) => {\r\n\t\t\tlet days = [];\r\n\t\t\tconst schedule = this.state.schedules.find((schedule) => {\r\n\t\t\t\treturn schedule.employee_id === employee.id\r\n\t\t\t});\r\n\r\n\t\t\tif(schedule === undefined) {\r\n\t\t\t\tdays = new Array(31).fill(\" \", 0, 31);\r\n\t\t\t} else {\r\n\t\t\t\tdays = schedule.days;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\temployee_id: employee.id,\r\n\t\t\t\tmonth: this.state.scheduleDate.getMonth(),\r\n\t\t\t\tdays: days\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tPromise.all(newSchedules).then((data) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tschedules: JSON.parse(JSON.stringify(data)),\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.onTableChange();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif(prevProps.employees.length === 0 && this.props.employees.length !== 0) {\r\n\t\t\tthis.fetchSchedules();\r\n\t\t}\r\n\r\n\t\tif(JSON.stringify(prevProps.employees) !== JSON.stringify(this.props.employees) &&\r\n\t\t\tthis.props.employees.length > 0) {\r\n\t\t\tthis.checkEmptySchedules();\r\n\t\t}\r\n\r\n\t\tif(JSON.stringify(prevProps.employees) !== JSON.stringify(this.props.employees) ||\r\n\t\t\tJSON.stringify(prevState.schedules) !== JSON.stringify(this.state.schedules) ||\r\n\t\t\tJSON.stringify(prevState.selectedFields) !== JSON.stringify(this.state.selectedFields)) {\r\n\t\t\tthis.onTableChange();\r\n\t\t}\r\n\r\n\t\tif(prevState.pageSize !== this.state.pageSize) {\r\n\t\t\tthis.saveSettings();\r\n\t\t}\r\n\t}\r\n\r\n\tisKeyDown = (key) => {\r\n\t\treturn this.keyDown[key];\r\n\t}\r\n\r\n\tsaveSettings = () => {\r\n\t\tconst cookies = new Cookies();\r\n\t\tconst settings = {\r\n\t\t\t...cookies.get(\"settings\"),\r\n\t\t\tpageSize: this.state.pageSize,\r\n\t\t}\r\n\r\n\t\tcookies.set(\"settings\", settings);\r\n\t}\r\n\r\n\tonTableChange = () => {\r\n\t\tthis.formatTable((tableData) => {\r\n\t\t\tthis.filterData(tableData);\r\n\t\t});\r\n\t}\r\n\r\n\tonFilterChange = () => {\r\n\t\tthis.onTableChange();\r\n\t}\r\n\r\n\tonDataFiltered = (data) => {\r\n\t\tthis.setState({\r\n\t\t\ttableData: data\r\n\t\t});\r\n\t}\r\n\r\n\tsaveSchedules = () => {\r\n\t\tthis.setState({ saving: true });\r\n\t\tsaveSchedules(this.state.schedules).then(() => {\r\n\t\t\tthis.setState({ saving: false });\r\n\t\t});\r\n\t}\r\n\r\n\tonChangeScheduleDate = (date) => {\r\n\t\tthis.setState({\r\n\t\t\tscheduleDate: new Date(date),\r\n\t\t}, () => this.fetchSchedules());\r\n\t}\r\n\r\n\tonClickScheduleInput = (event, scheduleIndex, rowIndex, colIndex) => {\r\n\t\tevent.target.select();\r\n\t}\r\n\r\n\tonFocusScheduleInput = (event, scheduleIndex, rowIndex, colIndex) => {\r\n\t\tevent.target.select();\r\n\t\tlet selectedFields = JSON.parse(JSON.stringify(this.state.selectedFields));\r\n\r\n\t\tif(!this.isKeyDown(17) && !this.isKeyDown(16)) { // CTRL and SHIFT is not being held\r\n\t\t\tselectedFields = [];\r\n\t\t}\r\n\r\n\t\tif(this.isKeyDown(16)) { // SHIFT is being held down\r\n\t\t\tconst start = selectedFields[selectedFields.length - 1];\r\n\t\t\tif(start !== undefined) {\r\n\t\t\t\tconst end = [scheduleIndex, rowIndex, colIndex];\r\n\r\n\t\t\t\tfor(let i = Math.min(start[1], end[1]); i <= Math.max(start[1], end[1]); i++) {\r\n\t\t\t\t\tfor(let i2 = Math.min(start[2], end[2]); i2 <= Math.max(start[2], end[2]); i2++) {\r\n\t\t\t\t\t\tselectedFields.push([-1, i, i2]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tselectedFields.push([scheduleIndex, rowIndex, colIndex]);\r\n\r\n\t\tthis.setState({\r\n\t\t\tselectedFields: selectedFields,\r\n\t\t});\r\n\t}\r\n\r\n\tonChangeScheduleInput = (event, scheduleIndex, rowIndex, colIndex) => {\r\n\t\tlet newSchedules = JSON.parse(JSON.stringify(this.state.schedules));\r\n\r\n\t\tconst value = event.target.value.toUpperCase();\r\n\r\n\t\tif(newSchedules[scheduleIndex].days[colIndex] !== value) {\r\n\t\t\tnewSchedules[scheduleIndex].days[colIndex] = value.replace(newSchedules[scheduleIndex].days[colIndex], \"\");\r\n\r\n\t\t\tif(newSchedules[scheduleIndex].days[colIndex] === \"\") {\r\n\t\t\t\tnewSchedules[scheduleIndex].days[colIndex] = \" \";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(this.state.selectedFields.length > 1) {\r\n\t\t\tthis.state.selectedFields.forEach((selectedField) => {\r\n\t\t\t\tnewSchedules[this.cellRefs[selectedField[1]][selectedField[2]].props.row.scheduleIndex].days[selectedField[2]] = newSchedules[scheduleIndex].days[colIndex];\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tschedules: newSchedules,\r\n\t\t});\r\n\t}\r\n\r\n\tcreateEmptySchedule = () => {\r\n\t\tconst selectedFields = [];\r\n\r\n\t\tconst newSchedules = this.props.employees.map((employee) => {\r\n\t\t\tconst newDays = new Array(31).fill(\" \", 0, 31);\r\n\r\n\t\t\treturn {\r\n\t\t\t\temployee_id: employee.id,\r\n\t\t\t\tmonth: this.state.scheduleDate.getMonth(),\r\n\t\t\t\tdays: newDays\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tPromise.all(newSchedules).then(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tschedules: newSchedules,\r\n\t\t\t\tselectedFields: selectedFields,\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tformatTable = (callback = () => null) => {\r\n\t\tthis.cellRefs = [];\r\n\t\tconst promise = this.props.employees.map((employee, index) => {\r\n\t\t\treturn({\r\n\t\t\t\tid: employee.id,\r\n\t\t\t\tname: {\r\n\t\t\t\t\tid: employee.id,\r\n\t\t\t\t\tname: employee.name,\r\n\t\t\t\t\tsurname: employee.surname\r\n\t\t\t\t},\r\n\t\t\t\tposition: employee.position ? employee.position.toString() : \"\",\r\n\t\t\t\tcompany: employee.company ? employee.company.toString() : \"\",\r\n\t\t\t\tarchived: employee.archived,\r\n\t\t\t\tactive: employee.active,\r\n\t\t\t\tworking: employee.working,\r\n\t\t\t\tschedule: this.state.schedules[index],\r\n\t\t\t\tscheduleIndex: index,\r\n\t\t\t\tselectedFields: this.state.selectedFields,\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tPromise.all(promise).then((data) => {\r\n\t\t\tcallback(data);\r\n\t\t});\r\n\t}\r\n\r\n\tnameFormatter = (cell, row) => {\r\n\t\treturn (\r\n\t\t\t<Button \r\n\t\t\t\tvariant=\"link\" \r\n\t\t\t\tonClick={() => this.props.showEmployeeWorkLog(cell.id)}\r\n\t\t\t\tstyle={{ color: \"#0000FF\", fontSize: \"12px\" }}\r\n\t\t\t\tclassName=\"m-0 p-0\"\r\n\t\t\t>\r\n\t\t\t\t{cell.surname + \" \" + cell.name}\r\n\t\t\t</Button>\r\n\t\t);\r\n\t};\r\n\r\n\tdayFormatter = (cell, row, rowIndex, extraData) => {\r\n\t\tif(row.schedule === undefined ||\r\n\t\t\trow === undefined) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst props = {\r\n\t\t\tcell, \r\n\t\t\trow, \r\n\t\t\trowIndex, \r\n\t\t\textraData\r\n\t\t}\r\n\t\treturn <ScheduleCell\r\n\t\t\tkey={[row.id, rowIndex]}\r\n\t\t\tonClickScheduleInput={this.onClickScheduleInput}\r\n\t\t\tonFocusScheduleInput={this.onFocusScheduleInput}\r\n\t\t\tonChangeScheduleInput={this.onChangeScheduleInput}\r\n\t\t\tref={(ref) => {\r\n\t\t\t\tif(this.cellRefs[rowIndex] === undefined) {\r\n\t\t\t\t\tthis.cellRefs[rowIndex] = new Array(31);\r\n\t\t\t\t}\r\n\t\t\t\tthis.cellRefs[rowIndex][extraData.colIndex] = ref;\r\n\t\t\t\treturn true;\r\n\t\t\t}}\r\n\t\t\t{...props}\r\n\t\t/>\r\n\t};\r\n\r\n\tsizePerPageRenderer = ({\r\n\t\toptions,\r\n\t\tcurrSizePerPage,\r\n\t\tonSizePerPageChange\r\n\t}) => (\r\n\t\t<Dropdown className=\"d-inline pr-2\">\r\n\t\t\t<Dropdown.Toggle variant=\"primary\">\r\n\t\t\t\t{this.state.pageSize === 9999 ? \"Viss\" : this.state.pageSize}\r\n\t\t\t</Dropdown.Toggle>\r\n\r\n\t\t\t<Dropdown.Menu>\r\n\t\t\t\t{\r\n\t\t\t\t\toptions.map((option, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Dropdown.Item \r\n\t\t\t\t\t\t\t\tkey={index} \r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tthis.onClickPageSize(option);\r\n\t\t\t\t\t\t\t\t\tonSizePerPageChange(option.page);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{option.text}\r\n\t\t\t\t\t\t\t</Dropdown.Item>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</Dropdown.Menu>\r\n\t\t</Dropdown>\r\n\t);\r\n\r\n\tonClickPageSize = (option) => {\r\n\t\tthis.setState({\r\n\t\t\tpageSize: option.page\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ContainerBox header={\"Grafiks\"}>\r\n\t\t\t\t<Filters \r\n\t\t\t\t\tonDataFiltered={this.onDataFiltered}\r\n\t\t\t\t\tonFilterChange={this.onFilterChange}\r\n\t\t\t\t\tfilterData={filterData => this.filterData = filterData}\r\n\t\t\t\t/>\r\n\t\t\t\t<Row className=\"mt-3 text-center\" style={{ fontSize: \"14px\" }}>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-middle\" style={{ backgroundColor: this.dayColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">(D) Diena</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-middle\" style={{ backgroundColor: this.nightColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">(N) Nakts</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-middle\" style={{ backgroundColor: this.dayOffColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">(B) Brīvdiena</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-middle\" style={{ backgroundColor: this.vacationColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">(A) Atvaļinājums</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-middle\" style={{ backgroundColor: this.sickListColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">(S) Slimības lapa</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<span className=\"dot align-middle\" style={{ backgroundColor: this.lateColor }}/>\r\n\t\t\t\t\t\t<span className=\"ml-2\">(K) Darba kavējums</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row className=\"mb-3 mt-3\">\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<ul style={{ fontSize: \"12px\" }}>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\tCTRL + KLIKŠĶIS - Iezīmē vairākus individuālus lauciņus\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\tSHIFT + KLIKŠĶIS - Iezīmē vairākus no-līdz lauciņus\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<Button  \r\n\t\t\t\t\t\t\tonClick={this.saveSchedules}\r\n\t\t\t\t\t\t\tclassName=\"float-right\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.saving \r\n\t\t\t\t\t\t\t\t? \"Saglabā...\"\r\n\t\t\t\t\t\t\t\t: \"Saglabāt\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<BoostrapDatePicker\r\n\t\t\t\t\t\t\tdateFormat=\"MM.yyyy.\"\r\n\t\t\t\t\t\t\tselected={this.state.scheduleDate}\r\n\t\t\t\t\t\t\tonChange={this.onChangeScheduleDate}\r\n\t\t\t\t\t\t\tshowMonthYearPicker\r\n\t\t\t\t\t\t\tclassName=\"float-right mr-2 text-center\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<BootstrapTable \r\n\t\t\t\t\tbootstrap4={ true }\r\n\t\t\t\t\tkeyField=\"id\"\r\n\t\t\t\t\tdata={ this.state.tableData } \r\n\t\t\t\t\tcolumns={ this.columns } \r\n\t\t\t\t\tbordered={ true }\r\n\t\t\t\t\tcondensed={ true }\r\n\t\t\t\t\thover={ true }\r\n\t\t\t\t\tdefaultSorted={ this.defaultSorted }\r\n\t\t\t\t\tremote={ { filter: true } }\r\n\t\t\t\t\tpagination={ this.pagination }\r\n\t\t\t\t/>\r\n\t\t\t</ContainerBox>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\temployees: state.employees.employees,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tshowRegisterEmployee: () => dispatch(showRegisterEmployee()),\r\n\t\tshowExportExcel: () => dispatch(showExportExcel()),\r\n\t\tshowCheckCard: () => dispatch(showCheckCard()),\r\n\t\tshowEmployeeWorkLog: (id) => dispatch(showEmployeeWorkLog(id))\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Employees);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Alert, Button, Row, Col } from \"react-bootstrap\";\r\n\r\nimport BoostrapDatePicker from \"./BoostrapDatePicker\";\r\n\r\nimport { hideHistory, showEmployeeWorkLog } from \"../actions/employeeActions\";\r\n\r\nimport { formatDate } from \"../utils/commonUtils\";\r\nimport * as LOG_TYPE from \"../utils/logTypes\";\r\n\r\nclass History extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tnotifications: [],\r\n\t\t\tnotificationDate: new Date(),\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif(prevState.notificationDate !== this.state.notificationDate ||\r\n\t\t\tprevProps.notifications !== this.props.notifications) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnotifications: this.props.notifications.data.filter(notification => {\r\n\t\t\t\t\tconst notificationDate = new Date(notification.date);\r\n\t\t\t\t\treturn notificationDate.getFullYear() === this.state.notificationDate.getFullYear() &&\r\n\t\t\t\t\t\tnotificationDate.getMonth() === this.state.notificationDate.getMonth() &&\r\n\t\t\t\t\t\tnotificationDate.getDate() === this.state.notificationDate.getDate();\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thistory = (notification, notificationData, employee) => {\r\n\t\tlet logTypeTranslated = notification.type;\r\n\t\tswitch(notification.type) {\r\n\t\t\tcase LOG_TYPE.LOG_SET_WORKING: logTypeTranslated = \"atzīmēts kā ienācis\"; break;\r\n\t\t\tcase LOG_TYPE.LOG_SET_NOT_WORKING: logTypeTranslated = \"atzīmēts kā izgājis\"; break;\r\n\t\t\tcase LOG_TYPE.LOG_EDIT_EMPLOYEE: logTypeTranslated = \"regiģēts darbinieks\"; break;\r\n\t\t\tcase LOG_TYPE.LOG_ADD_EMPLOYEE: logTypeTranslated = \"pievienots darbinieks\"; break;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Alert \r\n\t\t\t\tclassName=\"pt-0 pb-0\"\r\n\t\t\t\tkey={notification.id} \r\n\t\t\t\tvariant={\"warning\"}\r\n\t\t\t>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t{notificationData.user}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t{employee.surname + \" \" + employee.name}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col className=\"d-flex flex-column justify-content-center\">\r\n\t\t\t\t\t\t<span className=\"text-center\">\r\n\t\t\t\t\t\t\t<b>{logTypeTranslated}</b>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col className=\"d-flex flex-column justify-content-center\">\r\n\t\t\t\t\t\t<span className=\"flex-right text-right\">\r\n\t\t\t\t\t\t\t{formatDate(notification.date)}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Alert>\r\n\t\t);\r\n\t}\r\n\r\n\tdisplayHistory = () => {\r\n\t\tconst notifications = this.state.notifications.map((notification) => {\r\n\t\t\tconst notificationData = JSON.parse(notification.data);\r\n\r\n\t\t\tswitch(notification.type) {\r\n\t\t\t\tcase LOG_TYPE.LOG_ADD_EMPLOYEE:\r\n\t\t\t\tcase LOG_TYPE.LOG_EDIT_EMPLOYEE:\r\n\t\t\t\tcase LOG_TYPE.LOG_SET_NOT_WORKING:\r\n\t\t\t\tcase LOG_TYPE.LOG_SET_WORKING: {\r\n\t\t\t\t\tconst employee = this.props.employees.find((employee) => employee.id === notificationData.id);\r\n\r\n\t\t\t\t\tif(employee) {\r\n\t\t\t\t\t\treturn this.history(notification, notificationData, employee);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tdefault: {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(notifications.filter(notification => notification != null).length === 0) {\r\n\t\t\treturn (\r\n\t\t\t\t<h2 style={{ color: \"grey\" }} className=\"text-center\">\r\n\t\t\t\t\tNav ierakstu...\r\n\t\t\t\t</h2>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn notifications;\r\n\t}\r\n\r\n\tonChangeNotificationDate = (date) => {\r\n\t\tthis.setState({\r\n\t\t\tnotificationDate: date,\r\n\t\t});\r\n\t}\r\n\r\n\tonHide = () => {\r\n\t\tthis.props.hideHistory();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal \r\n\t\t\t\tsize=\"lg\"\r\n\t\t\t\tshow={this.props.history.show}\r\n\t\t\t\tonHide={() => this.onHide()}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title className=\"w-100\">Vēsture</Modal.Title>\r\n\t\t\t\t\t<BoostrapDatePicker\r\n\t\t\t\t\t\tdateFormat=\"dd.MM.yyyy.\"\r\n\t\t\t\t\t\tselected={new Date(this.state.notificationDate)}\r\n\t\t\t\t\t\tonChange={this.onChangeNotificationDate}\r\n\t\t\t\t\t\tmaxDate={new Date()}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Alert className=\"pt-0 pb-0\">\r\n\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t<b>Lietotājs</b>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t<b>Darbinieks</b>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col className=\"d-flex flex-column justify-content-center text-center\">\r\n\t\t\t\t\t\t\t\t\t\t<b>Darbība</b>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col className=\"d-flex flex-column justify-content-center text-right\">\r\n\t\t\t\t\t\t\t\t\t\t<b>Datums</b>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t{this.displayHistory()}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tnotifications: state.employees.notifications,\r\n\t\temployees: state.employees.employees,\r\n\t\thistory: state.employees.history,\r\n\t\tuser: state.employees.user,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\thideHistory: () => dispatch(hideHistory()),\r\n\t\tshowEmployeeWorkLog: (id) => dispatch(showEmployeeWorkLog(id))\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(History);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Modal, Alert, Button, Row, Col } from \"react-bootstrap\";\r\n\r\nimport BoostrapDatePicker from \"./BoostrapDatePicker\";\r\n\r\nimport { hideNotifications, showEmployeeWorkLog } from \"../actions/employeeActions\";\r\n\r\nimport { addNotification } from \"../utils/employeeUtils\";\r\nimport { formatDate } from \"../utils/commonUtils\";\r\n\r\nclass Notifications extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tnotifications: [],\r\n\t\t\tnotificationDate: new Date(),\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif(prevState.notificationDate !== this.state.notificationDate ||\r\n\t\t\tprevProps.notifications !== this.props.notifications) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnotifications: this.props.notifications.data.filter(notification => {\r\n\t\t\t\t\tconst notificationDate = new Date(notification.date);\r\n\t\t\t\t\treturn notificationDate.getFullYear() === this.state.notificationDate.getFullYear() &&\r\n\t\t\t\t\t\tnotificationDate.getMonth() === this.state.notificationDate.getMonth() &&\r\n\t\t\t\t\t\tnotificationDate.getDate() === this.state.notificationDate.getDate();\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tdisplayNotifications = () => {\r\n\t\tconst notifications = this.state.notifications.map((notification) => {\r\n\t\t\tconst notificationData = JSON.parse(notification.data);\r\n\r\n\t\t\tswitch(notification.type) {\r\n\t\t\t\tcase \"EMPLOYEE_LATE\": {\r\n\t\t\t\t\tconst employee = this.props.employees.find((employee) => employee.id === notificationData.id);\r\n\r\n\t\t\t\t\tif(employee) {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Alert \r\n\t\t\t\t\t\t\t\tkey={notification.id} \r\n\t\t\t\t\t\t\t\tvariant={\"danger\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.props.showEmployeeWorkLog(employee.id)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"pl-0\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{employee.surname + \" \" + employee.name}\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col className=\"d-flex flex-column justify-content-center\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<b>DARBA KAVĒJUMS</b>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col className=\"d-flex flex-column justify-content-center\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"flex-right text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t{formatDate(notification.date)}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tdefault: {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(notifications.filter(notification => notification != null).length === 0) {\r\n\t\t\treturn (\r\n\t\t\t\t<h2 style={{ color: \"grey\" }} className=\"text-center\">\r\n\t\t\t\t\tNav ierakstu...\r\n\t\t\t\t</h2>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn notifications;\r\n\t}\r\n\r\n\tonChangeNotificationDate = (date) => {\r\n\t\tthis.setState({\r\n\t\t\tnotificationDate: date,\r\n\t\t});\r\n\t}\r\n\r\n\tonHide = () => {\r\n\t\tthis.props.hideNotifications();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Modal \r\n\t\t\t\tsize=\"lg\"\r\n\t\t\t\tshow={this.props.notifications.show}\r\n\t\t\t\tonHide={() => this.onHide()}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title className=\"w-100\">Paziņojumi</Modal.Title>\r\n\t\t\t\t\t<BoostrapDatePicker\r\n\t\t\t\t\t\tdateFormat=\"dd.MM.yyyy.\"\r\n\t\t\t\t\t\tselected={new Date(this.state.notificationDate)}\r\n\t\t\t\t\t\tonChange={this.onChangeNotificationDate}\r\n\t\t\t\t\t\tmaxDate={new Date()}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Modal.Header>\r\n\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t{this.displayNotifications()}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tnotifications: state.employees.notifications,\r\n\t\temployees: state.employees.employees,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\thideNotifications: () => dispatch(hideNotifications()),\r\n\t\tshowEmployeeWorkLog: (id) => dispatch(showEmployeeWorkLog(id))\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Notifications);\r\n","import { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport { Route, BrowserRouter as Router, Switch } from \"react-router-dom\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport { Container, Row, Col, Navbar, Nav, Spinner } from \"react-bootstrap\";\r\n\r\nimport { production, employeeUpdateInterval } from \"../utils/config\";\r\n\r\nimport Employees from \"./Employees\";\r\nimport Report from \"./Report\";\r\nimport RegisterEmployee from \"./RegisterEmployee\";\r\nimport NotFound from \"./NotFound\";\r\nimport ViewEmployee from \"./ViewEmployee\";\r\nimport DeleteEmployee from \"./DeleteEmployee\";\r\nimport EditEmployee from \"./EditEmployee\";\r\nimport ExportExcel from \"./ExportExcel\";\r\nimport LogIn from \"./LogIn\";\r\nimport CheckCard from \"./CheckCard\";\r\nimport CommentEmployee from \"./CommentEmployee\";\r\nimport Schedule from \"./Schedule\";\r\nimport History from \"./History\";\r\nimport Notifications from \"./Notifications\";\r\n\r\nimport { checkSession, logOut, getUserByKey } from \"../utils/userUtils\";\r\nimport { pingServer } from \"../utils/commonUtils\";\r\nimport { storeUpdateEmployees, cardScanned } from \"../utils/employeeUtils\";\r\n\r\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\r\nimport \"../styles/table.css\";\r\n\r\nimport logo from \"../images/logo.png\";\r\nimport { FiLogOut } from \"react-icons/fi\";\r\nimport { updateUser, updateNotifications, showNotifications, showHistory } from \"../actions/employeeActions\";\r\nimport { getNotifications } from \"../utils/employeeUtils\";\r\n\r\nclass App extends React.PureComponent {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.state = {\r\n\t\t\tpingInterval: null,\r\n\t\t\tserverConnectionEstablished: false,\r\n\t\t\tscannerConnectionEstablished: false,\r\n\t\t\tloading: true,\r\n\t\t\tauthenticated: false,\r\n\t\t\tuser: {\r\n\t\t\t\tusername: \"\"\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twindow.scanCard = cardScanned;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// Check user session before displaying anything\r\n\t\tthis.establishConnection();\r\n\t\tthis.setState({ \r\n\t\t\tpingInterval: setInterval(() => {\r\n\t\t\t\tthis.establishConnection();\r\n\t\t\t}, 1000)\r\n\t\t});\r\n\t}\r\n\r\n\testablishConnection = () => {\r\n\t\tpingServer().then((res) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tserverConnectionEstablished: res.data.server,\r\n\t\t\t\tscannerConnectionEstablished: res.data.scanner,\r\n\t\t\t}, () => {\r\n\t\t\t\tcheckSession().then((res) => {\r\n\t\t\t\t\tif(!production\r\n\t\t\t\t\t\t|| (this.state.serverConnectionEstablished === true\r\n\t\t\t\t\t\t&& this.state.scannerConnectionEstablished === true)) {\r\n\t\t\t\t\t\tclearInterval(this.state.pingInterval);\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tloading: false,\r\n\t\t\t\t\t\t\tauthenticated: res.data,\r\n\t\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\t\tif(this.state.authenticated) {\r\n\t\t\t\t\t\t\t\tthis.onAuthentification();\r\n\t\t\t\t\t\t\t\tgetUserByKey().then((res) => {\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\tuser: res.data,\r\n\t\t\t\t\t\t\t\t\t}, () => this.props.updateUser(this.state.user));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\tonAuthentification = () => {\r\n\t\tstoreUpdateEmployees();\r\n\t\tgetNotifications().then(res => {\r\n\t\t\tthis.props.updateNotifications(res.data);\r\n\t\t});\r\n\r\n\t\tsetInterval(() => {\r\n\t\t\tstoreUpdateEmployees();\r\n\t\t\tgetNotifications().then(res => {\r\n\t\t\t\tthis.props.updateNotifications(res.data);\r\n\t\t\t});\r\n\t\t}, employeeUpdateInterval);\r\n\t}\r\n\r\n\tlogOut = () => {\r\n\t\tlogOut();\r\n\t\twindow.location.reload();\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(this.state.loading) {\r\n\t\t\t// Loading screen\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t<Spinner animation=\"border\"/>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.serverConnectionEstablished\r\n\t\t\t\t\t\t? \tthis.state.scannerConnectionEstablished\r\n\t\t\t\t\t\t\t? null\r\n\t\t\t\t\t\t\t: <div>Veido savienojumu ar NFC skeneri...</div>\r\n\t\t\t\t\t\t: <div>Veido savienojumu ar serveri...</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tif(this.state.authenticated) {\r\n\t\t\t\t// User interface\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Router>\r\n\t\t\t\t\t\t<Container fluid={true}>\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t<Navbar bg=\"dark\" variant=\"dark\" fixed=\"top\" expand=\"md\">\r\n\t\t\t\t\t\t\t\t\t\t<Navbar.Brand>\r\n\t\t\t\t\t\t\t\t\t\t\t<img \r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={logo}\r\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth=\"30\"\r\n\t\t\t\t\t\t\t\t\t\t\t\theight=\"30\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"d-inline-block align-top\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t{\" VĀRPAS 1\"}\r\n\t\t\t\t\t\t\t\t\t\t</Navbar.Brand>\r\n\t\t\t\t\t\t\t\t\t\t<Navbar.Toggle aria-controls=\"responsive-navbar-nav\"/>\r\n\t\t\t\t\t\t\t\t\t\t<Navbar.Collapse id=\"responsive-navbar-nav\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Nav className=\"mr-auto\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LinkContainer exact={true} to=\"/\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Nav.Link>Darbinieki</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LinkContainer exact={true} to=\"/report\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Nav.Link>Atskaites</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LinkContainer exact={true} to=\"/schedule\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Nav.Link>Grafiks</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Nav.Link onClick={this.props.showHistory}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tVēsture\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Nav.Link \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.props.showNotifications} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ position: \"relative\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tPaziņojumi\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tposition: \"absolute\", \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tright: \"-10px\", \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: \"red\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttextAlign: \"center\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlineHeight: \"19px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: \"50%\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: \"20px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"20px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"white\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: \"12px\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.notifications.data.filter((notification) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst notificationDate = new Date(notification.date);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn notificationDate.getFullYear() === new Date().getFullYear() &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnotificationDate.getMonth() === new Date().getMonth() &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnotificationDate.getDate() === new Date().getDate() &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!notification.type.includes(\"LOG\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}).length}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t\t\t\t\t\t<Nav>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Navbar.Text className=\"ml-md-4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<u>{this.state.user.username}</u>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Navbar.Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Nav.Link className=\"ml-md-2\" onClick={this.logOut}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tIziet\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FiLogOut className=\"ml-1\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t\t\t\t\t</Navbar.Collapse>\r\n\t\t\t\t\t\t\t\t\t</Navbar>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/\" component={Employees} />\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/report\" component={Report} />\r\n\t\t\t\t\t\t\t\t\t\t<Route exact path=\"/schedule\" component={Schedule} />\r\n\t\t\t\t\t\t\t\t\t\t<Route component={NotFound} />\r\n\t\t\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t\t\t\t<ViewEmployee/>\r\n\t\t\t\t\t\t\t\t\t<RegisterEmployee/>\r\n\t\t\t\t\t\t\t\t\t<DeleteEmployee/>\r\n\t\t\t\t\t\t\t\t\t<EditEmployee/>\r\n\t\t\t\t\t\t\t\t\t<ExportExcel/>\r\n\t\t\t\t\t\t\t\t\t<CheckCard/>\r\n\t\t\t\t\t\t\t\t\t<CommentEmployee/>\r\n\t\t\t\t\t\t\t\t\t<History/>\r\n\t\t\t\t\t\t\t\t\t<Notifications/>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col className=\"footer\">\r\n\t\t\t\t\t\t\t\t\tVārpas 1 © 2019\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Router>\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\t// User Log In\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<LogIn/>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tnotifications: state.employees.notifications,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tupdateUser: (user) => dispatch(updateUser(user)),\r\n\t\tshowNotifications: () => dispatch(showNotifications()),\r\n\t\tupdateNotifications: (data) => dispatch(updateNotifications(data)),\r\n\t\tshowHistory: () => dispatch(showHistory()),\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === \"localhost\" ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === \"[::1]\" ||\r\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(\r\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n\t\t)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won\"t work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"load\", () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let\"s check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\"This web app is being served cache-first by a service \" +\r\n\t\t\t\t\t\t\t\"worker. To learn more, visit http://bit.ly/CRA-PWA\"\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then(registration => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t\"New content is available and will be used when all \" +\r\n\t\t\t\t\t\t\t\t\t\"tabs for this page are closed. See http://bit.ly/CRA-PWA.\"\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It\"s the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\");\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can\"t reload the page.\r\n\tfetch(swUrl)\r\n\t\t.then(response => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get(\"content-type\");\r\n\t\t\tif (\r\n\t\t\t\tresponse.status === 404 ||\r\n\t\t\t\t(contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n\t\t\t) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"No internet connection found. App is running in offline mode.\"\r\n\t\t\t);\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif (\"serviceWorker\" in navigator) {\r\n\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\tregistration.unregister();\r\n\t\t});\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./styles/index.css\";\r\nimport App from \"./components/App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nimport store from \"./store/store\";\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\ndocument.getElementById(\"root\"));\r\n\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.96ebfbf9.png\";"],"sourceRoot":""}