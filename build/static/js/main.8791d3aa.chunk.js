(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{175:function(e,t,a){e.exports=a(318)},184:function(e,t,a){},315:function(e,t,a){},318:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(9),l=a(18),i=a.n(l),s=(a(184),a(10)),c=a(11),u=a(13),m=a(12),d=a(14),h=a(74),p=a(161),E=a(21),f=a(95),g=a(331),y=a(332),k=a(325),v=a(253),b=a(336),w=a(334),C=a(164),D=!0,S=D?"http://192.168.1.150:8080":"http://localhost:8080",O=1e4,N=1e4,x=a.n(C).a.create({baseURL:S,withCredentials:!0}),j=a(5),L=a(34),I=a(252),F=a(328),T=a(338),_=a(337),P=a(321),A=a(55),H=a.n(A),M=a(56),W=a.n(M),z=function(e){return o.a.createElement("div",{className:"container-box"},o.a.createElement("div",{className:"container-box-header"},e.header),o.a.createElement("div",{className:"container-box-body"},e.children))},R=a(326),U=function(e){return{type:"UPDATE_USER",payload:e}},G=function(e){return{type:"SHOW_EMPLOYEE_WORK_LOG",payload:e}},Y=function(){return{type:"HIDE_EMPLOYEE_WORK_LOG"}},B=function(e){return{type:"SHOW_DELETE_EMPLOYEE",payload:e}},K=function(){return{type:"HIDE_DELETE_EMPLOYEE"}},J=function(e){return{type:"SHOW_EDIT_EMPLOYEE",payload:e}},V=function(){return{type:"HIDE_EDIT_EMPLOYEE"}},X=function(){return{type:"SHOW_REGISTER_EMPLOYEE"}},q=function(){return{type:"HIDE_REGISTER_EMPLOYEE"}},Z=function(){return{type:"SHOW_EXPORT_EXCEL"}},$=function(){return{type:"HIDE_EXPORT_EXCEL"}},Q=function(){return{type:"SHOW_CHECK_CARD"}},ee=function(){return{type:"HIDE_CHECK_CARD"}},te=function(e){return{type:"SHOW_COMMENT_EMPLOYEE",payload:e}},ae=function(){return{type:"HIDE_COMMENT_EMPLOYEE"}},ne=function(e){return{type:"UPDATE_NOTIFICATIONS",payload:e}},oe=function(){return{type:"SHOW_NOTIFICATIONS"}},re=function(){return{type:"HIDE_NOTIFICATIONS"}},le=function(e,t){return{type:"SHOW_PROCESS_NOTIFICATION",payload:e,justified:t}},ie=function(){return{type:"HIDE_PROCESS_NOTIFICATION"}},se=function(){return{type:"SHOW_HISTORY"}},ce=function(){return{type:"HIDE_HISTORY"}},ue=a(52),me=a(173),de={user:null,employees:[],employeeWorkLog:{show:!1,id:null},deleteEmployee:{show:!1,employee:{}},editEmployee:{show:!1,employee:{}},registerEmployee:{show:!1},exportExcel:{show:!1},checkCard:{show:!1},commentEmployee:{show:!1,employee:{}},notifications:{show:!1,notifications:[]},processNotification:{show:!1,notification:null,justified:!1},processedNotification:{show:!1,notifications:[]},history:{show:!1}},he=Object(ue.b)({employees:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER":return Object(j.a)({},e,{user:t.payload});case"UPDATE_EMPLOYEES":return Object(j.a)({},e,{employees:Object(me.a)(t.payload)});case"UPDATE_EMPLOYEE":return Object(j.a)({},e,{employees:e.employees.map(function(e){return e.id===t.payload.id?t.payload:e})});case"SHOW_EMPLOYEE_WORK_LOG":return Object(j.a)({},e,{employeeWorkLog:Object(j.a)({},e.employeeWorkLog,{show:!0,id:t.payload})});case"HIDE_EMPLOYEE_WORK_LOG":return Object(j.a)({},e,{employeeWorkLog:Object(j.a)({},e.employeeWorkLog,{show:!1,id:null})});case"SHOW_DELETE_EMPLOYEE":return Object(j.a)({},e,{deleteEmployee:Object(j.a)({},e.deleteEmployee,{show:!0,employee:t.payload})});case"HIDE_DELETE_EMPLOYEE":return Object(j.a)({},e,{deleteEmployee:Object(j.a)({},e.deleteEmployee,{show:!1,employee:{}})});case"SHOW_EDIT_EMPLOYEE":return Object(j.a)({},e,{editEmployee:Object(j.a)({},e.editEmployee,{show:!0,employee:t.payload})});case"HIDE_EDIT_EMPLOYEE":return Object(j.a)({},e,{editEmployee:Object(j.a)({},e.editEmployee,{show:!1,employee:{}})});case"SHOW_REGISTER_EMPLOYEE":return Object(j.a)({},e,{registerEmployee:Object(j.a)({},e.registerEmployee,{show:!0})});case"HIDE_REGISTER_EMPLOYEE":return Object(j.a)({},e,{registerEmployee:Object(j.a)({},e.registerEmployee,{show:!1})});case"SHOW_EXPORT_EXCEL":return Object(j.a)({},e,{exportExcel:Object(j.a)({},e.exportExcel,{show:!0})});case"HIDE_EXPORT_EXCEL":return Object(j.a)({},e,{exportExcel:Object(j.a)({},e.exportExcel,{show:!1})});case"SHOW_CHECK_CARD":return Object(j.a)({},e,{checkCard:Object(j.a)({},e.checkCard,{show:!0})});case"HIDE_CHECK_CARD":return Object(j.a)({},e,{checkCard:Object(j.a)({},e.checkCard,{show:!1})});case"SHOW_COMMENT_EMPLOYEE":return Object(j.a)({},e,{commentEmployee:Object(j.a)({},e.commentEmployee,{show:!0,employee:t.payload})});case"HIDE_COMMENT_EMPLOYEE":return Object(j.a)({},e,{commentEmployee:Object(j.a)({},e.commentEmployee,{show:!1,employee:{}})});case"UPDATE_NOTIFICATIONS":return Object(j.a)({},e,{notifications:Object(j.a)({},e.notifications,{notifications:t.payload})});case"SHOW_NOTIFICATIONS":return Object(j.a)({},e,{notifications:Object(j.a)({},e.notifications,{show:!0})});case"HIDE_NOTIFICATIONS":return Object(j.a)({},e,{notifications:Object(j.a)({},e.notifications,{show:!1})});case"SHOW_PROCESS_NOTIFICATION":return Object(j.a)({},e,{processNotification:Object(j.a)({},e.processNotification,{notification:t.payload,show:!0,justified:t.justified})});case"HIDE_PROCESS_NOTIFICATION":return Object(j.a)({},e,{processNotification:Object(j.a)({},e.processNotification,{notification:null,show:!1})});case"SHOW_HISTORY":return Object(j.a)({},e,{history:Object(j.a)({},e.history,{show:!0})});case"HIDE_HISTORY":return Object(j.a)({},e,{history:Object(j.a)({},e.history,{show:!1})});default:return e}}});var pe=Object(ue.c)(he,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),Ee="LOG_EDIT_WORK_LOG",fe="LOG_SET_WORKING",ge="LOG_SET_NOT_WORKING",ye="LOG_EDIT_EMPLOYEE",ke="LOG_ADD_EMPLOYEE",ve=function(){return we().then(function(e){pe.dispatch({type:"UPDATE_EMPLOYEES",payload:e.data})})},be=function(e){return Ce(e).then(function(e){pe.dispatch({type:"UPDATE_EMPLOYEE",payload:e.data})})},we=function(){return x.post("/getEmployees")},Ce=function(e){return x.post("/getEmployee",{id:e})},De=function(){return x.post("/getNotifications")},Se=function(e,t){return x.post("/addNotification",{type:e,data:t}).then(function(){De().then(function(e){pe.dispatch(ne(e.data))})})},Oe=function(e,t,a){return x.post("/updateNotification",{id:e,type:t,data:a}).then(function(){De().then(function(e){pe.dispatch(ne(e.data))})})},Ne=function(e){return x.post("/getSchedules",{month:e})},xe=function(e){return x.post("/saveSchedules",{schedules:e})},je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DESC";return x.post("/getEmployeeWorkLog",{id:e,order:t})},Le=function(e,t,a){return x.post("/getEmployeeWorkLogFromTo",{id:e,from:t,to:a})},Ie=function(e,t,a){return x.post("/deleteWorkLog",{id:e,working:t,employeeId:a})},Fe=function(e,t,a,n,o,r){var l={startDate:JSON.stringify(r.start_time),endDate:JSON.stringify(r.end_time)},i={startDate:JSON.stringify(t),endDate:JSON.stringify(a)};return console.log(l),console.log(i),Se(Ee,{user:pe.getState().employees.user.username,id:o,startDate:t,endDate:a,from:l,to:i}),console.log("workLogId: ",e),x.post("/editWorkLog",{workLogId:e,startDate:t,endDate:a,working:n})},Te=function(e){return x.post("/addEmployee",{employee:e})},_e=function(e){return x.post("/deleteEmployee",{id:e})},Pe=function(e){return x.post("/export",{settings:e}).then(function(){return x.get("/export",{responseType:"blob"})})},Ae=function(e){return x.post("/cardScanned",{uid:e,admin:1})},He=function(e){return x.post("/getEmployeeByUID",{uid:e})},Me=function(e,t){return x.post("/setEmployeeUID",{uid:e,id:t})},We=function(e){return x.post("/removeEmployeeUID",{id:e})},ze=function(){return x.post("/awaitCard")},Re=a(17),Ue=Object(n.forwardRef)(function(e,t){return o.a.createElement(I.a,{ref:t,variant:"link",onClick:e.onClick},o.a.createElement(Re.h,null))});var Ge=Object(r.b)(function(){return{}},function(e){return{showDeleteEmployee:function(t){return e(B(t))},showEditEmployee:function(t){return e(J(t))},showCommentEmployee:function(t){return e(te(t))}}})(function(e){return o.a.createElement(k.a,{className:"justify-content-end"},o.a.createElement(v.a,{xs:"auto",className:"d-inline-block"},o.a.createElement(P.a,null,o.a.createElement(P.a.Toggle,{as:Ue}),o.a.createElement(P.a.Menu,{flip:!0,alignRight:!0},o.a.createElement(P.a.Item,{eventKey:"1",onClick:function(){return e.showEditEmployee(e.employee)}},o.a.createElement(Re.c,{className:"mr-2 mb-1"}),"Redi\u0123\u0113t"),o.a.createElement(P.a.Item,{eventKey:"2",onClick:function(){return(t=e.employee.id,a=!e.employee.archived,x.post("/setArchivedEmployee",{id:t,archived:a})).then(function(){be(e.employee.id)});var t,a}},o.a.createElement(Re.a,{height:"100%",width:"auto",className:"mr-2 mb-1"}),e.employee.archived?"Iz\u0146emt no arh\u012bva":"Arhiv\u0113t"),o.a.createElement(P.a.Item,{eventKey:"3",onClick:function(){return(t=e.employee.id,a=!e.employee.active,x.post("/setActiveEmployee",{id:t,active:a})).then(function(){be(e.employee.id)});var t,a}},e.employee.active?o.a.createElement(Re.k,{height:"100%",width:"auto",className:"mr-2 mb-1"}):o.a.createElement(Re.b,{height:"100%",width:"auto",className:"mr-2 mb-1"}),e.employee.active?"Deaktiviz\u0113t":"Aktiviz\u0113t"),o.a.createElement(P.a.Item,{eventKey:"4",onClick:function(){return e.showDeleteEmployee(e.employee)}},o.a.createElement(Re.i,{height:"100%",width:"auto",className:"mr-2 mb-1"}),"Dz\u0113st"),o.a.createElement(P.a.Item,{eventKey:"5",onClick:function(){return e.showCommentEmployee(e.employee)}},o.a.createElement(Re.c,{className:"mr-2 mb-1"}),"Pievienot Koment\u0101ru")))),o.a.createElement(v.a,{xs:"auto",className:"d-inline-block"},o.a.createElement(T.a,{placement:"top",overlay:o.a.createElement(R.a,null,"Atz\u012bm\u0113t k\u0101 ",e.employee.working?"izg\u0101ju\u0161u":"ien\u0101ku\u0161u")},o.a.createElement(I.a,{onClick:function(){return(t=e.employee.id,a=!e.employee.working,Se(a?fe:ge,{user:pe.getState().employees.user.username,id:t}),x.post("/setEmployeeWorking",{id:t,working:a})).then(function(){be(e.employee.id)});var t,a},variant:e.employee.working?"danger":"success"},e.employee.working?o.a.createElement(Re.k,null):o.a.createElement(Re.b,null)))))}),Ye=a(333),Be=a(327),Ke=a(306),Je=a(170),Ve=a.n(Je),Xe=a(174),qe=(a(304),function(e){return o.a.createElement("div",{className:e.className},o.a.createElement(Ve.a,Object.assign({className:"text-center",customInput:o.a.createElement(Ye.a.Control,null),locale:Xe.a},e)))}),Ze={showFilters:!1,showArchive:!1,showInactive:!1,showWorking:!1,showNotWorking:!0,nameFilter:"",positionFilter:"",companyFilter:"",pageSize:10},$e=function(){return x.post("/checkSession")},Qe=function(e,t,a){return x.post("/authenticate",{username:e,password:t,rememberMe:a})},et=function(){return x.post("/logOut")},tt=function(){return x.post("/getUserByKey")},at=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).saveSettings=function(){var t=new L.a,a=Object(j.a)({},t.get("settings"),{showFilters:e.state.showFilters,showArchive:e.state.showArchive,showInactive:e.state.showInactive,showWorking:e.state.showWorking,showNotWorking:e.state.showNotWorking,showScheduleUnchecked:e.state.showScheduleUnchecked,nameFilter:e.state.nameFilter,positionFilter:e.state.positionFilter,companyFilter:e.state.companyFilter,startDate:e.state.startDate,endDate:e.state.endDate});t.set("settings",a)},e.onFilterChange=function(){e.props.onFilterChange(e.state)},e.filterData=function(t){e.applyNameFilter(t,function(t){e.applyPositionFilter(t,function(t){e.applyCompanyFilter(t,function(t){e.applyCheckboxFilters(t,function(t){e.props.onDataFiltered(t)})})})})},e.applyNameFilter=function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null})(t.filter(function(t){return(t.name.name+" "+t.name.surname).toString().toLowerCase().indexOf(e.state.nameFilter.toLowerCase())>-1}))},e.applyCompanyFilter=function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null})(t.filter(function(t){return(t.company?t.company:"").toString().toLowerCase().indexOf(e.state.companyFilter.toLowerCase())>-1}))},e.applyPositionFilter=function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null})(t.filter(function(t){return(t.position?t.position:"").toString().toLowerCase().indexOf(e.state.positionFilter.toLowerCase())>-1}))},e.applyCheckboxFilters=function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null})(t.filter(function(t){return!(t.archived&&!e.state.showArchive)&&(!(!t.active&&!e.state.showInactive)&&((!t.working||!e.state.showNotWorking)&&(!(e.props.scheduleFilters&&!t.checked&&!e.state.showScheduleUnchecked)&&!(!t.working&&e.state.showWorking))))}))},e.onToggleFilters=function(){e.setState({showFilters:!e.state.showFilters})},e.onToggleArchive=function(){e.setState({showArchive:!e.state.showArchive})},e.onToggleInactive=function(){e.setState({showInactive:!e.state.showInactive})},e.onToggleShowWorking=function(){e.setState({showWorking:!e.state.showWorking})},e.onToggleShowNotWorking=function(){e.setState({showNotWorking:!e.state.showNotWorking})},e.onToggleShowScheduleUnchecked=function(){e.setState({showScheduleUnchecked:!e.state.showScheduleUnchecked})},e.onChangeNameFilter=function(t){e.setState({nameFilter:t.target.value})},e.onChangePositionFilter=function(t){e.setState({positionFilter:t.target.value})},e.onChangeCompanyFilter=function(t){e.setState({companyFilter:t.target.value})},e.onChangeDateStart=function(t){var a=new Date(t);a.setHours(0,0,0,0),e.setState({startDate:a})},e.onChangeDateEnd=function(t){var a=new Date(t);a.setHours(23,59,59,59),e.setState({endDate:a})},e.onClickFilter=function(t){switch(t){case 0:e.onChangeDateStart(new Date),e.onChangeDateEnd(new Date);break;case 1:var a=new Date;a.setDate(a.getDate()-1),e.onChangeDateStart(a),e.onChangeDateEnd(a);break;case 2:var n=new Date;n.setDate(n.getDate()-7),e.onChangeDateStart(n),e.onChangeDateEnd(new Date);break;case 3:var o=new Date;o.setDate(o.getDate()-30),e.onChangeDateStart(o),e.onChangeDateEnd(new Date);break;default:e.onChangeDateStart(new Date),e.onChangeDateEnd(new Date)}e.setState({dropdown:Object(j.a)({},e.state.dropdown,{currentFilter:e.state.dropdown.filters[t]})})},e.clearAllFilters=function(){var t=new Date;t.setHours(0,0,0);var a=new Date;a.setHours(23,59,59),e.setState({nameFilter:"",positionFilter:"",companyFilter:"",showArchive:!1,showInactive:!1,showWorking:!1,showNotWorking:!1,startDate:t,endDate:a})};var a=(new L.a).get("settings");return(new Date).setHours(0,0,0),(new Date).setHours(23,59,59),e.state=Object(j.a)({},Ze,a,{dropdown:{currentFilter:"\u0160odiena",filters:["\u0160odiena","Vakardiena","P\u0113d\u0113j\u0101s 7 dienas","P\u0113d\u0113j\u0101s 30 dienas"]}}),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.filterData(this.filterData)}},{key:"componentWillUnmount",value:function(){this.props.filterData(void 0)}},{key:"componentDidUpdate",value:function(e,t){t.showArchive===this.state.showArchive&&t.showInactive===this.state.showInactive&&t.showWorking===this.state.showWorking&&t.showNotWorking===this.state.showNotWorking&&t.showScheduleUnchecked===this.state.showScheduleUnchecked&&t.nameFilter===this.state.nameFilter&&t.positionFilter===this.state.positionFilter&&t.companyFilter===this.state.companyFilter&&t.startDate===this.state.startDate&&t.endDate===this.state.endDate||this.onFilterChange(),t.showFilters===this.state.showFilters&&t.showArchive===this.state.showArchive&&t.showInactive===this.state.showInactive&&t.showWorking===this.state.showWorking&&t.showNotWorking===this.state.showNotWorking&&t.showScheduleUnchecked===this.state.showScheduleUnchecked&&t.nameFilter===this.state.nameFilter&&t.positionFilter===this.state.positionFilter&&t.companyFilter===this.state.companyFilter&&t.startDate===this.state.startDate&&t.endDate===this.state.endDate||this.saveSettings()}},{key:"render",value:function(){var e=this,t=o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{xs:"auto"},o.a.createElement(Ye.a.Group,{as:k.a},o.a.createElement(Ye.a.Label,{column:!0,xs:"auto",className:"pr-0"},"Dati no"),o.a.createElement(v.a,null,o.a.createElement(qe,{dateFormat:"dd.MM.yyyy.",selected:new Date(this.state.startDate),onChange:this.onChangeDateStart,maxDate:new Date})))),o.a.createElement(v.a,{xs:"auto"},o.a.createElement(Ye.a.Group,{as:k.a},o.a.createElement(Ye.a.Label,{column:!0,xs:"auto",className:"pl-0 pr-0"},"l\u012bdz"),o.a.createElement(v.a,null,o.a.createElement(qe,{dateFormat:"dd.MM.yyyy.",selected:new Date(this.state.endDate),onChange:this.onChangeDateEnd,minDate:new Date(this.state.startDate),maxDate:new Date})))),o.a.createElement(v.a,{xs:"auto"},o.a.createElement(Be.a,{alignRight:!0,variant:"secondary",title:this.state.dropdown.currentFilter},this.state.dropdown.filters.map(function(t,a){return o.a.createElement(P.a.Item,{key:a,onClick:function(){return e.onClickFilter(a)}},t)}))));return o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement(I.a,{variant:"link",onClick:this.onToggleFilters,className:"float-left"},this.state.showFilters?o.a.createElement(Re.g,{className:"mr-2 mb-1"}):o.a.createElement(Re.e,{className:"mr-2 mb-1"}),"Filtri"),o.a.createElement(P.a,{alignRight:!0,className:"float-right"},o.a.createElement(P.a.Toggle,{variant:"link"},"Opcijas"),o.a.createElement(P.a.Menu,null,o.a.createElement(P.a.Item,{onClick:this.props.showRegisterEmployee},"Pievienot darbinieku"),o.a.createElement(P.a.Item,{onClick:this.props.showCheckCard},"Atrast darbinieku p\u0113c kartes"),o.a.createElement(P.a.Item,{onClick:this.props.showExportExcel},"Eksport\u0113t Excel"))))),o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement(Ke.a,{in:this.state.showFilters},o.a.createElement("div",null,o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Check,{type:"checkbox",label:"R\u0101d\u012bt arh\u012bv\u0101 eso\u0161os darbiniekus",checked:this.state.showArchive,onChange:this.onToggleArchive})),o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Check,{type:"checkbox",label:"R\u0101d\u012bt deaktiviz\u0113tus darbiniekus",checked:this.state.showInactive,onChange:this.onToggleInactive})),o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Check,{type:"checkbox",label:"R\u0101d\u012bt tikai ien\u0101ku\u0161os darbiniekus",checked:this.state.showWorking,onChange:this.onToggleShowWorking})),o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Check,{type:"checkbox",label:"R\u0101d\u012bt tikai izg\u0101ju\u0161os darbiniekus",checked:this.state.showNotWorking,onChange:this.onToggleShowNotWorking})),this.props.scheduleFilters?o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Check,{type:"checkbox",label:"R\u0101d\u012bt neatz\u012bm\u0113tos grafika darbiniekus",checked:this.state.showScheduleUnchecked,onChange:this.onToggleShowScheduleUnchecked})):null),o.a.createElement(v.a,null,o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Control,{placeholder:"V\u0101rds...",onChange:this.onChangeNameFilter,value:this.state.nameFilter}),o.a.createElement(Ye.a.Text,null,"Mekl\u0113t darbinieku p\u0113c v\u0101rda vai uzv\u0101rda")),o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Control,{placeholder:"Amats...",onChange:this.onChangePositionFilter,value:this.state.positionFilter}),o.a.createElement(Ye.a.Text,null,"Mekl\u0113t darbinieku p\u0113c amata")),o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Control,{placeholder:"Uz\u0146\u0113mums...",onChange:this.onChangeCompanyFilter,value:this.state.companyFilter}),o.a.createElement(Ye.a.Text,null,"Mekl\u0113t darbinieku p\u0113c uz\u0146\u0113muma")))),o.a.createElement(k.a,{className:"mb-2"},this.props.dateFilter?t:null,o.a.createElement(v.a,null,o.a.createElement(I.a,{variant:"danger",onClick:this.clearAllFilters,className:"float-right"},o.a.createElement("nobr",null,"Not\u012br\u012bt visus filtrus")))),o.a.createElement("hr",null)))))))}}]),t}(o.a.PureComponent);var nt=Object(r.b)(function(e){return{}},function(e){return{showRegisterEmployee:function(){return e(X())},showExportExcel:function(){return e(Z())},showCheckCard:function(){return e(Q())}}})(at),ot=function(){return x.post("/ping")},rt=function(e){return e<10&&(e="0"+e),e},lt=function(e){var t=Math.floor(e/1e3),a=Math.floor(t/60),n=Math.floor(a/60);return{seconds:t=t-60*n*60-60*(a-=60*n),minutes:a,hours:n}},it=function(e){var t=new Date(e),a=rt(t.getDate())+"."+rt(t.getMonth()+1)+"."+rt(t.getFullYear())+" ";return a+=rt(t.getHours())+":"+rt(t.getMinutes())},st=function(e,t){return new Date(t,e+1,0).getDate()},ct=function(e){var t=e.getDay();return 0===t||6===t},ut=function(e){for(var t=["\u0100","\u010c","\u0112","\u0122","\u012a","\u0136","\u013b","\u0145","\u0160","\u016a","\u017d"],a=["A","C","E","G","I","K","L","N","S","U","Z"],n="",o=0;o<e.length;o++){var r=e.toUpperCase().charAt(o);-1!==t.indexOf(r)?n+=a[t.indexOf(r)]:n+=r}return n},mt=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).saveSettings=function(){var t=new L.a,a=Object(j.a)({},t.get("settings"),{pageSize:e.state.pageSize});t.set("settings",a)},e.onTableChange=function(){e.formatTable(function(t){e.filterData(t)})},e.onFilterChange=function(){e.onTableChange()},e.onDataFiltered=function(t){e.setState({tableData:t})},e.formatTable=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a=new Date;a.setHours(0,0,0);var n=new Date;n.setHours(23,59,59);var o=e.props.employees.map(function(e){var t=[];return e.workLog.forEach(function(e){if(new Date(e.start_time).getTime()>=a.getTime()&&new Date(e.start_time).getTime()<=n.getTime())return t.push(e)}),{id:e.id,position:e.position?e.position.toString():"",company:e.company?e.company.toString():"",archived:e.archived,active:e.active,working:e.working,name:{id:e.id,name:e.name,surname:e.surname,working:e.working,comments:e.comments},today:{working:e.working,workLogs:t},commands:e}});Promise.all(o).then(function(e){t(e)})};var a=new L.a,n=a.get("settings");return n||(n={pageSize:10},a.set("settings",n)),e.state=Object(j.a)({workLogUserId:null,showWorkLogModal:!1,tableData:[],pageSize:10},n),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.onTableChange()}},{key:"componentDidUpdate",value:function(e,t){e.employees!==this.props.employees&&this.onTableChange(),t.pageSize!==this.state.pageSize&&this.saveSettings()}},{key:"render",value:function(){var e=this,t=function(e,t){return o.a.createElement("span",{className:"d-none d-md-inline-block text-truncate",style:{maxWidth:"14vw"}},e)},a=[{dataField:"id",text:"#",sort:!0,classes:"align-middle d-none d-md-table-cell",headerClasses:"d-none d-md-table-cell"},{dataField:"name",text:"Darbinieks",sort:!0,sortFunc:function(e,t,a){return ut(e.surname)<ut(t.surname)?"asc"===a?-1:1:ut(e.surname)>ut(t.surname)?"asc"===a?1:-1:0},classes:"align-middle",formatter:function(t,a){var n={borderBottom:"solid 1px gray"},r=t.comments.length?t.comments.map(function(e,a){return o.a.createElement(k.a,{key:a,style:a<t.comments.length-1?n:null,className:"ml-1 mr-1 pt-1 pb-2"},o.a.createElement(v.a,{className:"align-self-center"},o.a.createElement("span",null,e.text)),o.a.createElement(v.a,{xs:"auto"},o.a.createElement(I.a,{size:"sm",variant:"link",onClick:function(){return(a=e.id,x.post("/deleteEmployeeComment",{commentId:a})).then(function(){be(t.id)});var a}},o.a.createElement(Re.l,{className:"mb-1"}))))}):null;return o.a.createElement("div",null,o.a.createElement("nobr",null,o.a.createElement(F.a,{style:{fontSize:"14px"},variant:t.working?"success":"danger"},o.a.createElement(Re.j,null)),o.a.createElement(I.a,{variant:"link",onClick:function(){return e.props.showEmployeeWorkLog(t.id)},style:{color:"#0000FF"}},t.surname+" "+t.name),t.comments.length?o.a.createElement(T.a,{trigger:"click",rootClose:!0,placement:"bottom",overlay:o.a.createElement(_.a,null,r)},o.a.createElement(I.a,{size:"sm",variant:"link"},o.a.createElement(Re.f,null))):null))}},{dataField:"company",text:"Uz\u0146\u0113mums",sort:!0,classes:"align-middle d-none d-lg-table-cell",headerClasses:"d-none d-lg-table-cell",formatter:t},{dataField:"position",text:"Amats",sort:!0,classes:"align-middle d-none d-lg-table-cell",headerClasses:"d-none d-lg-table-cell",formatter:t},{dataField:"today",text:"\u0160odien",sort:!0,sortFunc:function(e,t,a){if(e.workLogs.length&&t.workLogs.length){var n=e.working?new Date(e.workLogs[e.workLogs.length-1].start_time):new Date(e.workLogs[e.workLogs.length-1].end_time),o=t.working?new Date(t.workLogs[t.workLogs.length-1].start_time):new Date(t.workLogs[t.workLogs.length-1].end_time);if(n>o)return"asc"===a?1:-1;if(n<o)return"asc"===a?-1:1}return e.workLogs.length?0:"asc"===a?-1:1},classes:"align-middle",formatter:function(e,t){var a=[],n=0,r={hours:0,minutes:0,seconds:0};if(e.workLogs.forEach(function(t,l){var i,s;null===t.end_time&&(t.end_time=new Date),i=new Date(t.end_time)-new Date(t.start_time),s=lt(i);var c=rt(new Date(t.start_time).getHours())+":"+rt(new Date(t.start_time).getMinutes()),u=rt(new Date(t.end_time).getHours())+":"+rt(new Date(t.end_time).getMinutes()),m=s.hours+" st. "+s.minutes+" min. ";n+=new Date(t.end_time)-new Date(t.start_time),r=lt(n),a.push(o.a.createElement(k.a,{key:l,style:{fontSize:"14px"}},o.a.createElement(v.a,{xs:6},o.a.createElement("nobr",null,o.a.createElement("span",null,c),e.working&&l===e.workLogs.length-1?null:o.a.createElement("span",null,"\u2192 ",u))),o.a.createElement(v.a,{xs:"auto",className:"text-center"},null!==m?o.a.createElement("span",null,m):null)))}),a.length){var l=r.hours+" st. "+r.minutes+" min. ";a.push(o.a.createElement(k.a,{key:a.length,style:{fontSize:"14px"}},o.a.createElement(v.a,{xs:6}),o.a.createElement(v.a,{xs:"auto",className:"text-center",style:{borderTop:"solid 1px"}},null!==l?o.a.createElement("span",null,o.a.createElement("b",null,l)):null)))}return a}},{dataField:"commands",text:"",classes:"align-middle",formatter:function(e,t){return o.a.createElement(Ge,{employee:e})}}],n=W()({page:1,alwaysShowAllBtns:!0,showTotal:!1,sizePerPage:this.state.pageSize,sizePerPageRenderer:function(t){var a=t.options,n=(t.currSizePerPage,t.onSizePerPageChange);return o.a.createElement(P.a,{className:"d-inline pr-2"},o.a.createElement(P.a.Toggle,{variant:"primary"},9999===e.state.pageSize?"Viss":e.state.pageSize),o.a.createElement(P.a.Menu,null,a.map(function(t,a){return o.a.createElement(P.a.Item,{key:a,onClick:function(){!function(t){e.setState({pageSize:t.page})}(t),n(t.page)}},t.text)})))},sizePerPageList:[{text:"10",value:10},{text:"25",value:25},{text:"50",value:50},{text:"100",value:100},{text:"Viss",value:9999}]});return o.a.createElement(z,{header:"Darbinieki"},o.a.createElement(nt,{onDataFiltered:this.onDataFiltered,onFilterChange:this.onFilterChange,filterData:function(t){return e.filterData=t}}),o.a.createElement(H.a,{bootstrap4:!0,keyField:"id",data:this.state.tableData,columns:a,bordered:!1,hover:!0,defaultSorted:[{dataField:"name",order:"asc"}],remote:{filter:!0},onTableChange:this.onTableChange,pagination:n,rowStyle:function(e){return e.active?e.archived?{backgroundColor:"rgba(255, 255, 0, 0.1)"}:void 0:{backgroundColor:"rgba(255, 0, 0, 0.1)"}}}))}}]),t}(o.a.Component);var dt=Object(r.b)(function(e){return{employees:e.employees.employees}},function(e){return{showRegisterEmployee:function(){return e(X())},showExportExcel:function(){return e(Z())},showCheckCard:function(){return e(Q())},showEmployeeWorkLog:function(t){return e(G(t))}}})(mt),ht=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).saveSettings=function(){var t=new L.a,a=Object(j.a)({},t.get("settings"),{pageSize:e.state.pageSize});t.set("settings",a)},e.onTableChange=function(){e.formatTable(function(t){e.filterData(t)})},e.onFilterChange=function(t){e.setState({startDate:t.startDate,endDate:t.endDate},function(){e.onTableChange()})},e.onDataFiltered=function(t){e.setState({tableData:t})},e.formatTable=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a=new Date(e.state.startDate),n=new Date(e.state.endDate),o=e.props.employees.map(function(e){var t=[];return e.workLog.forEach(function(e){if(new Date(e.start_time).getTime()>=a.getTime()&&new Date(e.start_time).getTime()<=n.getTime())return t.push(e)}),{id:e.id,position:e.position?e.position.toString():"",company:e.company?e.company.toString():"",archived:e.archived,active:e.active,working:e.working,name:{id:e.id,name:e.name,surname:e.surname,working:e.working,comments:e.comments},today:{working:e.working,workLogs:t},commands:e}});Promise.all(o).then(function(e){t(e)})};var a=new L.a,n=a.get("settings"),o=new Date;o.setHours(0,0,0);var r=new Date;return r.setHours(23,59,59),n?n=Object(j.a)({},n,{startDate:n.startDate?new Date(n.startDate):new Date(o),endDate:n.endDate?new Date(n.endDate):new Date(r)}):(n={pageSize:10},a.set("settings",n)),e.state=Object(j.a)({workLogUserId:null,showWorkLogModal:!1,tableData:[],pageSize:10},n,{dropdown:{currentFilter:"\u0160odiena",filters:["\u0160odiena","Vakardiena","P\u0113d\u0113j\u0101s 7 dienas","P\u0113d\u0113j\u0101s 30 dienas"]}}),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.onTableChange()}},{key:"componentDidUpdate",value:function(e,t){e.employees!==this.props.employees&&this.onTableChange(),t.pageSize!==this.state.pageSize&&this.saveSettings()}},{key:"render",value:function(){var e=this,t=function(e,t){return o.a.createElement("span",{className:"d-none d-md-inline-block text-truncate",style:{maxWidth:"14vw"}},e)},a=rt(new Date(this.state.startDate).getDate())+"."+rt(new Date(this.state.startDate).getMonth()+1)+"."+rt(new Date(this.state.startDate).getFullYear()),n=rt(new Date(this.state.endDate).getDate())+"."+rt(new Date(this.state.endDate).getMonth()+1)+"."+rt(new Date(this.state.endDate).getFullYear()),r=[{dataField:"id",text:"#",sort:!0,classes:"align-middle"},{dataField:"name",text:"Darbinieks",sort:!0,sortFunc:function(e,t,a){return ut(e.surname)<ut(t.surname)?"asc"===a?-1:1:ut(e.surname)>ut(t.surname)?"asc"===a?1:-1:0},classes:"align-middle",formatter:function(t,a){return o.a.createElement("div",null,o.a.createElement("nobr",null,o.a.createElement(Re.j,null),o.a.createElement(I.a,{variant:"link",onClick:function(){return e.props.showEmployeeWorkLog(t.id)},style:{color:"#0000FF"}},t.surname+" "+t.name)))}},{dataField:"company",text:"Uz\u0146\u0113mums",sort:!0,classes:"align-middle d-none d-lg-table-cell",headerClasses:"d-none d-lg-table-cell",formatter:t},{dataField:"position",text:"Amats",sort:!0,classes:"align-middle d-none d-lg-table-cell",headerClasses:"d-none d-lg-table-cell",formatter:t},{dataField:"today",text:a+(a===n?"":" - "+n),sort:!0,sortFunc:function(e,t,a){if(e.workLogs.length&&t.workLogs.length){var n=e.working?new Date(e.workLogs[e.workLogs.length-1].start_time):new Date(e.workLogs[e.workLogs.length-1].end_time),o=t.working?new Date(t.workLogs[t.workLogs.length-1].start_time):new Date(t.workLogs[t.workLogs.length-1].end_time);if(n>o)return"asc"===a?1:-1;if(n<o)return"asc"===a?-1:1}return 0},classes:"align-middle",formatter:function(e,t){var a=[],n=0,r={hours:0,minutes:0,seconds:0},l=e.endDate-e.startDate<864e5;if(e.workLogs.forEach(function(t,i){var s,c;null===t.end_time&&(t.end_time=new Date),s=new Date(t.end_time)-new Date(t.start_time),c=lt(s);var u=rt(new Date(t.start_time).getHours())+":"+rt(new Date(t.start_time).getMinutes()),m=rt(new Date(t.end_time).getHours())+":"+rt(new Date(t.end_time).getMinutes()),d=c.hours+" st. "+c.minutes+" min. ";n+=new Date(t.end_time)-new Date(t.start_time),r=lt(n),l&&a.push(o.a.createElement(k.a,{key:i,style:{fontSize:"14px"}},o.a.createElement(v.a,{xs:6},o.a.createElement("nobr",null,o.a.createElement("span",null,u),e.working&&i===e.workLogs.length-1?null:o.a.createElement("span",null,"\u2192 ",m))),o.a.createElement(v.a,{xs:"auto",className:"text-center"},null!==d?o.a.createElement("span",null,d):null)))}),a.length&&l){var i=r.hours+" st. "+r.minutes+" min. ";a.push(o.a.createElement(k.a,{key:a.length,style:{fontSize:"14px"}},o.a.createElement(v.a,{xs:6}),o.a.createElement(v.a,{xs:"auto",className:"text-center",style:{borderTop:"solid 1px"}},null!==i?o.a.createElement("span",null,o.a.createElement("b",null,i)):null)))}else if(!l){var s=r.hours+" st. "+r.minutes+" min. ";a.push(o.a.createElement(k.a,{key:a.length,style:{fontSize:"14px"}},o.a.createElement(v.a,{className:"text-center"},null!==s?o.a.createElement("span",null,s):null),o.a.createElement(v.a,{xs:"4"}),o.a.createElement(v.a,{xs:"4"})))}return a}}],l=W()({page:1,alwaysShowAllBtns:!0,showTotal:!1,sizePerPage:this.state.pageSize,sizePerPageRenderer:function(t){var a=t.options,n=(t.currSizePerPage,t.onSizePerPageChange);return o.a.createElement(P.a,{className:"d-inline pr-2"},o.a.createElement(P.a.Toggle,{variant:"primary"},9999===e.state.pageSize?"Viss":e.state.pageSize),o.a.createElement(P.a.Menu,null,a.map(function(t,a){return o.a.createElement(P.a.Item,{key:a,onClick:function(){!function(t){e.setState({pageSize:t.page})}(t),n(t.page)}},t.text)})))},sizePerPageList:[{text:"10",value:10},{text:"25",value:25},{text:"50",value:50},{text:"100",value:100},{text:"Viss",value:9999}]});return o.a.createElement(z,{header:"Atskaites"},o.a.createElement(nt,{onDataFiltered:this.onDataFiltered,onFilterChange:this.onFilterChange,filterData:function(t){return e.filterData=t},dateFilter:!0}),o.a.createElement(H.a,{bootstrap4:!0,keyField:"id",data:this.state.tableData,columns:r,bordered:!1,hover:!0,defaultSorted:[{dataField:"name",order:"asc"}],remote:{filter:!0},onTableChange:this.onTableChange,pagination:l,rowStyle:function(e){return e.commands.active?e.commands.archived?{backgroundColor:"rgba(255, 255, 0, 0.1)"}:void 0:{backgroundColor:"rgba(255, 0, 0, 0.1)"}}}))}}]),t}(o.a.Component);var pt=Object(r.b)(function(e){return{employees:e.employees.employees}},function(e){return{showEmployeeWorkLog:function(t){return e(G(t))},showExportExcel:function(){return e(Z())}}})(ht),Et=a(335),ft=a(329),gt={DATA_INPUT:0,RFID_WAIT:1,COMPLETE:2},yt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).onNameChange=function(e){a.setState({name:e.target.value})},a.onSurnameChange=function(e){a.setState({surname:e.target.value})},a.onCompanyChange=function(e){a.setState({company:e.target.value})},a.onPositionChange=function(e){a.setState({position:e.target.value})},a.onNumberChange=function(e){a.setState({number:e.target.value})},a.onPersonalCodeChange=function(e){a.setState({personalCode:e.target.value})},a.onAddCardChange=function(){a.setState({addCard:!a.state.addCard})},a.onFormSubmit=function(e){e.preventDefault(),e.stopPropagation();var t={name:a.state.name,surname:a.state.surname,company:a.state.company,position:a.state.position,number:a.state.number,personalCode:a.state.personalCode,uid:a.state.uid};a.state.registrationState===gt.DATA_INPUT?a.state.addCard?(a.setState({registrationState:gt.RFID_WAIT}),ze().then(function(e){a.setState({uid:e.data.uid},function(){t=Object(j.a)({},t,{uid:e.data.uid}),Te(t).then(function(e){ve(),Se(ke,{user:a.props.user.username,id:e.data.id}),a.setState({registrationState:gt.COMPLETE})})})})):Te(t).then(function(e){ve(),Se(ke,{user:a.props.user.username,id:e.data.id}),e.data&&a.setState({registrationState:gt.COMPLETE})}):a.state.registrationState===gt.COMPLETE&&a.props.hideRegisterEmployee()},a.hideRegisterEmployeeAndDelete=function(){a.state.registrationState>=gt.RFID_WAIT&&(_e(a.state.newEmployee.id),a.props.hideRegisterEmployee())},a.onExited=function(){a.setState(Object(j.a)({},a.initialState))},a.initialState={registrationState:gt.DATA_INPUT,checkInterval:null,newEmployee:{},name:"",surname:"",company:'SIA "V\u0101rpas 1"',position:"",number:"",personalCode:"",addCard:!0,uid:null},a.state=Object(j.a)({},a.initialState),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(Et.a,{show:this.props.registerEmployee.show,onHide:function(){return e.props.hideRegisterEmployee()},onExit:this.deleteAndCancel,onExited:this.onExited},o.a.createElement(Ye.a,{onSubmit:this.onFormSubmit},o.a.createElement(Et.a.Header,{closeButton:!0},o.a.createElement(Et.a.Title,null,"Pievienot Darbinieku")),o.a.createElement(Et.a.Body,null,o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"* V\u0101rds"),o.a.createElement(Ye.a.Control,{required:!0,disabled:this.state.registrationState!==gt.DATA_INPUT,value:this.state.name,onChange:this.onNameChange,placeholder:"V\u0101rds"}))),o.a.createElement(v.a,null,o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"* Uzv\u0101rds"),o.a.createElement(Ye.a.Control,{required:!0,disabled:this.state.registrationState!==gt.DATA_INPUT,value:this.state.surname,onChange:this.onSurnameChange,placeholder:"Uzv\u0101rds"})))),o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"Personas Kods"),o.a.createElement(Ye.a.Control,{disabled:this.state.registrationState!==gt.DATA_INPUT,value:this.state.personalCode,onChange:this.onPersonalCodeChange,placeholder:"Personas Kods"}))),o.a.createElement(v.a,null,o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"Telefona Numurs"),o.a.createElement(Ye.a.Control,{disabled:this.state.registrationState!==gt.DATA_INPUT,value:this.state.number,onChange:this.onNumberChange,placeholder:"Telefona Numurs"})))),o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"Uz\u0146\u0113mums"),o.a.createElement(Ye.a.Control,{as:"select",disabled:this.state.registrationState!==gt.DATA_INPUT,onChange:this.onCompanyChange},o.a.createElement("option",null,'SIA "V\u0101rpas 1"'),o.a.createElement("option",null,'SIA "Adeptus Renewable Energy"'),o.a.createElement("option",null,'SIA "Valkas koks"'))),o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"Amats"),o.a.createElement(Ye.a.Control,{disabled:this.state.registrationState!==gt.DATA_INPUT,value:this.state.position,onChange:this.onPositionChange,placeholder:"Darba Amats"})),o.a.createElement(Ye.a.Group,{controlId:"formBasicChecbox"},o.a.createElement(Ye.a.Check,{type:"checkbox",label:"Turpin\u0101t re\u0123istr\u0101ciju pievienojot NFC karti",name:"addCard",checked:this.state.addCard,onChange:this.onAddCardChange})),o.a.createElement(ft.a,{variant:"primary",show:this.state.registrationState===gt.RFID_WAIT,onClose:function(){return null}},"Nosken\u0113jiet v\u0113lamo karti\u0146u."),o.a.createElement(ft.a,{variant:"success",show:this.state.registrationState===gt.COMPLETE,onClose:function(){return null}},"Darbinieks veiksm\u012bgi pievienots darbinieku sarakstam.")),o.a.createElement(Et.a.Footer,null,o.a.createElement(kt,{registrationState:this.state.registrationState,hideRegisterEmployee:this.props.hideRegisterEmployee,hideRegisterEmployeeAndDelete:this.hideRegisterEmployeeAndDelete,addCard:this.state.addCard}))))}}]),t}(o.a.Component);function kt(e){switch(e.registrationState){default:case gt.DATA_INPUT:return o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,{variant:e.addCard?"primary":"success",type:"submit"},e.addCard?"T\u0101l\u0101k":"Pabeigt"));case gt.RFID_WAIT:return null;case gt.COMPLETE:return o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,{variant:"success",type:"submit"},"Pabeigt"))}}var vt=Object(r.b)(function(e){return{employees:e.employees.employees,registerEmployee:e.employees.registerEmployee,user:e.employees.user}},function(e){return{showRegisterEmployee:function(){return e(X())},hideRegisterEmployee:function(){return e(q())}}})(yt),bt=function(){return o.a.createElement(k.a,null,o.a.createElement(v.a,{className:"text-center mt-4 mb-4"},o.a.createElement("h1",null,"404"),o.a.createElement("h5",null,"Lapa netika atrasta...")))},wt=a(330),Ct=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).fetchWorkLog=function(){Ce(a.props.employeeWorkLog.id).then(function(e){a.setState({employee:e.data})}),je(a.props.employeeWorkLog.id,"DESC").then(function(e){a.setState({workLog:e.data})}),clearInterval(a.state.updateInterval),a.setState({updateInterval:setInterval(function(){Ce(a.props.employeeWorkLog.id).then(function(e){a.setState({employee:e.data})}),je(a.props.employeeWorkLog.id,"DESC").then(function(e){a.setState({workLog:e.data})})},N)})},a.onHide=function(){clearInterval(a.state.updateInterval),a.props.hideEmployeeWorkLog()},a.onExited=function(){a.setState({employee:{name:"Iel\u0101d\u0113...",surname:" "},workLog:[],editWorkLog:{id:null,startDate:null,endDate:null,working:!1}})},a.handleDateChangeStart=function(e){var t=new Date(e);t.setHours(0,0,0),a.setState({startDate:t})},a.handleDateChangeEnd=function(e){var t=new Date(e);t.setHours(23,59,59),a.setState({endDate:t})},a.onClickFilter=function(e){switch(e){case 0:a.handleDateChangeStart(new Date),a.handleDateChangeEnd(new Date);break;case 1:var t=new Date;t.setDate(t.getDate()-1),a.handleDateChangeStart(t),a.handleDateChangeEnd(t);break;case 2:var n=new Date;n.setDate(n.getDate()-7),a.handleDateChangeStart(n),a.handleDateChangeEnd(new Date);break;case 3:var o=new Date;o.setDate(o.getDate()-30),a.handleDateChangeStart(o),a.handleDateChangeEnd(new Date);break;default:a.handleDateChangeStart(new Date),a.handleDateChangeEnd(new Date)}a.setState({dropdown:Object(j.a)({},a.state.dropdown,{currentFilter:a.state.dropdown.filters[e]})})},a.deleteWorkLog=function(e,t,n){Ie(e,t,n).then(function(){a.fetchWorkLog()})},a.editWorkLog=function(e,t,n,o){a.setState({editWorkLog:Object(j.a)({},a.state.editWorkLog,{id:e,startDate:t,endDate:n,working:o})})},a.confirmEditWorkLog=function(){var e=a.state.workLog.find(function(e){return e.id===a.state.editWorkLog.id});Fe(a.state.editWorkLog.id,a.state.editWorkLog.startDate,a.state.editWorkLog.endDate,a.state.editWorkLog.working,a.state.employee.id,e).then(function(){a.setState({editWorkLog:{id:null,startDate:null,endDate:null,working:!1}},function(){a.fetchWorkLog()})})},a.cancelEditWorkLog=function(){a.setState({editWorkLog:{id:null,startDate:null,endDate:null,working:!1}})},a.onStartDateChange=function(e){a.setState({editWorkLog:Object(j.a)({},a.state.editWorkLog,{startDate:e})})},a.onEndDateChange=function(e){a.setState({editWorkLog:Object(j.a)({},a.state.editWorkLog,{endDate:e})})};var n=new Date;n.setHours(0,0,0);var o=new Date;return o.setHours(23,59,59),a.state={employee:{name:"Iel\u0101d\u0113...",surname:" "},workLog:[],editWorkLog:{id:null,startDate:null,endDate:null,working:!1},results:0,updateInterval:null,startDate:n,endDate:o,dropdown:{currentFilter:"\u0160odiena",filters:["\u0160odiena","Vakardiena","P\u0113d\u0113j\u0101s 7 dienas","P\u0113d\u0113j\u0101s 30 dienas"]}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.employeeWorkLog.id!==e.employeeWorkLog.id&&null!==this.props.employeeWorkLog.id&&this.fetchWorkLog()}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.updateInterval)}},{key:"render",value:function(){var e=this,t=0,a=null,n=0,r=0,l=0,i=this.state.workLog.filter(function(a){var n=new Date(a.start_time);return!(n<e.state.startDate||n>e.state.endDate)&&(t++,!0)}),s=i.map(function(t,s){var c=null===t.end_time,u=new Date(t.start_time),m=c?new Date:new Date(t.end_time),d=rt(u.getHours())+":"+rt(u.getMinutes()),h=c?" - ":rt(m.getHours())+":"+rt(m.getMinutes()),p=lt(m-u);n+=m-u,r+=m-u;var E=+p.hours+" st. "+p.minutes+" min. ",f=o.a.createElement(k.a,{className:"text-center"},o.a.createElement(v.a,null,e.state.editWorkLog.id===t.id?o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,{size:"sm",variant:"link",onClick:function(){return e.confirmEditWorkLog()}},o.a.createElement(Re.b,{className:"mb-1"})),o.a.createElement(I.a,{size:"sm",variant:"link",onClick:function(){return e.cancelEditWorkLog()}},o.a.createElement(Re.k,{className:"mb-1"}))):o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,{size:"sm",variant:"link",onClick:function(){return e.editWorkLog(t.id,t.start_time,t.end_time,c)}},o.a.createElement(Re.c,{className:"mb-1"})),o.a.createElement(I.a,{size:"sm",variant:"link",onClick:function(){return e.deleteWorkLog(t.id,c,t.employee_id)}},o.a.createElement(Re.i,{className:"mb-1"}))))),g=o.a.createElement("tr",{className:"text-center",style:c?{backgroundColor:"#ffffe6"}:null},o.a.createElement("td",null),o.a.createElement("td",null,e.state.editWorkLog.id===t.id?o.a.createElement(qe,{dateFormat:"dd.MM.yyyy. HH:mm",selected:new Date(e.state.editWorkLog.startDate),onChange:e.onStartDateChange,timeIntervals:1,showTimeSelect:!0,timeFormat:"HH:mm"}):d),o.a.createElement("td",null,e.state.editWorkLog.id!==t.id||c?h:o.a.createElement(qe,{dateFormat:"dd.MM.yyyy. HH:mm",selected:new Date(e.state.editWorkLog.endDate),onChange:e.onEndDateChange,timeIntervals:1,showTimeSelect:!0,timeFormat:"HH:mm"})),o.a.createElement("td",null,E),o.a.createElement("td",null,f)),y=null,b=null,w=null;if(null===a||a!==u.getDate()){a=u.getDate();var C=rt(u.getDate())+"."+rt(u.getMonth()+1)+"."+rt(u.getFullYear());y=o.a.createElement("tr",{className:"bg-dark text-light"},o.a.createElement("td",{style:{width:"100px"}},o.a.createElement("b",null,C)),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null))}var D=null;if(i[s+1]&&(D=new Date(i[s+1].start_time).getDate()),D!==u.getDate()){var S=lt(n),O=+S.hours+" st. "+S.minutes+" min. ";b=o.a.createElement("tr",{className:"bg-light text-dark"},o.a.createElement("td",null,o.a.createElement("b",null,"KOP\u0100")),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",{className:"text-center"},o.a.createElement("b",null,O))),l++,n=0}if(l>1&&null===D){var N=lt(r),x=+N.hours+" st. "+N.minutes+" min. ",j=rt(e.state.startDate.getDate())+"."+rt(e.state.startDate.getMonth()+1)+"."+rt(e.state.startDate.getFullYear()),L=rt(e.state.endDate.getDate())+"."+rt(e.state.endDate.getMonth()+1)+"."+rt(e.state.endDate.getFullYear());w=o.a.createElement("tr",{className:"text-dark"},o.a.createElement("td",{colSpan:2},o.a.createElement("b",null,j," - ",L)),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",{className:"text-center"},o.a.createElement("b",null,x))),r=0}return o.a.createElement("tbody",{key:s,className:"vertical-align-center"},y,g,b,w)});return o.a.createElement(Et.a,{show:this.props.employeeWorkLog.show,onHide:this.onHide,onExited:this.onExited,size:"lg"},o.a.createElement(Et.a.Header,{closeButton:!0},o.a.createElement(Et.a.Title,{className:"w-100"},o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement("h4",null,this.state.employee.surname+" "+this.state.employee.name,this.state.employee.personalCode?" ("+this.state.employee.personalCode+")":null))),o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement("h5",{className:"text-secondary"},this.state.employee.company))),o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement("h5",{className:"text-secondary"},this.state.employee.position)),o.a.createElement(v.a,{className:"text-right"},o.a.createElement("h5",{className:"text-secondary"},this.state.employee.number?"Tel. "+this.state.employee.number:null))))),o.a.createElement(Et.a.Body,null,o.a.createElement(Ye.a,null,o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement(Ye.a.Group,{as:k.a},o.a.createElement(Ye.a.Label,{column:!0,xs:2},"No"),o.a.createElement(v.a,{xs:10},o.a.createElement(qe,{dateFormat:"dd.MM.yyyy.",selected:this.state.startDate,onChange:this.handleDateChangeStart,maxDate:new Date})))),o.a.createElement(v.a,null,o.a.createElement(Ye.a.Group,{as:k.a},o.a.createElement(Ye.a.Label,{column:!0,xs:2},"L\u012bdz"),o.a.createElement(v.a,{xs:10},o.a.createElement(qe,{dateFormat:"dd.MM.yyyy.",selected:this.state.endDate,onChange:this.handleDateChangeEnd,minDate:this.state.startDate,maxDate:new Date})))),o.a.createElement(v.a,{className:"d-flex flex-column"},o.a.createElement(Be.a,{variant:"secondary",title:this.state.dropdown.currentFilter,className:"text-right mt-auto mb-3"},this.state.dropdown.filters.map(function(t,a){return o.a.createElement(P.a.Item,{key:a,onClick:function(){return e.onClickFilter(a)}},t)}))))),this.state.workLog.length&&t?o.a.createElement(wt.a,{size:"sm"},o.a.createElement("thead",null,o.a.createElement("tr",{className:"text-center"},o.a.createElement("th",null),o.a.createElement("th",null,"Ien\u0101ca"),o.a.createElement("th",null,"Izg\u0101ja"),o.a.createElement("th",null,"Nostr\u0101d\u0101ja"),o.a.createElement("th",null))),s):o.a.createElement("div",{className:"text-center"},"Netika atrasts neviens ieraksts...")))}}]),t}(o.a.Component);var Dt=Object(r.b)(function(e){return{employeeWorkLog:e.employees.employeeWorkLog}},function(e){return{hideEmployeeWorkLog:function(){return e(Y())}}})(Ct),St=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(Et.a,{show:this.props.deleteEmployee.show,onHide:function(){return e.props.hideDeleteEmployee()}},o.a.createElement(Et.a.Header,{closeButton:!0},o.a.createElement(Et.a.Title,null,this.props.deleteEmployee.employee.name+" "+this.props.deleteEmployee.employee.surname)),o.a.createElement(Et.a.Body,null,"Vai esiet p\u0101rliecin\u0101ts ka v\u0113laties dz\u0113st \u0161o darbinieku?"),o.a.createElement(Et.a.Footer,null,o.a.createElement(I.a,{variant:"danger",onClick:function(){_e(e.props.deleteEmployee.employee.id).then(function(){ve()}),e.props.hideDeleteEmployee()}},"Dz\u0113st")))}}]),t}(o.a.Component);var Ot=Object(r.b)(function(e){return{deleteEmployee:e.employees.deleteEmployee}},function(e){return{showDeleteEmployee:function(){return e(B())},hideDeleteEmployee:function(){return e(K())}}})(St),Nt={OFF:0,RFID_WAIT:1,COMPLETE:2,DELETED:3},xt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).onEnter=function(){a.setState({employee:Object(j.a)({},a.state.employee,a.props.editEmployee.employee)},function(){a.state.employee.company||a.setState({employee:Object(j.a)({},a.state.employee,{company:'SIA "V\u0101rpas 1"'})})})},a.onHide=function(){a.props.hideEditEmployee(),a.setState(Object(j.a)({},a.initialState))},a.onNameChange=function(e){a.setState({employee:Object(j.a)({},a.state.employee,{name:e.target.value})})},a.onSurnameChange=function(e){a.setState({employee:Object(j.a)({},a.state.employee,{surname:e.target.value})})},a.onPersonalCodeChange=function(e){a.setState({employee:Object(j.a)({},a.state.employee,{personalCode:e.target.value})})},a.onCompanyChange=function(e){a.setState({employee:Object(j.a)({},a.state.employee,{company:e.target.value})})},a.onPositionChange=function(e){a.setState({employee:Object(j.a)({},a.state.employee,{position:e.target.value})})},a.onNumberChange=function(e){a.setState({employee:Object(j.a)({},a.state.employee,{number:e.target.value})})},a.changeCard=function(e){a.setState({changeCard:{status:Nt.RFID_WAIT}}),ze().then(function(t){t.data?Me(t.data.uid,e).then(function(){be(e),a.setState({employee:Object(j.a)({},a.state.employee,{uid:t.data.uid,uid_added:new Date}),changeCard:{status:Nt.COMPLETE}})}):a.setState({changeCard:{status:Nt.OFF}})})},a.deleteCard=function(e){We(e).then(function(){be(e),a.setState({employee:Object(j.a)({},a.state.employee,{uid:"N/A",uid_added:null}),changeCard:{status:Nt.DELETED}})})},a.initialState={employee:{name:"",surname:"",personalCode:"",company:"",position:"",number:"",uid:""},changeCard:{status:0}},a.state=Object(j.a)({},a.initialState),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=new Date(this.state.employee.uid_added),a=rt(t.getDate())+"."+rt(t.getMonth()+1)+"."+rt(t.getFullYear());return o.a.createElement(Et.a,{show:this.props.editEmployee.show,onHide:function(){return e.onHide()},onEnter:function(){return e.onEnter()}},o.a.createElement(Et.a.Header,{closeButton:!0},o.a.createElement(Et.a.Title,null,this.props.editEmployee.employee.name+" "+this.props.editEmployee.employee.surname)),o.a.createElement(Et.a.Body,null,o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"* V\u0101rds"),o.a.createElement(Ye.a.Control,{required:!0,value:this.state.employee.name,onChange:this.onNameChange}))),o.a.createElement(v.a,null,o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"* Uzv\u0101rds"),o.a.createElement(Ye.a.Control,{required:!0,value:this.state.employee.surname,onChange:this.onSurnameChange})))),o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"Personas Kods"),o.a.createElement(Ye.a.Control,{value:this.state.employee.personalCode,onChange:this.onPersonalCodeChange}))),o.a.createElement(v.a,null,o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"Telefona Numurs"),o.a.createElement(Ye.a.Control,{value:this.state.employee.number,onChange:this.onNumberChange})))),o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"Uz\u0146\u0113mums"),o.a.createElement(Ye.a.Control,{as:"select",onChange:this.onCompanyChange,value:this.state.employee.company?this.state.employee.company:'SIA "V\u0101rpas 1"'},o.a.createElement("option",{value:'SIA "V\u0101rpas 1"'},'SIA "V\u0101rpas 1"'),o.a.createElement("option",{value:'SIA "Adeptus Renewable Energy"'},'SIA "Adeptus Renewable Energy"'),o.a.createElement("option",{value:'SIA "Valkas koks"'},'SIA "Valkas koks"'))),o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"Amats"),o.a.createElement(Ye.a.Control,{value:this.state.employee.position,onChange:this.onPositionChange})),o.a.createElement(Ye.a.Group,{as:k.a},o.a.createElement(Ye.a.Label,{column:!0,xs:"auto"},"UID (NFC Karte)"),o.a.createElement(v.a,null,o.a.createElement(Ye.a.Control,{disabled:!0,value:this.state.employee.uid?this.state.employee.uid:"N/A",className:"text-center"})),o.a.createElement(v.a,{xs:"auto"},o.a.createElement(I.a,{variant:"link",onClick:function(){return e.deleteCard(e.props.editEmployee.employee.id)}},"Dz\u0113st")),o.a.createElement(v.a,{xs:"auto"},o.a.createElement(I.a,{variant:"link",onClick:function(){return e.changeCard(e.props.editEmployee.employee.id)}},"Main\u012bt"))),this.state.employee.uid_added?o.a.createElement(Ye.a.Group,{as:k.a},o.a.createElement(Ye.a.Label,{column:!0},"Karte re\u0123istr\u0113ta: ",a)):null,o.a.createElement(ft.a,{variant:"primary",show:this.state.changeCard.status===Nt.RFID_WAIT,onClose:function(){return null}},"Nosken\u0113jiet v\u0113lamo karti\u0146u."),o.a.createElement(ft.a,{variant:"success",show:this.state.changeCard.status===Nt.COMPLETE,onClose:function(){return null}},"Darbiniekam karte nomain\u012bta."),o.a.createElement(ft.a,{variant:"danger",show:this.state.changeCard.status===Nt.DELETED,onClose:function(){return null}},"Darbinieka karte dz\u0113sta.")),o.a.createElement(Et.a.Footer,null,o.a.createElement(I.a,{variant:"success",onClick:function(){var t,a=e.state.employee.id;(t=e.state.employee,Se(ye,{user:pe.getState().employees.user.username,id:t.id}),x.post("/editEmployee",{employee:t})).then(function(){be(a)}),e.props.hideEditEmployee(),e.onHide()}},"Redi\u0123\u0113t")))}}]),t}(o.a.Component);var jt=Object(r.b)(function(e){return{editEmployee:e.employees.editEmployee}},function(e){return{showEditEmployee:function(){return e(J())},hideEditEmployee:function(){return e(V())}}})(xt),Lt=a(172),It=a.n(Lt),Ft=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleDateChange=function(e){a.setState({month:e})},a.onToggleIncludeNoHours=function(){a.setState({includeNoHours:!a.state.includeNoHours})},a.onToggleIncludeInactive=function(){a.setState({includeInactive:!a.state.includeInactive})},a.onToggleIncludeArchived=function(){a.setState({includeArchived:!a.state.includeArchived})},a.onEmployeeCheck=function(e){var t=a.state.employeeList;t[e].checked=!t[e].checked,a.setState({employeeList:t})},a.onCheckAll=function(){a.setState({employeeList:a.state.employeeList.map(function(e){return Object(j.a)({},e,{checked:!a.state.checkAll})}),checkAll:!a.state.checkAll})},a.export=function(){Pe({month:a.state.month,employees:a.state.employeeList.filter(function(e){return e.checked}),includeNoHours:a.state.includeNoHours,includeInactive:a.state.includeInactive,includeArchived:a.state.includeArchived}).then(function(e){var t=e.headers["content-type"];It()(e.data,"Varpas 1.xlsx",t)})},a.onEnter=function(){a.setState({employeeList:a.props.employees.map(function(e){return Object(j.a)({},e,{checked:!1})})})},a.state={month:new Date,employeeList:[],checkAll:!1,includeNoHours:!1,includeInactive:!1,includeArchived:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.exportExcel.show)return null;var t=this.state.employeeList.map(function(t,a){return o.a.createElement("tbody",{key:a},o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(Ye.a.Check,{type:"checkbox",checked:t.checked,onChange:function(){return e.onEmployeeCheck(a)}})),o.a.createElement("td",null,t.surname+" "+t.name),o.a.createElement("td",null,t.personalCode),o.a.createElement("td",null,t.position)))});return o.a.createElement(Et.a,{size:"lg",show:this.props.exportExcel.show,onEnter:function(){return e.onEnter()},onHide:function(){return e.props.hideExportExcel()}},o.a.createElement(Et.a.Header,{closeButton:!0},o.a.createElement(Et.a.Title,null,"Eksports")),o.a.createElement(Et.a.Body,null,o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement("h5",null,"Periods"),o.a.createElement(Ye.a.Group,{as:k.a,className:"ml-1"},o.a.createElement(Ye.a.Label,{column:!0,xs:"3"},"M\u0113nesis: "),o.a.createElement(v.a,null,o.a.createElement(qe,{dateFormat:"MM.yyyy.",selected:this.state.month,onChange:this.handleDateChange,showMonthYearPicker:!0})))),o.a.createElement(v.a,null,o.a.createElement("h5",null,"Iek\u013caut"),o.a.createElement(Ye.a.Group,{as:k.a,className:"ml-1"},o.a.createElement(v.a,null,o.a.createElement(Ye.a.Check,{type:"checkbox",label:"darbiniekus bez nostr\u0101d\u0101t\u0101m stund\u0101m",checked:this.state.includeNoHours,onChange:this.onToggleIncludeNoHours}))),o.a.createElement(Ye.a.Group,{as:k.a,className:"ml-1"},o.a.createElement(v.a,null,o.a.createElement(Ye.a.Check,{type:"checkbox",label:"deaktiviz\u0113tus darbiniekus",checked:this.state.includeInactive,onChange:this.onToggleIncludeInactive}))),o.a.createElement(Ye.a.Group,{as:k.a,className:"ml-1"},o.a.createElement(v.a,null,o.a.createElement(Ye.a.Check,{type:"checkbox",label:"arhiv\u0113tus darbiniekus",checked:this.state.includeArchived,onChange:this.onToggleIncludeArchived}))))),o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement("h5",null,"Atlas\u012bt Darbiniekus"),o.a.createElement(wt.a,{size:"sm"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement(Ye.a.Check,{type:"checkbox",checked:this.state.checkAll,onChange:function(){return e.onCheckAll()}})),o.a.createElement("th",null,"V\u0101rds"),o.a.createElement("th",null,"Personas Kods"),o.a.createElement("th",null,"Amats"))),t)))),o.a.createElement(Et.a.Footer,null,o.a.createElement(I.a,{variant:"success",onClick:function(){e.export()}},"Eksport\u0113t")))}}]),t}(o.a.Component);var Tt=Object(r.b)(function(e){return{exportExcel:e.employees.exportExcel,employees:e.employees.employees}},function(e){return{showExportExcel:function(){return e(Z())},hideExportExcel:function(){return e($())}}})(Ft),_t=a(89),Pt=a.n(_t),At=!D,Ht=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).onUsernameChange=function(t){e.setState({username:t.target.value})},e.onPasswordChange=function(t){e.setState({password:t.target.value})},e.onRememberMeChange=function(){e.setState({rememberMe:!e.state.rememberMe})},e.logIn=function(t){!1===At&&t.preventDefault(),Qe(e.state.username,e.state.password,e.state.rememberMe).then(function(t){t.data?window.location.reload():e.setState({authenticationError:!0})})},e.state={username:At?"nils.asejevs":"",password:At?"EvoNils112":"",rememberMe:!0,authenticationError:!1},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){At&&this.logIn()}},{key:"render",value:function(){var e=this;return o.a.createElement(Et.a,{centered:!0,show:!0,onHide:function(){return null}},o.a.createElement(Ye.a,{onSubmit:function(t){return e.logIn(t)}},o.a.createElement(Et.a.Header,{className:"justify-content-center"},o.a.createElement(Et.a.Title,null,o.a.createElement("img",{src:Pt.a,alt:"",width:"auto",height:"40px",className:"d-inline-block align-top mr-2",style:{filter:"invert(100%)"}}),"Autentifik\u0101cija")),o.a.createElement(Et.a.Body,null,o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"Lietot\u0101jv\u0101rds"),o.a.createElement(Ye.a.Control,{required:!0,value:this.state.username,onChange:this.onUsernameChange,name:"username"})),o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Label,null,"Parole"),o.a.createElement(Ye.a.Control,{required:!0,value:this.state.password,onChange:this.onPasswordChange,name:"password",type:"password"})),o.a.createElement(Ye.a.Group,{controlId:"formBasicChecbox"},o.a.createElement(Ye.a.Check,{type:"checkbox",label:"Atcer\u0113ties mani",name:"rememberMe",checked:this.state.rememberMe,onChange:this.onRememberMeChange})),o.a.createElement(ft.a,{variant:"danger",show:this.state.authenticationError,onClose:function(){return null}},"Nepareizs lietot\u0101jv\u0101rds un/vai parole.")),o.a.createElement(Et.a.Footer,null,o.a.createElement(I.a,{variant:"success",type:"submit"},"Ielogoties"))))}}]),t}(o.a.Component);var Mt=Object(r.b)(function(e){return{}},function(e){return{}})(Ht),Wt=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).checkCard=function(){ze().then(function(t){t.data&&He(t.data.uid).then(function(t){t.data?(e.hideModal(),e.props.showEmployeeWorkLog(t.data.id)):e.setState({cardScanned:!0,notFound:!0})})})},e.hideModal=function(){e.props.hideCheckCard(),e.setState({cardScanned:!1,employee:{}})},e.state={cardScanned:!1,notFound:!1},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(Et.a,{show:this.props.checkCard.show,onHide:this.hideModal,onEntered:function(){return e.checkCard()}},o.a.createElement(Et.a.Header,{closeButton:!0},o.a.createElement(Et.a.Title,null,"Atrast darbinieku p\u0113c kartes")),o.a.createElement(Et.a.Body,null,o.a.createElement(ft.a,{variant:"primary",show:!this.state.cardScanned},"Nosken\u0113jiet NFC karti\u0146u..."),o.a.createElement(ft.a,{variant:"danger",show:this.state.cardScanned&&this.state.notFound},"Uz \u0161\u012bs karti\u0146as nav re\u0123istr\u0113ts neviens darbinieks.")))}}]),t}(o.a.Component);var zt=Object(r.b)(function(e){return{checkCard:e.employees.checkCard}},function(e){return{showCheckCard:function(){return e(Q())},hideCheckCard:function(){return e(ee())},showEmployeeWorkLog:function(t){return e(G(t))}}})(Wt),Rt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).onExited=function(){a.props.hideCommentEmployee(),a.setState(Object(j.a)({},a.initialState))},a.onCommentChange=function(e){a.setState({comment:Object(j.a)({},a.state.comment,{text:e.target.value})})},a.onExpiryDateChange=function(e){a.setState({comment:Object(j.a)({},a.state.comment,{expires:e})})},a.onManualDeleteChange=function(){a.setState({comment:Object(j.a)({},a.state.comment,{manualDelete:!a.state.comment.manualDelete})})},a.initialState={comment:{text:"",expires:new Date,manualDelete:!1}},a.state=Object(j.a)({},a.initialState),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(Et.a,{show:this.props.commentEmployee.show,onExited:function(){return e.onExited()},onHide:function(){return e.props.hideCommentEmployee()}},o.a.createElement(Et.a.Header,{closeButton:!0},o.a.createElement(Et.a.Title,null,this.props.employee.name+" "+this.props.employee.surname)),o.a.createElement(Et.a.Body,null,o.a.createElement(Ye.a.Group,{as:k.a},o.a.createElement(Ye.a.Label,{column:!0,xs:2},"Koment\u0101rs"),o.a.createElement(v.a,{xs:10},o.a.createElement(Ye.a.Control,{as:"textarea",rows:"3",value:this.state.comment.text,onChange:this.onCommentChange}))),o.a.createElement(Ye.a.Group,{as:k.a},o.a.createElement(Ye.a.Label,{column:!0,xs:2},"Dz\u0113st"),o.a.createElement(v.a,{xs:10},o.a.createElement(qe,{disabled:this.state.comment.manualDelete,dateFormat:"dd.MM.yyyy. HH:mm",selected:this.state.comment.expires,onChange:this.onExpiryDateChange,maxDate:new Date,timeIntervals:1,showTimeSelect:!0,timeFormat:"HH:mm"}))),o.a.createElement(Ye.a.Group,null,o.a.createElement(Ye.a.Check,{type:"checkbox",label:"Tikai manu\u0101li dz\u0113\u0161ams",name:"manualDelete",checked:this.state.comment.manualDelete,onChange:this.onManualDeleteChange}))),o.a.createElement(Et.a.Footer,null,o.a.createElement(I.a,{variant:"success",onClick:function(){var t,a,n=e.props.employee.id;(t=e.props.employee,a=e.state.comment,x.post("/addEmployeeComment",{employee:t,comment:a})).then(function(){be(n)}),e.props.hideCommentEmployee()}},"Pievienot")))}}]),t}(o.a.Component);var Ut=Object(r.b)(function(e){return{commentEmployee:e.employees.commentEmployee,employee:e.employees.commentEmployee.employee}},function(e){return{showCommentEmployee:function(){return e(te())},hideCommentEmployee:function(){return e(ae())}}})(Rt),Gt=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).transparentColor="RGBA(0, 0, 0, 0)",e.dayColor="#ffcc00",e.nightColor="#005f9d",e.dayOffColor="#ff99cc",e.vacationColor="#00ff00",e.sickListColor="#2fc2b5",e.lateColor="red",e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=this;return!(!e.row.selectedFields.find(function(e){return e[1]===a.props.rowIndex&&e[2]===a.props.extraData.colIndex})&&!this.props.row.selectedFields.find(function(e){return e[1]===a.props.rowIndex&&e[2]===a.props.extraData.colIndex}))||JSON.stringify(e.row.schedule.days[e.extraData.colIndex])!==JSON.stringify(this.props.row.schedule.days[this.props.extraData.colIndex])}},{key:"render",value:function(){var e=this,t=this.props.rowIndex,a=this.props.extraData.colIndex,n=this.props.row.selectedFields,r=this.transparentColor,l="0px";switch(this.props.row.schedule.days[a]){case"D":r=this.dayColor;break;case"N":r=this.nightColor;break;case"B":r=this.dayOffColor;break;case"A":r=this.vacationColor;break;case"S":r=this.sickListColor;break;case"K":r=this.lateColor;break;default:r=this.transparentColor}for(var i=0;i<n.length;i++)n[i][1]===t&&n[i][2]===a&&(l="2px #2f8cfb solid");return o.a.createElement("div",{style:{backgroundColor:r,outline:l}},o.a.createElement("input",{onClick:function(n){return e.props.onClickScheduleInput(n,e.props.row.scheduleIndex,t,a)},onFocus:function(n){return e.props.onFocusScheduleInput(n,e.props.row.scheduleIndex,t,a)},onChange:function(n){return e.props.onChangeScheduleInput(n,e.props.row.scheduleIndex,t,a)},className:"border-0 text-center",style:{width:"32px",height:"32px",fontSize:"12px",backgroundColor:"RGBA(0, 0, 0, 0)",outline:"none"},value:this.props.row.schedule.days[a]}))}}]),t}(o.a.Component),Yt=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).fetchSchedules=function(){Ne(e.state.scheduleDate.getMonth()).then(function(t){var a=e.props.employees.map(function(a){var n=[],o=!0,r=t.data.find(function(e){return e.employee_id===a.id});return void 0===r?(n=new Array(31).fill(" ",0,31),o=!0):(n=JSON.parse(r.days),o=r.checked),{employee_id:a.id,month:e.state.scheduleDate.getMonth(),days:n,checked:o}});Promise.all(a).then(function(t){e.setState({schedules:JSON.parse(JSON.stringify(t)),selectedFields:[]},function(){e.onTableChange()})})})},e.checkEmptySchedules=function(){var t=e.props.employees.map(function(t){var a=[],n=!0,o=e.state.schedules.find(function(e){return e.employee_id===t.id});return void 0===o?(a=new Array(31).fill(" ",0,31),n=!0):(a=o.days,n=o.checked),{employee_id:t.id,month:e.state.scheduleDate.getMonth(),days:a,checked:n}});Promise.all(t).then(function(t){e.setState({schedules:JSON.parse(JSON.stringify(t))},function(){e.onTableChange()})})},e.isKeyDown=function(t){return e.keyDown[t]},e.saveSettings=function(){var t=new L.a,a=Object(j.a)({},t.get("settings"),{pageSize:e.state.pageSize});t.set("settings",a)},e.onTableChange=function(){e.formatTable(function(t){e.filterData(t)})},e.onFilterChange=function(){e.onTableChange()},e.onDataFiltered=function(t){e.setState({tableData:t})},e.saveSchedules=function(){e.setState({saving:!0}),xe(e.state.schedules).then(function(){e.setState({saving:!1})})},e.onChangeScheduleDate=function(t){e.setState({scheduleDate:new Date(t)},function(){e.columns=e.columns.map(function(t,a){if(!t.dataField.includes("day"))return t;var n=new Date(e.state.scheduleDate);n.setDate(parseInt(t.text));var o="RGBA(0, 0, 0, 0)";return ct(n)&&(o=e.weekendColor),Object(j.a)({},t,{headerStyle:{backgroundColor:o},style:{backgroundColor:o}})}),e.fetchSchedules()})},e.onClickScheduleInput=function(e,t,a,n){e.target.select()},e.onFocusScheduleInput=function(t,a,n,o){t.target.select();var r=JSON.parse(JSON.stringify(e.state.selectedFields));if(e.isKeyDown(17)||e.isKeyDown(16)||(r=[]),e.isKeyDown(16)){var l=r[r.length-1];if(void 0!==l)for(var i=[a,n,o],s=Math.min(l[1],i[1]);s<=Math.max(l[1],i[1]);s++)for(var c=Math.min(l[2],i[2]);c<=Math.max(l[2],i[2]);c++)r.push([-1,s,c])}r.push([a,n,o]),e.setState({selectedFields:r})},e.onChangeScheduleInput=function(t,a,n,o){var r=JSON.parse(JSON.stringify(e.state.schedules)),l=t.target.value.toUpperCase();r[a].days[o]!==l&&(r[a].days[o]=l.replace(r[a].days[o],""),""===r[a].days[o]&&(r[a].days[o]=" ")),e.state.selectedFields.length>1&&e.state.selectedFields.forEach(function(t){r[e.cellRefs[t[1]][t[2]].props.row.scheduleIndex].days[t[2]]=r[a].days[o]}),e.setState({schedules:r})},e.onEmployeeCheck=function(t,a){var n=JSON.parse(JSON.stringify(e.state.schedules));n[a].checked=!n[a].checked,e.setState({schedules:n})},e.createEmptySchedule=function(){var t=[],a=e.props.employees.map(function(t){var a=new Array(31).fill(" ",0,31);return{employee_id:t.id,month:e.state.scheduleDate.getMonth(),days:a,checked:!0}});Promise.all(a).then(function(){e.setState({schedules:a,selectedFields:t})})},e.formatTable=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null};e.cellRefs=[];var a=e.props.employees.map(function(t,a){return{id:t.id,name:{id:t.id,name:t.name,surname:t.surname,checked:e.state.schedules[a].checked,scheduleIndex:a},position:t.position?t.position.toString():"",company:t.company?t.company.toString():"",archived:t.archived,active:t.active,working:t.working,schedule:e.state.schedules[a],scheduleIndex:a,selectedFields:e.state.selectedFields,checked:void 0===e.state.schedules[a]||e.state.schedules[a].checked}});Promise.all(a).then(function(e){t(e)})},e.nameFormatter=function(t,a){return console.log(t.checked),o.a.createElement("nobr",null,o.a.createElement(Ye.a.Check,{type:"checkbox",checked:t.checked,onChange:function(){return e.onEmployeeCheck(t.id,t.scheduleIndex)},className:"mr-1 d-inline"}),o.a.createElement(I.a,{variant:"link",onClick:function(){return e.props.showEmployeeWorkLog(t.id)},style:{color:"#0000FF",fontSize:"12px"},className:"m-0 p-0 align-text-top"},t.surname+" "+t.name))},e.dayFormatter=function(t,a,n,r){if(void 0===a.schedule||void 0===a)return null;var l={cell:t,row:a,rowIndex:n,extraData:r};return o.a.createElement(Gt,Object.assign({key:[a.id,n],onClickScheduleInput:e.onClickScheduleInput,onFocusScheduleInput:e.onFocusScheduleInput,onChangeScheduleInput:e.onChangeScheduleInput,ref:function(t){return void 0===e.cellRefs[n]&&(e.cellRefs[n]=new Array(31)),e.cellRefs[n][r.colIndex]=t,!0}},l))},e.sizePerPageRenderer=function(t){var a=t.options,n=(t.currSizePerPage,t.onSizePerPageChange);return o.a.createElement(P.a,{className:"d-inline pr-2"},o.a.createElement(P.a.Toggle,{variant:"primary"},9999===e.state.pageSize?"Viss":e.state.pageSize),o.a.createElement(P.a.Menu,null,a.map(function(t,a){return o.a.createElement(P.a.Item,{key:a,onClick:function(){e.onClickPageSize(t),n(t.page)}},t.text)})))},e.onClickPageSize=function(t){e.setState({pageSize:t.page})},e.transparentColor="RGBA(0, 0, 0, 0)",e.dayColor="#ffcc00",e.nightColor="#005f9d",e.dayOffColor="#ff99cc",e.vacationColor="#00ff00",e.sickListColor="#2fc2b5",e.weekendColor="#ffcc99",e.lateColor="red",e.keyDown={},e.cellRefs=[];var a=new L.a,n=a.get("settings");n||(n={pageSize:10},a.set("settings",n)),e.state=Object(j.a)({tableData:[],pageSize:10},n,{saving:!1,uncheckedEmployees:[],schedules:[],selectedFields:[],scheduleDate:new Date}),e.columns=[{dataField:"id",text:"#",sort:!0,classes:"align-middle d-none d-md-table-cell",headerClasses:"d-none d-md-table-cell",hidden:!0},{dataField:"name",text:"V\u0101rds",sort:!0,sortFunc:function(e,t,a){return ut(e.surname)<ut(t.surname)?"asc"===a?-1:1:ut(e.surname)>ut(t.surname)?"asc"===a?1:-1:0},formatter:e.nameFormatter}];for(var r=st((new Date).getMonth(),(new Date).getFullYear()),l=0;l<r;l++){var i=new Date(e.state.scheduleDate);i.setDate(l+1);var c="RGBA(0, 0, 0, 0)";ct(i)&&(c=e.weekendColor),e.columns.push({dataField:"day"+l,text:(l+1).toString(),formatter:e.dayFormatter,formatExtraData:{colIndex:l},headerClasses:"text-center",headerStyle:{backgroundColor:c},classes:"text-center p-0 m-0",style:{backgroundColor:c}})}return e.defaultSorted=[{dataField:"name",order:"asc"}],e.pagination=W()({page:1,alwaysShowAllBtns:!0,showTotal:!1,sizePerPage:e.state.pageSize,sizePerPageRenderer:e.sizePerPageRenderer,sizePerPageList:[{text:"10",value:10},{text:"25",value:25},{text:"50",value:50},{text:"100",value:100},{text:"Viss",value:9999}]}),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.fetchSchedules()},2e3),window.addEventListener("keydown",function(t){e.keyDown[t.keyCode]=!0}),window.addEventListener("keyup",function(t){e.keyDown[t.keyCode]=!1})}},{key:"shouldComponentUpdate",value:function(e,t){return console.log(t.schedules.length),console.log(e.employees.length),0!==t.schedules.length&&0!==e.employees.length}},{key:"componentDidUpdate",value:function(e,t){JSON.stringify(e.employees)!==JSON.stringify(this.props.employees)&&this.props.employees.length>0&&this.checkEmptySchedules(),JSON.stringify(e.employees)===JSON.stringify(this.props.employees)&&JSON.stringify(t.schedules)===JSON.stringify(this.state.schedules)&&JSON.stringify(t.selectedFields)===JSON.stringify(this.state.selectedFields)||this.onTableChange(),t.pageSize!==this.state.pageSize&&this.saveSettings()}},{key:"render",value:function(){var e=this;return o.a.createElement(z,{header:"Grafiks"},o.a.createElement(nt,{onDataFiltered:this.onDataFiltered,onFilterChange:this.onFilterChange,filterData:function(t){return e.filterData=t},scheduleFilters:!0}),o.a.createElement(k.a,{className:"mt-3 text-center",style:{fontSize:"14px"}},o.a.createElement(v.a,null,o.a.createElement("span",{className:"dot align-middle",style:{backgroundColor:this.dayColor}}),o.a.createElement("span",{className:"ml-2"},"(D) Diena")),o.a.createElement(v.a,null,o.a.createElement("span",{className:"dot align-middle",style:{backgroundColor:this.nightColor}}),o.a.createElement("span",{className:"ml-2"},"(N) Nakts")),o.a.createElement(v.a,null,o.a.createElement("span",{className:"dot align-middle",style:{backgroundColor:this.dayOffColor}}),o.a.createElement("span",{className:"ml-2"},"(B) Br\u012bvdiena")),o.a.createElement(v.a,null,o.a.createElement("span",{className:"dot align-middle",style:{backgroundColor:this.vacationColor}}),o.a.createElement("span",{className:"ml-2"},"(A) Atva\u013cin\u0101jums")),o.a.createElement(v.a,null,o.a.createElement("span",{className:"dot align-middle",style:{backgroundColor:this.sickListColor}}),o.a.createElement("span",{className:"ml-2"},"(S) Slim\u012bbas lapa")),o.a.createElement(v.a,null,o.a.createElement("span",{className:"dot align-middle",style:{backgroundColor:this.lateColor}}),o.a.createElement("span",{className:"ml-2"},"(K) Darba kav\u0113jums"))),o.a.createElement(k.a,{className:"mb-3 mt-3"},o.a.createElement(v.a,null,o.a.createElement("ul",{style:{fontSize:"12px"}},o.a.createElement("li",null,"CTRL + KLIK\u0160\u0136IS - Iez\u012bm\u0113 vair\u0101kus individu\u0101lus lauci\u0146us"),o.a.createElement("li",null,"SHIFT + KLIK\u0160\u0136IS - Iez\u012bm\u0113 vair\u0101kus no-l\u012bdz lauci\u0146us"))),o.a.createElement(v.a,null,o.a.createElement(I.a,{onClick:this.saveSchedules,className:"float-right"},this.state.saving?"Saglab\u0101...":"Saglab\u0101t"),o.a.createElement(qe,{dateFormat:"MM.yyyy.",selected:this.state.scheduleDate,onChange:this.onChangeScheduleDate,showMonthYearPicker:!0,className:"float-right mr-2 text-center"}))),o.a.createElement(H.a,{bootstrap4:!0,keyField:"id",data:this.state.tableData,columns:this.columns,bordered:!0,condensed:!0,hover:!0,defaultSorted:this.defaultSorted,remote:{filter:!0},pagination:this.pagination}))}}]),t}(o.a.Component);var Bt=Object(r.b)(function(e){return{employees:e.employees.employees}},function(e){return{showRegisterEmployee:function(){return e(X())},showExportExcel:function(){return e(Z())},showCheckCard:function(){return e(Q())},showEmployeeWorkLog:function(t){return e(G(t))}}})(Yt),Kt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).history=function(e,t,a){var n=e.type;switch(e.type){case Ee:var r=function(e){var t=JSON.parse(e);if(null===t)return"neizg\u0101jis";var a=new Date(t);return rt(a.getHours())+":"+rt(a.getMinutes())+":"+rt(a.getSeconds())},l=t.from,i=t.to;n=o.a.createElement("div",null,"izmain\u012bts darba laiks",o.a.createElement("br",null),o.a.createElement("div",{style:{fontSize:"12px"}},"No: ",r(l.startDate)," - ",r(l.endDate),o.a.createElement("br",null),"Uz: ",r(i.startDate)," - ",r(i.endDate)));break;case fe:n="atz\u012bm\u0113ts k\u0101 ien\u0101cis";break;case ge:n="atz\u012bm\u0113ts k\u0101 izg\u0101jis";break;case ye:n="regi\u0123\u0113ts darbinieks";break;case ke:n="pievienots darbinieks";break;default:n="N/A"}return o.a.createElement(ft.a,{className:"pt-0 pb-0",key:e.id,variant:"info"},o.a.createElement(k.a,null,o.a.createElement(v.a,{className:"d-flex flex-column justify-content-center"},t.user),o.a.createElement(v.a,{className:"d-flex flex-column justify-content-center"},a.surname+" "+a.name),o.a.createElement(v.a,{className:"d-flex flex-column justify-content-center"},o.a.createElement("span",{className:"text-center"},o.a.createElement("b",null,n))),o.a.createElement(v.a,{className:"d-flex flex-column justify-content-center"},o.a.createElement("span",{className:"flex-right text-right"},it(e.date)))))},a.displayHistory=function(){var e=a.state.notifications.map(function(e){var t=JSON.parse(e.data);switch(e.type){case Ee:case ke:case ye:case ge:case fe:var n=a.props.employees.find(function(e){return e.id===t.id});return n?a.history(e,t,n):null;default:return null}});return 0===e.filter(function(e){return null!=e}).length?o.a.createElement("h2",{style:{color:"grey"},className:"text-center"},"Nav ierakstu..."):e},a.onChangeNotificationDate=function(e){a.setState({notificationDate:e})},a.onHide=function(){a.props.hideHistory()},a.state={notifications:[],notificationDate:new Date},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;t.notificationDate===this.state.notificationDate&&e.notifications===this.props.notifications||this.setState({notifications:this.props.notifications.notifications.filter(function(e){var t=new Date(e.date);return t.getFullYear()===a.state.notificationDate.getFullYear()&&t.getMonth()===a.state.notificationDate.getMonth()&&t.getDate()===a.state.notificationDate.getDate()})})}},{key:"render",value:function(){var e=this;return o.a.createElement(Et.a,{size:"lg",show:this.props.history.show,onHide:function(){return e.onHide()}},o.a.createElement(Et.a.Header,{closeButton:!0},o.a.createElement(Et.a.Title,{className:"w-100"},"V\u0113sture"),o.a.createElement(qe,{dateFormat:"dd.MM.yyyy.",selected:new Date(this.state.notificationDate),onChange:this.onChangeNotificationDate,maxDate:new Date})),o.a.createElement(Et.a.Body,null,o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement(ft.a,{className:"pt-0 pb-0"},o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement("b",null,"Lietot\u0101js")),o.a.createElement(v.a,null,o.a.createElement("b",null,"Darbinieks")),o.a.createElement(v.a,{className:"d-flex flex-column justify-content-center text-center"},o.a.createElement("b",null,"Darb\u012bba")),o.a.createElement(v.a,{className:"d-flex flex-column justify-content-center text-right"},o.a.createElement("b",null,"Datums")))),this.displayHistory()))))}}]),t}(o.a.Component);var Jt=Object(r.b)(function(e){return{notifications:e.employees.notifications,employees:e.employees.employees,history:e.employees.history,user:e.employees.user}},function(e){return{hideHistory:function(){return e(ce())},showEmployeeWorkLog:function(t){return e(G(t))}}})(Kt),Vt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).onExited=function(){a.setState(Object(j.a)({},a.initialState))},a.onCommentChange=function(e){a.setState({text:e.target.value})},a.updateNotification=function(){var e=JSON.parse(a.props.notification.data),t=new Date(a.props.notification.date);console.log(a.props.processNotification);var n=Object(j.a)({},e,{processed:!0,comment:a.state.text,justified:a.props.processNotification.justified});Oe(a.props.notification.id,a.props.notification.type,n),a.props.hideProcessNotification(),a.props.processNotification.justified||Ne(t.getMonth()).then(function(a){var n=a.data,o=n.map(function(e){return Object(j.a)({},e,{days:JSON.parse(e.days)})}),r=n.findIndex(function(t){return t.employee_id===e.id});-1!==r&&Promise.all(o).then(function(){var e=t.getDate()-1;o[r].days[e]="K",xe(o)})})},a.initialState={comment:{text:"",expires:new Date,manualDelete:!1}},a.state=Object(j.a)({},a.initialState),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(null!==this.props.notification){var t=JSON.parse(this.props.notification.data),a=t.name+" "+t.surname;switch(this.props.notification.type){case"EMPLOYEE_LATE":a+=" (Darba kav\u0113jums)";break;default:a+=" (N/A)"}return o.a.createElement(Et.a,{show:this.props.processNotification.show,onExited:function(){return e.onExited()},onHide:function(){return e.props.hideProcessNotification()},centered:!0},o.a.createElement(Et.a.Header,{closeButton:!0},a),o.a.createElement(Et.a.Body,null,o.a.createElement(Ye.a.Group,{as:k.a},o.a.createElement(Ye.a.Label,{column:!0,xs:3},"Koment\u0101rs: "),o.a.createElement(v.a,{xs:9},o.a.createElement(Ye.a.Control,{as:"textarea",rows:"1",value:this.state.text,onChange:this.onCommentChange})))),o.a.createElement(Et.a.Footer,null,o.a.createElement(I.a,{variant:this.props.processNotification.justified?"success":"danger",className:"mr-1",size:"sm",onClick:function(){return e.updateNotification()}},this.props.processNotification.justified?"Attaisnots":"Neattaisnots"),o.a.createElement(I.a,{variant:"danger",className:"mr-1",size:"sm",onClick:function(){return e.props.hideProcessNotification()}},"Atcelt")))}return null}}]),t}(o.a.PureComponent);var Xt=Object(r.b)(function(e){return{processNotification:e.employees.processNotification,notification:e.employees.processNotification.notification,employee:e.employees.commentEmployee.employee}},function(e){return{showProcessNotification:function(){return e(le())},hideProcessNotification:function(){return e(ie())}}})(Vt),qt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).processHistoryNotifications=function(){var e=a.state.notifications.filter(function(e){return!0===JSON.parse(e.data).processed});if(e.length>0){var t=e.map(function(e,t){var a=JSON.parse(e.data),n=new Date(e.date),r="";switch(e.type){case"EMPLOYEE_LATE":r="Darba kav\u0113jums";break;default:r="N/A"}var l=a.justified?"Attaisnots":"Neattaisnots";return o.a.createElement("tbody",{key:t},o.a.createElement("tr",null,o.a.createElement("td",null,it(n)),o.a.createElement("td",null,a.surname+" "+a.name),o.a.createElement("td",null,r),o.a.createElement("td",null,l),o.a.createElement("td",null,a.comment)))}),n=o.a.createElement(wt.a,{size:"sm"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Datums"),o.a.createElement("th",null,"V\u0101rds"),o.a.createElement("th",null,"Pazi\u0146ojums"),o.a.createElement("th",null,"Statuss"),o.a.createElement("th",null,"Piez\u012bme"))),t);a.setState({historyNotifications:n})}else a.setState({historyNotifications:o.a.createElement("h2",{style:{color:"grey"},className:"text-center"},"Nav ierakstu...")})},a.processNotifications=function(){var e=a.state.notifications.sort(function(e,t){return void 0!==JSON.parse(e.data).processed?1:-1}).map(function(e){var t=JSON.parse(e.data);switch(e.type){case"EMPLOYEE_LATE":var n=a.props.employees.find(function(e){return e.id===t.id}),r=!1,l=null;if(n){var i=new Date(e.date),s=i;s.setHours(0,0,0,0);var c=i;return c.setHours(24,0,0,0),Le(n.id,s,c).then(function(s){s.data.forEach(function(e){var t=new Date(e.start_time);t.getDate()===i.getDate()&&t.getMonth()===i.getMonth()&&t.getFullYear()===i.getFullYear()&&(r=!0,l=t)});return o.a.createElement(ft.a,{className:"pt-0 pb-1",key:e.id,variant:t.processed?(t.justified,"secondary"):"info"},o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement(I.a,{variant:"link",onClick:function(){return a.props.showEmployeeWorkLog(n.id)},className:"pt-0 pb-0"},n.surname+" "+n.name)),o.a.createElement(v.a,{className:"d-flex flex-column justify-content-center"},o.a.createElement("span",{className:"text-center"},o.a.createElement("b",null,"Darba kav\u0113jums"))),o.a.createElement(v.a,{className:"d-flex flex-column justify-content-center"},o.a.createElement("span",{className:"flex-right text-right"},it(e.date)))),o.a.createElement(k.a,null,o.a.createElement(v.a,null),o.a.createElement(v.a,{className:"d-flex flex-row justify-content-center"},o.a.createElement(function(){return t.processed?o.a.createElement("div",{className:"text-center"},t.justified?"Attaisnots":"Neattaisnots"):o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,{variant:"success",className:"mr-1 pt-0 pb-0",size:"sm",onClick:function(){return a.props.showProcessNotification(e,!0)}},"Attaisnots"),o.a.createElement(I.a,{variant:"danger",className:"ml-1 pt-0 pb-0",size:"sm",onClick:function(){return a.props.showProcessNotification(e,!1)}},"Neattaisnots"))},null)),o.a.createElement(v.a,{className:"d-flex flex-column justify-content-center"},o.a.createElement("span",{className:"flex-right text-right"},o.a.createElement(function(){return r?o.a.createElement("div",null,"Ierad\u0101s: ",it(l)):o.a.createElement("div",null,o.a.createElement("i",null,"Nav ieradies"))},null)))))})}return null;default:return null}});if(0!==e.filter(function(e){return null!=e}).length)return Promise.all(e).then(function(e){a.setState({processedNotifications:e})});a.setState({processedNotifications:o.a.createElement("h2",{style:{color:"grey"},className:"text-center"},"Nav ierakstu...")})},a.onChangeNotificationDate=function(e){a.setState({notificationDate:e})},a.onHide=function(){a.props.hideNotifications()},a.onShow=function(){a.processNotifications(),a.processHistoryNotifications()},a.showHistory=function(){a.setState({showHistory:!0},function(){a.processHistoryNotifications()})},a.hideHistory=function(){a.setState({showHistory:!1},function(){a.processNotifications()})},a.state={notifications:[],notificationDate:new Date,processedNotifications:[],showHistory:!1,historyNotifications:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;t.notificationDate===this.state.notificationDate&&JSON.stringify(e.notifications)===JSON.stringify(this.props.notifications)||this.setState({notifications:this.props.notifications.notifications.filter(function(e){var t=new Date(e.date);return t.getFullYear()===a.state.notificationDate.getFullYear()&&t.getMonth()===a.state.notificationDate.getMonth()&&t.getDate()===a.state.notificationDate.getDate()})},function(){a.processNotifications(),a.processHistoryNotifications()})}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Xt,null),o.a.createElement(Et.a,{size:"lg",show:this.props.notifications.show,onHide:function(){return e.onHide()},onShow:function(){return e.onShow()}},o.a.createElement(Et.a.Header,{closeButton:!0},o.a.createElement(Et.a.Title,{className:"w-100"},"Pazi\u0146ojumi")),o.a.createElement(Et.a.Body,null,o.a.createElement(k.a,{className:"mb-3"},o.a.createElement(v.a,null,o.a.createElement(qe,{className:"d-inline-block text-center",dateFormat:"dd.MM.yyyy.",selected:new Date(this.state.notificationDate),onChange:this.onChangeNotificationDate,maxDate:new Date,dayClassName:function(e){}})),o.a.createElement(v.a,null,o.a.createElement(I.a,{onClick:function(){return e.state.showHistory?e.hideHistory():e.showHistory()},className:"float-right"},this.state.showHistory?"Neapstr\u0101d\u0101tie pazi\u0146ojumi":"Apstr\u0101d\u0101tie pazi\u0146ojumi"))),o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement("span",{style:{fontSize:"12px"}},"* Atz\u012bm\u0113jot darbinieku k\u0101 'Neattaisnots', grafik\u0101 \u0161\u012b diena atz\u012bm\u0113sies ar 'K' - Darba kav\u0113jums.",o.a.createElement("br",null)))),o.a.createElement("hr",null),o.a.createElement(k.a,{className:"mt-3"},o.a.createElement(v.a,null,this.state.showHistory?this.state.historyNotifications:this.state.processedNotifications)))))}}]),t}(o.a.Component);var Zt=Object(r.b)(function(e){return{notifications:e.employees.notifications,processedNotifications:e.processedNotifications,employees:e.employees.employees}},function(e){return{hideNotifications:function(){return e(re())},showEmployeeWorkLog:function(t){return e(G(t))},showProcessNotification:function(t,a){return e(le(t,a))},hideProcessNotification:function(){return e(ie())}}})(qt),$t=(a(313),a(315),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).establishConnection=function(){ot().then(function(t){e.setState({serverConnectionEstablished:t.data.server,scannerConnectionEstablished:t.data.scanner},function(){$e().then(function(t){(!D||!0===e.state.serverConnectionEstablished&&!0===e.state.scannerConnectionEstablished)&&(clearInterval(e.state.pingInterval),e.setState({loading:!1,authenticated:t.data},function(){e.state.authenticated&&(e.onAuthentification(),tt().then(function(t){e.setState({user:t.data},function(){return e.props.updateUser(e.state.user)})}))}))})})})},e.onAuthentification=function(){ve(),De().then(function(t){e.props.updateNotifications(t.data)}),setInterval(function(){ve(),De().then(function(t){e.props.updateNotifications(t.data)})},O)},e.logOut=function(){et(),window.location.reload()},e.state={pingInterval:null,serverConnectionEstablished:!1,scannerConnectionEstablished:!1,loading:!0,authenticated:!1,user:{username:""}},window.scanCard=Ae,e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.establishConnection(),this.setState({pingInterval:setInterval(function(){e.establishConnection()},1e3)})}},{key:"render",value:function(){if(this.state.loading)return o.a.createElement("div",{className:"text-center"},o.a.createElement(g.a,{animation:"border"}),this.state.serverConnectionEstablished?this.state.scannerConnectionEstablished?null:o.a.createElement("div",null,"Veido savienojumu ar NFC skeneri..."):o.a.createElement("div",null,"Veido savienojumu ar serveri..."));if(this.state.authenticated){var e=this.props.notifications.notifications.filter(function(e){var t=new Date(e.date);return t.getFullYear()===(new Date).getFullYear()&&t.getMonth()===(new Date).getMonth()&&t.getDate()===(new Date).getDate()&&!e.type.includes("LOG")}).length;return o.a.createElement(h.a,null,o.a.createElement(y.a,{fluid:!0},o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement(b.a,{bg:"dark",variant:"dark",fixed:"top",expand:"md"},o.a.createElement(b.a.Brand,null,o.a.createElement("img",{src:Pt.a,alt:"",width:"30",height:"30",className:"d-inline-block align-top"})," V\u0100RPAS 1"),o.a.createElement(b.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),o.a.createElement(b.a.Collapse,{id:"responsive-navbar-nav"},o.a.createElement(w.a,{className:"mr-auto"},o.a.createElement(f.LinkContainer,{exact:!0,to:"/"},o.a.createElement(w.a.Link,null,"Darbinieki")),o.a.createElement(f.LinkContainer,{exact:!0,to:"/report"},o.a.createElement(w.a.Link,null,"Atskaites")),o.a.createElement(f.LinkContainer,{exact:!0,to:"/schedule"},o.a.createElement(w.a.Link,null,"Grafiks")),o.a.createElement(w.a.Link,{onClick:this.props.showHistory},"V\u0113sture"),o.a.createElement(w.a.Link,{onClick:this.props.showNotifications,style:{position:"relative"}},"Pazi\u0146ojumi",e?o.a.createElement("div",{style:{position:"absolute",right:"-10px",top:0,backgroundColor:"red",textAlign:"center",lineHeight:"19px",borderRadius:"50%",height:"20px",width:"20px",color:"white",fontSize:"12px"}},e):null)),o.a.createElement(w.a,null,o.a.createElement(b.a.Text,{className:"ml-md-4"},o.a.createElement("u",null,this.state.user.username)),o.a.createElement(w.a.Link,{className:"ml-md-2",onClick:this.logOut},"Iziet",o.a.createElement(Re.d,{className:"ml-1"}))))))),o.a.createElement(k.a,null,o.a.createElement(v.a,null,o.a.createElement(p.a,null,o.a.createElement(E.a,{exact:!0,path:"/",component:dt}),o.a.createElement(E.a,{exact:!0,path:"/report",component:pt}),o.a.createElement(E.a,{exact:!0,path:"/schedule",component:Bt}),o.a.createElement(E.a,{component:bt})),o.a.createElement(Dt,null),o.a.createElement(vt,null),o.a.createElement(Ot,null),o.a.createElement(jt,null),o.a.createElement(Tt,null),o.a.createElement(zt,null),o.a.createElement(Ut,null),o.a.createElement(Jt,null),o.a.createElement(Zt,null))),o.a.createElement(k.a,null,o.a.createElement(v.a,{className:"footer"},"V\u0101rpas 1 \xa9 2019"))))}return o.a.createElement(Mt,null)}}]),t}(o.a.PureComponent));var Qt=Object(r.b)(function(e){return{notifications:e.employees.notifications}},function(e){return{updateUser:function(t){return e(U(t))},showNotifications:function(){return e(oe())},updateNotifications:function(t){return e(ne(t))},showHistory:function(){return e(se())}}})($t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(r.a,{store:pe},o.a.createElement(Qt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},89:function(e,t,a){e.exports=a.p+"static/media/logo.96ebfbf9.png"}},[[175,2,1]]]);
//# sourceMappingURL=main.8791d3aa.chunk.js.map