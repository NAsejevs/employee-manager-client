(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,a){},143:function(e,t,a){e.exports=a(256)},152:function(e,t,a){},256:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),l=a(16),s=a.n(l),i=(a(152),a(9)),c=a(10),u=a(12),m=a(11),d=a(13),h=a(63),p=a(126),E=a(62),g=a(266),y=a(267),f=a(259),v=a(221),b=a(271),C=a(270),k=a(130),w=a(261),D=a(220),O=a(272),S=a(262),x=a(257),j=a(236),I=a(268),L=a(66),F=a.n(L),_=a(67),T=a.n(_),N=function(e){return{type:"UPDATE_EMPLOYEES",payload:e}},A=function(e){return{type:"SHOW_EMPLOYEE_WORK_LOG",payload:e}},P=function(){return{type:"HIDE_EMPLOYEE_WORK_LOG"}},M=function(e){return{type:"SHOW_DELETE_EMPLOYEE",payload:e}},H=function(){return{type:"HIDE_DELETE_EMPLOYEE"}},W=function(e){return{type:"SHOW_EDIT_EMPLOYEE",payload:e}},R=function(){return{type:"HIDE_EDIT_EMPLOYEE"}},z=function(){return{type:"SHOW_REGISTER_EMPLOYEE"}},G=function(){return{type:"HIDE_REGISTER_EMPLOYEE"}},U=function(){return{type:"SHOW_EXPORT_EXCEL"}},Y=function(){return{type:"HIDE_EXPORT_EXCEL"}},B=function(){return{type:"SHOW_CHECK_CARD"}},V=function(){return{type:"HIDE_CHECK_CARD"}},K=function(e){return{type:"SHOW_COMMENT_EMPLOYEE",payload:e}},X=function(){return{type:"HIDE_COMMENT_EMPLOYEE"}},q=a(42),J=a(142),$=a(6),Q={employees:[],employeeWorkLog:{show:!1,id:null},deleteEmployee:{show:!1,employee:{}},editEmployee:{show:!1,employee:{}},registerEmployee:{show:!1},exportExcel:{show:!1},checkCard:{show:!1},commentEmployee:{show:!1,employee:{}}},Z=Object(q.b)({employees:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_EMPLOYEES":return Object($.a)({},e,{employees:Object(J.a)(t.payload)});case"SHOW_EMPLOYEE_WORK_LOG":return Object($.a)({},e,{employeeWorkLog:Object($.a)({},e.employeeWorkLog,{show:!0,id:t.payload})});case"HIDE_EMPLOYEE_WORK_LOG":return Object($.a)({},e,{employeeWorkLog:Object($.a)({},e.employeeWorkLog,{show:!1,id:null})});case"SHOW_DELETE_EMPLOYEE":return Object($.a)({},e,{deleteEmployee:Object($.a)({},e.deleteEmployee,{show:!0,employee:t.payload})});case"HIDE_DELETE_EMPLOYEE":return Object($.a)({},e,{deleteEmployee:Object($.a)({},e.deleteEmployee,{show:!1,employee:{}})});case"SHOW_EDIT_EMPLOYEE":return Object($.a)({},e,{editEmployee:Object($.a)({},e.editEmployee,{show:!0,employee:t.payload})});case"HIDE_EDIT_EMPLOYEE":return Object($.a)({},e,{editEmployee:Object($.a)({},e.editEmployee,{show:!1,employee:{}})});case"SHOW_REGISTER_EMPLOYEE":return Object($.a)({},e,{registerEmployee:Object($.a)({},e.registerEmployee,{show:!0})});case"HIDE_REGISTER_EMPLOYEE":return Object($.a)({},e,{registerEmployee:Object($.a)({},e.registerEmployee,{show:!1})});case"SHOW_EXPORT_EXCEL":return Object($.a)({},e,{exportExcel:Object($.a)({},e.exportExcel,{show:!0})});case"HIDE_EXPORT_EXCEL":return Object($.a)({},e,{exportExcel:Object($.a)({},e.exportExcel,{show:!1})});case"SHOW_CHECK_CARD":return Object($.a)({},e,{checkCard:Object($.a)({},e.checkCard,{show:!0})});case"HIDE_CHECK_CARD":return Object($.a)({},e,{checkCard:Object($.a)({},e.checkCard,{show:!1})});case"SHOW_COMMENT_EMPLOYEE":return Object($.a)({},e,{commentEmployee:Object($.a)({},e.commentEmployee,{show:!0,employee:t.payload})});case"HIDE_COMMENT_EMPLOYEE":return Object($.a)({},e,{commentEmployee:Object($.a)({},e.commentEmployee,{show:!1,employee:{}})});default:return e}}});var ee=Object(q.c)(Z,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),te=a(134),ae=a.n(te).a.create({baseURL:"http://192.168.1.150:8080",withCredentials:!0}),ne=function(){return ae.post("/getEmployees")},re=function(e){return ae.post("/getEmployee",{id:e})},oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ASC";return ae.post("/getEmployeeWorkLog",{id:e,order:t})},le=function(e,t,a){return ae.post("/getEmployeeWorkLogFromTo",{id:e,from:t,to:a})},se=function(e){return ae.post("/addEmployee",e)},ie=function(e,t){return ae.post("/setEmployeeWorking",{id:e,working:t})},ce=function(e){return ae.post("/deleteEmployee",{id:e})},ue=function(e){return ae.post("/export",{settings:e}).then(function(){return ae.get("/export",{responseType:"blob"})})},me=function(e){return ae.post("/cardScanned",{uid:e})},de=function(e){return ae.post("/checkCard",{status:e},{timeout:1e3})},he=function(e){return ae.post("/addCard",{id:e})},pe=function(e){return ae.post("/changeCard",{id:e})},Ee=function(e){return ae.post("/deleteCard",{id:e})},ge=function(e){return ae.post("/getEmployeeComments",{id:e})},ye=function(){ne().then(function(e){ee.dispatch(N(e.data))})},fe=function(){return ae.post("/ping")},ve=function(e){return e<10&&(e="0"+e),e},be=function(e){var t=Math.floor(e/1e3),a=Math.floor(t/60),n=Math.floor(a/60);return{seconds:t=t-60*n*60-60*(a-=60*n),minutes:a,hours:n}},Ce=(a(55),a(110),a(111),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-box"},r.a.createElement("div",{className:"container-box-header"},this.props.header),r.a.createElement("div",{className:"container-box-body"},this.props.children))}}]),t}(r.a.Component));var ke=Object(o.b)(function(e){return{}},function(e){return{}})(Ce),we=a(260),De=a(20),Oe=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,{variant:"link",onClick:this.props.onClick},r.a.createElement(De.h,null))}}]),t}(r.a.Component);var Se=Object(o.b)(function(e){return{deleteEmployee:e.employees.deleteEmployee}},function(e){return{showDeleteEmployee:function(t){return e(M(t))},showEditEmployee:function(t){return e(W(t))},showCommentEmployee:function(t){return e(K(t))}}})(function(e){return r.a.createElement(f.a,{className:"float-right"},r.a.createElement(v.a,{xs:"6"},r.a.createElement(x.a,null,r.a.createElement(x.a.Toggle,{as:Oe,id:"dropdown-custom-components"}),r.a.createElement(x.a.Menu,null,r.a.createElement(x.a.Item,{eventKey:"1",onClick:function(){return e.showEditEmployee(e.employee)}},r.a.createElement(De.c,{className:"mr-2 mb-1"}),"Redi\u0123\u0113t"),r.a.createElement(x.a.Item,{eventKey:"2",onClick:function(){return(t=e.employee.id,a=!e.employee.archived,ae.post("/setArchivedEmployee",{id:t,archived:a})).then(function(){ye()});var t,a}},r.a.createElement(De.a,{height:"100%",width:"auto",className:"mr-2 mb-1"}),e.employee.archived?"Iz\u0146emt no arh\u012bva":"Arhiv\u0113t"),r.a.createElement(x.a.Item,{eventKey:"3",onClick:function(){return(t=e.employee.id,a=!e.employee.active,ae.post("/setActiveEmployee",{id:t,active:a})).then(function(){ye()});var t,a}},e.employee.active?r.a.createElement(De.k,{height:"100%",width:"auto",className:"mr-2 mb-1"}):r.a.createElement(De.b,{height:"100%",width:"auto",className:"mr-2 mb-1"}),e.employee.active?"Deaktiviz\u0113t":"Aktiviz\u0113t"),r.a.createElement(x.a.Item,{eventKey:"4",onClick:function(){return e.showDeleteEmployee(e.employee)}},r.a.createElement(De.i,{height:"100%",width:"auto",className:"mr-2 mb-1"}),"Dz\u0113st"),r.a.createElement(x.a.Item,{eventKey:"5",onClick:function(){return e.showCommentEmployee(e.employee)}},r.a.createElement(De.c,{className:"mr-2 mb-1"}),"Pievienot Koment\u0101ru")))),r.a.createElement(v.a,{xs:"6"},r.a.createElement(O.a,{placement:"top",overlay:r.a.createElement(we.a,null,"Atz\u012bm\u0113t k\u0101 ",e.employee.working?"izg\u0101ju\u0161u":"ien\u0101ku\u0161u")},r.a.createElement(D.a,{onClick:function(){return ie(e.employee.id,!e.employee.working).then(function(){ye()})},variant:e.employee.working?"danger":"success"},e.employee.working?r.a.createElement(De.k,null):r.a.createElement(De.b,null)))))}),xe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).onTableChange=function(){e.formatTable(function(){e.applyNameFilter(function(){e.applyPositionFilter()})})},e.applyNameFilter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a=e.state.tableData.filter(function(t){return(t.name.name+" "+t.name.surname).toString().toLowerCase().indexOf(e.state.nameFilter.toLowerCase())>-1});e.setState({tableData:a},t)},e.applyPositionFilter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a=e.state.tableData.filter(function(t){return(t.position?t.position:"").toString().toLowerCase().indexOf(e.state.positionFilter.toLowerCase())>-1});e.setState({tableData:a},t)},e.formatTable=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a=e.props.employees.filter(function(t){return!(t.archived&&!e.state.showArchive)&&!(!t.active&&!e.state.showInactive)}),n=new Date;n.setHours(0,0,0);var r=new Date;r.setHours(23,59,59);var o=a.map(function(e){return le(e.id,n,r).then(function(t){return ge(e.id).then(function(a){return{id:e.id,position:e.position?e.position.toString():null,name:{id:e.id,name:e.name,surname:e.surname,working:e.working,comments:a.data},today:{working:e.working,workLogs:t.data},commands:e}})})});Promise.all(o).then(function(a){e.setState({tableData:a},function(){t()})})},e.onToggleArchive=function(){e.setState({showArchive:!e.state.showArchive})},e.onToggleInactive=function(){e.setState({showInactive:!e.state.showInactive})},e.onToggleFilters=function(){e.setState({showFilters:!e.state.showFilters})},e.onChangeNameFilter=function(t){e.setState({nameFilter:t.target.value})},e.onChangePositionFilter=function(t){e.setState({positionFilter:t.target.value})},e.clearAllFilters=function(){var t=new Date;t.setHours(0,0,0);var a=new Date;a.setHours(23,59,59),e.setState({nameFilter:"",positionFilter:"",showArchive:!1,showInactive:!1,startDate:t,endDate:a})},e.state={workLogUserId:null,showWorkLogModal:!1,updateInterval:null,tableData:[],filter:{type:"",filters:""},showFilters:!1,showArchive:!1,showInactive:!1,nameFilter:"",positionFilter:""},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){ye(),this.setState({updateInterval:setInterval(function(){ye()},1e3)})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.updateInterval)}},{key:"componentDidUpdate",value:function(e,t){e.employees===this.props.employees&&t.showArchive===this.state.showArchive&&t.showInactive===this.state.showInactive&&t.nameFilter===this.state.nameFilter&&t.positionFilter===this.state.positionFilter||this.onTableChange()}},{key:"render",value:function(){var e=this,t=[{dataField:"id",text:"#",sort:!0},{dataField:"name",text:"V\u0101rds",sort:!0,sortFunc:function(e,t,a){return e.name<t.name?"asc"===a?1:-1:e.name>t.name?"asc"===a?-1:1:0},classes:"align-middle",formatter:function(t,a){var n={borderBottom:"solid 1px gray"},o=t.comments.length?t.comments.map(function(e,a){return r.a.createElement(f.a,{key:a,style:a<t.comments.length-1?n:null,className:"ml-1 mr-1 pt-1 pb-2"},r.a.createElement(v.a,null,r.a.createElement("span",null,e.text)),r.a.createElement(v.a,{xs:"auto"},r.a.createElement(De.l,{style:{cursor:"pointer"},onClick:function(){return(t=e.id,ae.post("/deleteEmployeeComment",{commentId:t})).then(function(){return ye()});var t}})))}):null;return r.a.createElement("div",null,r.a.createElement("nobr",null,r.a.createElement(w.a,{style:{fontSize:"14px"},variant:t.working?"success":"danger"},r.a.createElement(De.j,null)),r.a.createElement(D.a,{variant:"link",onClick:function(){return e.props.showEmployeeWorkLog(t.id)},style:{color:"#0000FF"}},t.name+" "+t.surname),t.comments.length?r.a.createElement(O.a,{trigger:"click",rootClose:!0,placement:"bottom",overlay:r.a.createElement(S.a,null,o)},r.a.createElement(De.f,{style:{cursor:"pointer"},className:"ml-1"})):null))}},{dataField:"today",text:"\u0160odien",sort:!0,sortFunc:function(e,t,a){var n=e.working?new Date(e.workLogs[e.workLogs.length-1].start_time):new Date(e.workLogs[e.workLogs.length-1].end_time),r=t.working?new Date(t.workLogs[t.workLogs.length-1].start_time):new Date(t.workLogs[t.workLogs.length-1].end_time);return n>r?"asc"===a?1:-1:n<r?"asc"===a?-1:1:0},classes:"align-middle",formatter:function(e,t){var a=[],n=0,o={hours:0,minutes:0,seconds:0};if(e.workLogs.forEach(function(t,l){var s,i;null===t.end_time&&(t.end_time=new Date),s=new Date(t.end_time)-new Date(t.start_time),i=be(s);var c=ve(new Date(t.start_time).getHours())+":"+ve(new Date(t.start_time).getMinutes()),u=ve(new Date(t.end_time).getHours())+":"+ve(new Date(t.end_time).getMinutes()),m=i.hours+" st. "+i.minutes+" min. ";n+=new Date(t.end_time)-new Date(t.start_time),o=be(n),a.push(r.a.createElement(f.a,{key:l,style:{fontSize:"14px"}},r.a.createElement(v.a,{xs:"4"},r.a.createElement("span",null,"Ien\u0101ca: ",c)),r.a.createElement(v.a,{xs:"4"},e.working&&l===e.workLogs.length-1?null:r.a.createElement("span",null,"Izg\u0101ja: ",u)),r.a.createElement(v.a,{xs:"4",className:"text-center"},null!==m?r.a.createElement("span",null,m):null)))}),a.length){var l=o.hours+" st. "+o.minutes+" min. ";a.push(r.a.createElement(f.a,{key:a.length,style:{fontSize:"14px"}},r.a.createElement(v.a,{xs:"4"}),r.a.createElement(v.a,{xs:"4"}),r.a.createElement(v.a,{xs:"4",className:"text-center",style:{borderTop:"solid 1px"}},null!==l?r.a.createElement("span",null,r.a.createElement("b",null,l)):null)))}return a}},{dataField:"commands",text:"",classes:"align-middle",formatter:function(e,t){return r.a.createElement(Se,{employee:e})}}],a=T()({page:1,alwaysShowAllBtns:!0,showTotal:!0,sizePerPage:10,paginationTotalRenderer:function(e,t,a){return 0===t?r.a.createElement("span",{className:"react-bootstrap-table-pagination-total"},"\xa0Netika atrasts neviens rezult\u0101ts"):r.a.createElement("span",{className:"react-bootstrap-table-pagination-total"},"\xa0R\u0101da ",t-e+1," no ",a," rezult\u0101tiem")},sizePerPageList:[{text:"10",value:10},{text:"25",value:25},{text:"50",value:50},{text:"100",value:100},{text:"Visi",value:this.state.tableData.length}]});return r.a.createElement(ke,{header:"Darbinieki"},r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(D.a,{variant:"link",onClick:this.onToggleFilters,className:"float-left"},this.state.showFilters?r.a.createElement(De.g,{className:"mr-2 mb-1"}):r.a.createElement(De.e,{className:"mr-2 mb-1"}),"Filtri"),r.a.createElement(x.a,{alignRight:!0,className:"float-right"},r.a.createElement(x.a.Toggle,{variant:"link"},"Opcijas"),r.a.createElement(x.a.Menu,null,r.a.createElement(x.a.Item,{onClick:this.props.showRegisterEmployee},"Pievienot darbinieku"),r.a.createElement(x.a.Item,{onClick:this.props.showCheckCard},"Atrast darbinieku p\u0113c kartes"),r.a.createElement(x.a.Item,{onClick:this.props.showExportExcel},"Eksports"))))),r.a.createElement(j.a,{in:this.state.showFilters},r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Check,{type:"checkbox",label:"R\u0101d\u012bt arh\u012bv\u0101 eso\u0161os darbiniekus",checked:this.state.showArchive,onChange:this.onToggleArchive})),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Check,{type:"checkbox",label:"R\u0101d\u012bt deaktiviz\u0113tus darbiniekus",checked:this.state.showInactive,onChange:this.onToggleInactive}))),r.a.createElement(v.a,null,r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Control,{placeholder:"V\u0101rds...",onChange:this.onChangeNameFilter,value:this.state.nameFilter}),r.a.createElement(I.a.Text,null,"Mekl\u0113t darbinieku p\u0113c v\u0101rda vai uzv\u0101rda")),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Control,{placeholder:"Amats...",onChange:this.onChangePositionFilter,value:this.state.positionFilter}),r.a.createElement(I.a.Text,null,"Mekl\u0113t darbinieku p\u0113c amata")),r.a.createElement(D.a,{className:"ml-2 float-right",variant:"danger",onClick:this.clearAllFilters},"Not\u012br\u012bt visus filtrus")))),r.a.createElement(F.a,{bootstrap4:!0,keyField:"id",data:this.state.tableData,columns:t,bordered:!1,hover:!0,defaultSorted:[{dataField:"name",order:"asc"}],remote:{filter:!0},onTableChange:this.onTableChange,pagination:a,rowStyle:function(e){return e.commands.active?e.commands.archived?{backgroundColor:"rgba(255, 255, 0, 0.1)"}:void 0:{backgroundColor:"rgba(255, 0, 0, 0.1)"}}}))}}]),t}(r.a.Component);var je=Object(o.b)(function(e){return{employees:e.employees.employees}},function(e){return{updateEmployees:function(t){return e(N(t))},showRegisterEmployee:function(){return e(z())},showExportExcel:function(){return e(U())},showCheckCard:function(){return e(B())},showEmployeeWorkLog:function(t){return e(A(t))}}})(xe),Ie=a(263),Le=a(32),Fe=(a(56),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(I.a.Control,{disabled:this.props.disabled,onClick:this.props.onClick,onChange:this.props.onChange,placeholder:this.props.value,value:this.props.value,className:"text-center"})}}]),t}(r.a.Component)),_e=a(49),Te=a.n(_e),Ne=function(e){function t(){var e;Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).handleDateChangeStart=function(t){var a=new Date(t);a.setHours(0,0,0),e.setState({startDate:a})},e.handleDateChangeEnd=function(t){var a=new Date(t);a.setHours(23,59,59),e.setState({endDate:a})},e.onClickFilter=function(t){switch(t){case 0:e.handleDateChangeStart(new Date),e.handleDateChangeEnd(new Date);break;case 1:var a=new Date;a.setDate(a.getDate()-1),e.handleDateChangeStart(a),e.handleDateChangeEnd(a);break;case 2:var n=new Date;n.setDate(n.getDate()-7),e.handleDateChangeStart(n),e.handleDateChangeEnd(new Date);break;case 3:var r=new Date;r.setDate(r.getDate()-30),e.handleDateChangeStart(r),e.handleDateChangeEnd(new Date);break;default:e.handleDateChangeStart(new Date),e.handleDateChangeEnd(new Date)}e.setState({dropdown:Object($.a)({},e.state.dropdown,{currentFilter:e.state.dropdown.filters[t]})})},e.onTableChange=function(){e.formatTable(function(){e.applyNameFilter(function(){e.applyPositionFilter()})})},e.applyNameFilter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a=e.state.tableData.filter(function(t){return(t.name.name+" "+t.name.surname).toString().toLowerCase().indexOf(e.state.nameFilter.toLowerCase())>-1});e.setState({tableData:a},t)},e.applyPositionFilter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a=e.state.tableData.filter(function(t){return(t.position?t.position:"").toString().toLowerCase().indexOf(e.state.positionFilter.toLowerCase())>-1});e.setState({tableData:a},t)},e.formatTable=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a=e.props.employees.filter(function(t){return!(t.archived&&!e.state.showArchive)&&!(!t.active&&!e.state.showInactive)}),n=new Date(e.state.startDate),r=new Date(e.state.endDate),o=a.map(function(t){return le(t.id,n,r).then(function(a){return ge(t.id).then(function(n){return{id:t.id,position:t.position?t.position.toString():null,name:{id:t.id,name:t.name,surname:t.surname,working:t.working,comments:n.data},today:{working:t.working,workLogs:a.data,startDate:e.state.startDate,endDate:e.state.endDate},commands:t}})})});Promise.all(o).then(function(a){e.setState({tableData:a},function(){t()})})},e.onToggleArchive=function(){e.setState({showArchive:!e.state.showArchive})},e.onToggleInactive=function(){e.setState({showInactive:!e.state.showInactive})},e.onToggleFilters=function(){e.setState({showFilters:!e.state.showFilters})},e.onChangeNameFilter=function(t){e.setState({nameFilter:t.target.value})},e.onChangePositionFilter=function(t){e.setState({positionFilter:t.target.value})},e.clearAllFilters=function(){var t=new Date;t.setHours(0,0,0);var a=new Date;a.setHours(23,59,59),e.setState({nameFilter:"",positionFilter:"",showArchive:!1,showInactive:!1,startDate:t,endDate:a,dropdown:{currentFilter:"\u0160odiena",filters:["\u0160odiena","Vakardiena","P\u0113d\u0113j\u0101s 7 dienas","P\u0113d\u0113j\u0101s 30 dienas"]}})};var a=new Date;a.setHours(0,0,0);var n=new Date;return n.setHours(23,59,59),e.state={workLogUserId:null,showWorkLogModal:!1,updateInterval:null,tableData:[],filter:{type:"",filters:""},showFilters:!1,showArchive:!1,showInactive:!1,nameFilter:"",positionFilter:"",startDate:a,endDate:n,dropdown:{currentFilter:"\u0160odiena",filters:["\u0160odiena","Vakardiena","P\u0113d\u0113j\u0101s 7 dienas","P\u0113d\u0113j\u0101s 30 dienas"]}},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){ye(),this.setState({updateInterval:setInterval(function(){ye()},5e3)})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.updateInterval)}},{key:"componentDidUpdate",value:function(e,t){e.employees===this.props.employees&&t.showArchive===this.state.showArchive&&t.showInactive===this.state.showInactive&&t.nameFilter===this.state.nameFilter&&t.positionFilter===this.state.positionFilter&&t.startDate===this.state.startDate&&t.endDate===this.state.endDate||this.onTableChange()}},{key:"render",value:function(){var e=this,t=ve(this.state.startDate.getDate())+"."+ve(this.state.startDate.getMonth()+1)+"."+ve(this.state.startDate.getFullYear()),a=ve(this.state.endDate.getDate())+"."+ve(this.state.endDate.getMonth()+1)+"."+ve(this.state.endDate.getFullYear()),n=[{dataField:"id",text:"#",sort:!0},{dataField:"name",text:"V\u0101rds",sort:!0,sortFunc:function(e,t,a){return e.name<t.name?"asc"===a?1:-1:e.name>t.name?"asc"===a?-1:1:0},classes:"align-middle",formatter:function(t,a){return r.a.createElement("div",null,r.a.createElement("nobr",null,r.a.createElement(D.a,{variant:"link",onClick:function(){return e.props.showEmployeeWorkLog(t.id)},style:{color:"#0000FF"}},t.name+" "+t.surname)))}},{dataField:"today",text:t+(t===a?"":" - "+a),sort:!0,sortFunc:function(e,t,a){var n=e.working?new Date(e.workLogs[e.workLogs.length-1].start_time):new Date(e.workLogs[e.workLogs.length-1].end_time),r=t.working?new Date(t.workLogs[t.workLogs.length-1].start_time):new Date(t.workLogs[t.workLogs.length-1].end_time);return n>r?"asc"===a?1:-1:n<r?"asc"===a?-1:1:0},classes:"align-middle",formatter:function(e,t){var a=[],n=0,o={hours:0,minutes:0,seconds:0},l=e.endDate-e.startDate<864e5;if(e.workLogs.forEach(function(t,s){var i,c;null===t.end_time&&(t.end_time=new Date),i=new Date(t.end_time)-new Date(t.start_time),c=be(i);var u=ve(new Date(t.start_time).getHours())+":"+ve(new Date(t.start_time).getMinutes()),m=ve(new Date(t.end_time).getHours())+":"+ve(new Date(t.end_time).getMinutes()),d=c.hours+" st. "+c.minutes+" min. ";n+=new Date(t.end_time)-new Date(t.start_time),o=be(n),l&&a.push(r.a.createElement(f.a,{key:s,style:{fontSize:"14px"}},r.a.createElement(v.a,{xs:"4"},r.a.createElement("span",null,"Ien\u0101ca: ",u)),r.a.createElement(v.a,{xs:"4"},e.working&&s===e.workLogs.length-1?null:r.a.createElement("span",null,"Izg\u0101ja: ",m)),r.a.createElement(v.a,{xs:"4",className:"text-center"},null!==d?r.a.createElement("span",null,d):null)))}),a.length&&l){var s=o.hours+" st. "+o.minutes+" min. ";a.push(r.a.createElement(f.a,{key:a.length,style:{fontSize:"14px"}},r.a.createElement(v.a,{xs:"4"}),r.a.createElement(v.a,{xs:"4"}),r.a.createElement(v.a,{xs:"4",className:"text-center",style:{borderTop:"solid 1px"}},null!==s?r.a.createElement("span",null,r.a.createElement("b",null,s)):null)))}else if(!l){var i=o.hours+" st. "+o.minutes+" min. ";a.push(r.a.createElement(f.a,{key:a.length,style:{fontSize:"14px"}},r.a.createElement(v.a,{className:"text-center"},null!==i?r.a.createElement("span",null,i):null),r.a.createElement(v.a,{xs:"4"}),r.a.createElement(v.a,{xs:"4"})))}return a}}],o=T()({page:1,alwaysShowAllBtns:!0,showTotal:!0,sizePerPage:10,paginationTotalRenderer:function(e,t,a){return 0===t?r.a.createElement("span",{className:"react-bootstrap-table-pagination-total"},"\xa0Netika atrasts neviens rezult\u0101ts"):r.a.createElement("span",{className:"react-bootstrap-table-pagination-total"},"\xa0R\u0101da ",t-e+1," no ",a," rezult\u0101tiem")},sizePerPageList:[{text:"10",value:10},{text:"25",value:25},{text:"50",value:50},{text:"100",value:100},{text:"Visi",value:this.state.tableData.length}]});return r.a.createElement(ke,{header:"Atskaites"},r.a.createElement(I.a,null,r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Check,{type:"checkbox",label:"R\u0101d\u012bt arh\u012bv\u0101 eso\u0161os darbiniekus",checked:this.state.showArchive,onChange:this.onToggleArchive})),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Check,{type:"checkbox",label:"R\u0101d\u012bt deaktiviz\u0113tus darbiniekus",checked:this.state.showInactive,onChange:this.onToggleInactive}))),r.a.createElement(v.a,null,r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Control,{placeholder:"V\u0101rds...",onChange:this.onChangeNameFilter,value:this.state.nameFilter}),r.a.createElement(I.a.Text,null,"Mekl\u0113t darbinieku p\u0113c v\u0101rda vai uzv\u0101rda")),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Control,{placeholder:"Amats...",onChange:this.onChangePositionFilter,value:this.state.positionFilter}),r.a.createElement(I.a.Text,null,"Mekl\u0113t darbinieku p\u0113c amata")))),r.a.createElement(f.a,{className:"mt-4"},r.a.createElement(v.a,{xs:"auto"},r.a.createElement(I.a.Group,{as:f.a},r.a.createElement(I.a.Label,{column:!0,xs:"auto"},"Dati no"),r.a.createElement(v.a,null,r.a.createElement(Le.a,{dateFormat:"dd.MM.yyyy.",customInput:r.a.createElement(Fe,null),selected:this.state.startDate,onChange:this.handleDateChangeStart,maxDate:new Date,locale:Te.a})))),r.a.createElement(v.a,{xs:"auto"},r.a.createElement(I.a.Group,{as:f.a},r.a.createElement(I.a.Label,{column:!0,xs:"auto"},"l\u012bdz"),r.a.createElement(v.a,null,r.a.createElement(Le.a,{dateFormat:"dd.MM.yyyy.",customInput:r.a.createElement(Fe,null),selected:this.state.endDate,onChange:this.handleDateChangeEnd,minDate:this.state.startDate,maxDate:new Date,locale:Te.a})))),r.a.createElement(v.a,null,r.a.createElement(D.a,{className:"ml-2 float-right",variant:"danger",onClick:this.clearAllFilters},"Not\u012br\u012bt visus filtrus"),r.a.createElement(Ie.a,{variant:"secondary",title:this.state.dropdown.currentFilter,className:"float-right"},this.state.dropdown.filters.map(function(t,a){return r.a.createElement(x.a.Item,{key:a,onClick:function(){return e.onClickFilter(a)}},t)}))))),r.a.createElement(F.a,{bootstrap4:!0,keyField:"id",data:this.state.tableData,columns:n,bordered:!1,hover:!0,defaultSorted:[{dataField:"id",order:"asc"}],remote:{filter:!0},onTableChange:this.onTableChange,pagination:o,rowStyle:function(e){return e.commands.active?e.commands.archived?{backgroundColor:"rgba(255, 255, 0, 0.1)"}:void 0:{backgroundColor:"rgba(255, 0, 0, 0.1)"}}}))}}]),t}(r.a.Component);var Ae=Object(o.b)(function(e){return{employees:e.employees.employees}},function(e){return{updateEmployees:function(t){return e(N(t))},showEmployeeWorkLog:function(t){return e(A(t))}}})(Ne),Pe=a(269),Me=a(264),He={DATA_INPUT:0,RFID_WAIT:1,COMPLETE:2},We=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).onNameChange=function(e){a.setState({name:e.target.value})},a.onSurnameChange=function(e){a.setState({surname:e.target.value})},a.onPositionChange=function(e){a.setState({position:e.target.value})},a.onNumberChange=function(e){a.setState({number:e.target.value})},a.onPersonalCodeChange=function(e){a.setState({personalCode:e.target.value})},a.onAddCardChange=function(){a.setState({addCard:!a.state.addCard})},a.onFormSubmit=function(e){e.preventDefault(),e.stopPropagation();var t={name:a.state.name,surname:a.state.surname,position:a.state.position,number:a.state.number,personalCode:a.state.personalCode};a.state.registrationState===He.DATA_INPUT?a.state.addCard?se(t).then(function(e){var t=e.data,n=null;he(t.id),t&&(a.setState({newEmployee:t}),n=setInterval(function(){re(t.id).then(function(e){null!==e.data.uid&&(clearInterval(n),a.setState({newEmployee:t,registrationState:He.COMPLETE}))})},1e3)),ne().then(function(e){a.props.updateEmployees(e.data)}),a.setState({registrationState:He.RFID_WAIT})}):se(t).then(function(e){e.data&&(ne().then(function(e){a.props.updateEmployees(e.data)}),a.setState({registrationState:He.COMPLETE}))}):a.state.registrationState===He.COMPLETE&&a.props.hideRegisterEmployee()},a.hideRegisterEmployeeAndDelete=function(){a.state.registrationState>=He.RFID_WAIT&&(ce(a.state.newEmployee.id),a.props.hideRegisterEmployee())},a.onExited=function(){a.setState({registrationState:He.DATA_INPUT,checkInterval:null,newEmployee:{},name:"",surname:"",position:"",number:"",personalCode:"",uid:""})},a.state={registrationState:He.DATA_INPUT,checkInterval:null,newEmployee:{},name:"",surname:"",position:"",number:"",personalCode:"",addCard:!0,uid:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Pe.a,{show:this.props.registerEmployee.show,onHide:function(){return e.props.hideRegisterEmployee()},onExit:this.deleteAndCancel,onExited:this.onExited},r.a.createElement(I.a,{onSubmit:this.onFormSubmit},r.a.createElement(Pe.a.Header,{closeButton:!0},r.a.createElement(Pe.a.Title,null,"Pievienot Darbinieku")),r.a.createElement(Pe.a.Body,null,r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Label,null,"* V\u0101rds"),r.a.createElement(I.a.Control,{required:!0,disabled:this.state.registrationState!==He.DATA_INPUT,value:this.state.name,onChange:this.onNameChange,placeholder:"V\u0101rds"}))),r.a.createElement(v.a,null,r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Label,null,"* Uzv\u0101rds"),r.a.createElement(I.a.Control,{required:!0,disabled:this.state.registrationState!==He.DATA_INPUT,value:this.state.surname,onChange:this.onSurnameChange,placeholder:"Uzv\u0101rds"})))),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Label,null,"Personas Kods"),r.a.createElement(I.a.Control,{disabled:this.state.registrationState!==He.DATA_INPUT,value:this.state.personalCode,onChange:this.onPersonalCodeChange,placeholder:"123456-12345"})),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Label,null,"Amats"),r.a.createElement(I.a.Control,{disabled:this.state.registrationState!==He.DATA_INPUT,value:this.state.position,onChange:this.onPositionChange,placeholder:"Darba Amats"})),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Label,null,"Telefona Numurs"),r.a.createElement(I.a.Control,{disabled:this.state.registrationState!==He.DATA_INPUT,value:this.state.number,onChange:this.onNumberChange,placeholder:"Telefona Numurs"})),r.a.createElement(I.a.Group,{controlId:"formBasicChecbox"},r.a.createElement(I.a.Check,{type:"checkbox",label:"Pievienot NFC karti",name:"addCard",checked:this.state.addCard,onChange:this.onAddCardChange})),r.a.createElement("p",null,r.a.createElement("em",null,"Oblig\u0101ti j\u0101nor\u0101da lauki, kas atz\u012bm\u0113ti ar *")),r.a.createElement(Me.a,{variant:"primary",show:this.state.registrationState===He.RFID_WAIT,onClose:function(){return null}},"Nosken\u0113jiet v\u0113lamo karti\u0146u."),r.a.createElement(Me.a,{variant:"success",show:this.state.registrationState===He.COMPLETE,onClose:function(){return null}},"Darbinieks veiksm\u012bgi pievienots darbinieku sarakstam.")),r.a.createElement(Pe.a.Footer,null,r.a.createElement(Re,{registrationState:this.state.registrationState,hideRegisterEmployee:this.props.hideRegisterEmployee,hideRegisterEmployeeAndDelete:this.hideRegisterEmployeeAndDelete,addCard:this.state.addCard}))))}}]),t}(r.a.Component);function Re(e){switch(e.registrationState){default:case He.DATA_INPUT:return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{variant:e.addCard?"primary":"success",type:"submit"},e.addCard?"T\u0101l\u0101k":"Pabeigt"));case He.RFID_WAIT:return null;case He.COMPLETE:return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{variant:"success",type:"submit"},"Pabeigt"))}}var ze=Object(o.b)(function(e){return{employees:e.employees.employees,registerEmployee:e.employees.registerEmployee}},function(e){return{updateEmployees:function(t){return e(N(t))},showRegisterEmployee:function(){return e(z())},hideRegisterEmployee:function(){return e(G())}}})(We),Ge=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement(v.a,null,"404"))}}]),t}(r.a.Component),Ue=a(265),Ye=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).fetchWorkLog=function(){re(a.props.employeeWorkLog.id).then(function(e){a.setState({employee:e.data})}),oe(a.props.employeeWorkLog.id,"DESC").then(function(e){a.setState({workLog:e.data})}),a.setState({updateInterval:setInterval(function(){re(a.props.employeeWorkLog.id).then(function(e){a.setState({employee:e.data})}),oe(a.props.employeeWorkLog.id,"DESC").then(function(e){a.setState({workLog:e.data})})},5e3)})},a.onModalHide=function(){clearInterval(a.state.updateInterval),a.setState({employee:{name:"Iel\u0101d\u0113...",surname:" "},workLog:[]})},a.handleDateChangeStart=function(e){var t=new Date(e);t.setHours(0,0,0),a.setState({startDate:t})},a.handleDateChangeEnd=function(e){var t=new Date(e);t.setHours(23,59,59),a.setState({endDate:t})},a.onClickFilter=function(e){switch(e){case 0:a.handleDateChangeStart(new Date),a.handleDateChangeEnd(new Date);break;case 1:var t=new Date;t.setDate(t.getDate()-1),a.handleDateChangeStart(t),a.handleDateChangeEnd(t);break;case 2:var n=new Date;n.setDate(n.getDate()-7),a.handleDateChangeStart(n),a.handleDateChangeEnd(new Date);break;case 3:var r=new Date;r.setDate(r.getDate()-30),a.handleDateChangeStart(r),a.handleDateChangeEnd(new Date);break;default:a.handleDateChangeStart(new Date),a.handleDateChangeEnd(new Date)}a.setState({dropdown:Object($.a)({},a.state.dropdown,{currentFilter:a.state.dropdown.filters[e]})})};var n=new Date;n.setHours(0,0,0);var r=new Date;return r.setHours(23,59,59),a.state={employee:{name:"Iel\u0101d\u0113...",surname:" "},workLog:[],results:0,updateInterval:null,startDate:n,endDate:r,dropdown:{currentFilter:"\u0160odiena",filters:["\u0160odiena","Vakardiena","P\u0113d\u0113j\u0101s 7 dienas","P\u0113d\u0113j\u0101s 30 dienas"]}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.employeeWorkLog.id!==e.employeeWorkLog.id&&null!==this.props.employeeWorkLog.id&&this.fetchWorkLog()}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.updateInterval)}},{key:"render",value:function(){var e=this,t=0,a=null,n=this.state.workLog.filter(function(a){var n=new Date(a.start_time);return!(n<e.state.startDate||n>e.state.endDate)&&(t++,!0)}).map(function(e,t){var n=null===e.end_time,o=new Date(e.start_time),l=n?new Date:new Date(e.end_time),s=ve(o.getHours())+":"+ve(o.getMinutes()),i=n?" - ":ve(l.getHours())+":"+ve(l.getMinutes()),c=be(l-o),u=+c.hours+" st. "+c.minutes+" min. ",m=r.a.createElement("tr",{className:"text-center",style:n?{backgroundColor:"#ffffe6"}:null},r.a.createElement("td",null,s),r.a.createElement("td",null,i),r.a.createElement("td",null,u)),d=null;if(null===a||a!==o.getDate()){a=o.getDate();var h=ve(o.getDate())+"."+ve(o.getMonth()+1)+"."+ve(o.getFullYear());d=r.a.createElement("tr",{className:"bg-dark text-light"},r.a.createElement("td",{colSpan:3},h))}return r.a.createElement("tbody",{key:t},d,m)});return r.a.createElement(Pe.a,{show:this.props.employeeWorkLog.show,onHide:this.props.hideEmployeeWorkLog,onExited:this.onModalHide,size:"lg"},r.a.createElement(Pe.a.Header,{closeButton:!0},r.a.createElement(Pe.a.Title,{className:"w-100"},r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement("h4",null,this.state.employee.name+" "+this.state.employee.surname,this.state.employee.personalCode?" ("+this.state.employee.personalCode+")":null))),r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement("h5",{className:"text-secondary"},this.state.employee.position)),r.a.createElement(v.a,null,r.a.createElement("h5",{className:"text-secondary float-right"},this.state.employee.number?"Tel. "+this.state.employee.number:null))))),r.a.createElement(Pe.a.Body,null,r.a.createElement(I.a,null,r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(I.a.Group,{as:f.a},r.a.createElement(I.a.Label,{column:!0,xs:2},"No"),r.a.createElement(v.a,{xs:10},r.a.createElement(Le.a,{dateFormat:"dd.MM.yyyy.",customInput:r.a.createElement(Fe,null),selected:this.state.startDate,onChange:this.handleDateChangeStart,maxDate:new Date,locale:Te.a})))),r.a.createElement(v.a,null,r.a.createElement(I.a.Group,{as:f.a},r.a.createElement(I.a.Label,{column:!0,xs:2},"L\u012bdz"),r.a.createElement(v.a,{xs:10},r.a.createElement(Le.a,{dateFormat:"dd.MM.yyyy.",customInput:r.a.createElement(Fe,null),selected:this.state.endDate,onChange:this.handleDateChangeEnd,minDate:this.state.startDate,maxDate:new Date,locale:Te.a})))),r.a.createElement(v.a,{className:"d-flex flex-column"},r.a.createElement(Ie.a,{variant:"secondary",title:this.state.dropdown.currentFilter,className:"text-right mt-auto mb-3"},this.state.dropdown.filters.map(function(t,a){return r.a.createElement(x.a.Item,{key:a,onClick:function(){return e.onClickFilter(a)}},t)}))))),this.state.workLog.length&&t?r.a.createElement(Ue.a,{size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"text-center"},r.a.createElement("th",null,"Ien\u0101ca"),r.a.createElement("th",null,"Izg\u0101ja"),r.a.createElement("th",null,"Nostr\u0101d\u0101ja"))),n):r.a.createElement("div",{className:"text-center"},"Netika atrasts neviens ieraksts...")))}}]),t}(r.a.Component);var Be=Object(o.b)(function(e){return{employeeWorkLog:e.employees.employeeWorkLog}},function(e){return{showEmployeeWorkLog:function(){return e(A())},hideEmployeeWorkLog:function(){return e(P())}}})(Ye),Ve=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Pe.a,{show:this.props.deleteEmployee.show,onHide:function(){return e.props.hideDeleteEmployee()}},r.a.createElement(Pe.a.Header,{closeButton:!0},r.a.createElement(Pe.a.Title,null,this.props.deleteEmployee.employee.name+" "+this.props.deleteEmployee.employee.surname)),r.a.createElement(Pe.a.Body,null,"Vai esiet p\u0101rliecin\u0101ts ka v\u0113laties dz\u0113st \u0161o darbinieku?"),r.a.createElement(Pe.a.Footer,null,r.a.createElement(D.a,{variant:"danger",onClick:function(){ce(e.props.deleteEmployee.employee.id).then(function(){ye()}),e.props.hideDeleteEmployee()}},"Dz\u0113st")))}}]),t}(r.a.Component);var Ke=Object(o.b)(function(e){return{deleteEmployee:e.employees.deleteEmployee}},function(e){return{showDeleteEmployee:function(){return e(M())},hideDeleteEmployee:function(){return e(H())}}})(Ve),Xe={OFF:0,RFID_WAIT:1,COMPLETE:2},qe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).onEnter=function(){a.setState({employee:Object($.a)({},a.state.employee,{id:a.props.editEmployee.employee.id,name:a.props.editEmployee.employee.name,surname:a.props.editEmployee.employee.surname,personalCode:a.props.editEmployee.employee.personalCode,position:a.props.editEmployee.employee.position,number:a.props.editEmployee.employee.number,uid:a.props.editEmployee.employee.uid,changeCard:{status:0}})})},a.onHide=function(){a.props.hideEditEmployee(),a.setState(Object($.a)({},a.initialState))},a.onNameChange=function(e){a.setState({employee:Object($.a)({},a.state.employee,{name:e.target.value})})},a.onSurnameChange=function(e){a.setState({employee:Object($.a)({},a.state.employee,{surname:e.target.value})})},a.onPersonalCodeChange=function(e){a.setState({employee:Object($.a)({},a.state.employee,{personalCode:e.target.value})})},a.onPositionChange=function(e){a.setState({employee:Object($.a)({},a.state.employee,{position:e.target.value})})},a.onNumberChange=function(e){a.setState({employee:Object($.a)({},a.state.employee,{number:e.target.value})})},a.changeCard=function(e){a.setState({employee:Object($.a)({},a.state.employee,{changeCard:Object($.a)({},a.state.employee.changeCard,{status:Xe.RFID_WAIT})})}),pe(e).then(function(t){a.props.editEmployee.show&&(a.setState({employee:Object($.a)({},a.state.employee,{changeCard:Object($.a)({},a.state.employee.changeCard,{status:Xe.COMPLETE})})}),a.updateUID(e))}).catch(function(){a.props.editEmployee.show&&a.checkCard(e)})},a.deleteCard=function(e){Ee(e).then(function(){a.updateUID(e)})},a.updateUID=function(e){re(e).then(function(e){a.setState({employee:Object($.a)({},a.state.employee,{uid:e.data.uid})})})},a.initialState={employee:{name:"",surname:"",personalCode:"",position:"",number:"",uid:"",changeCard:{status:0}}},a.state=Object($.a)({},a.initialState),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Pe.a,{show:this.props.editEmployee.show,onHide:function(){return e.onHide()},onEnter:function(){return e.onEnter()}},r.a.createElement(Pe.a.Header,{closeButton:!0},r.a.createElement(Pe.a.Title,null,this.props.editEmployee.employee.name+" "+this.props.editEmployee.employee.surname)),r.a.createElement(Pe.a.Body,null,r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Label,null,"* V\u0101rds"),r.a.createElement(I.a.Control,{required:!0,value:this.state.employee.name,onChange:this.onNameChange}))),r.a.createElement(v.a,null,r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Label,null,"* Uzv\u0101rds"),r.a.createElement(I.a.Control,{required:!0,value:this.state.employee.surname,onChange:this.onSurnameChange})))),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Label,null,"Personas Kods"),r.a.createElement(I.a.Control,{value:this.state.employee.personalCode,onChange:this.onPersonalCodeChange})),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Label,null,"Amats"),r.a.createElement(I.a.Control,{value:this.state.employee.position,onChange:this.onPositionChange})),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Label,null,"Telefona Numurs"),r.a.createElement(I.a.Control,{value:this.state.employee.number,onChange:this.onNumberChange})),r.a.createElement(I.a.Group,{as:f.a},r.a.createElement(I.a.Label,{column:!0,xs:"auto"},"UID (NFC Karte)"),r.a.createElement(v.a,null,r.a.createElement(I.a.Control,{disabled:!0,value:this.state.employee.uid?this.state.employee.uid:"NAV"})),r.a.createElement(v.a,{xs:"auto"},r.a.createElement(D.a,{variant:"link",onClick:function(){return e.deleteCard(e.props.editEmployee.employee.id)}},"Dz\u0113st")),r.a.createElement(v.a,{xs:"auto"},r.a.createElement(D.a,{variant:"link",onClick:function(){return e.changeCard(e.props.editEmployee.employee.id)}},"Main\u012bt"))),r.a.createElement(Me.a,{variant:"primary",show:this.state.employee.changeCard.status===Xe.RFID_WAIT,onClose:function(){return null}},"Nosken\u0113jiet v\u0113lamo karti\u0146u."),r.a.createElement(Me.a,{variant:"success",show:this.state.employee.changeCard.status===Xe.COMPLETE,onClose:function(){return null}},"Darbiniekam veiksm\u012bgi nomain\u012bta karte.")),r.a.createElement(Pe.a.Footer,null,r.a.createElement(D.a,{variant:"success",onClick:function(){var t;(t=e.state.employee,ae.post("/editEmployee",{employee:t})).then(function(){ye()}),e.props.hideEditEmployee()}},"Redi\u0123\u0113t")))}}]),t}(r.a.Component);var Je=Object(o.b)(function(e){return{editEmployee:e.employees.editEmployee}},function(e){return{showEditEmployee:function(){return e(W())},hideEditEmployee:function(){return e(R())}}})(qe),$e=a(140),Qe=a.n($e),Ze=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleDateChange=function(e){a.setState({month:e})},a.onToggleIncludeNoHours=function(){a.setState({includeNoHours:!a.state.includeNoHours})},a.onToggleIncludeInactive=function(){a.setState({includeInactive:!a.state.includeInactive})},a.onToggleIncludeArchived=function(){a.setState({includeArchived:!a.state.includeArchived})},a.onEmployeeCheck=function(e){var t=a.state.employeeList;t[e].checked=!t[e].checked,a.setState({employeeList:t})},a.onCheckAll=function(){a.setState({employeeList:a.state.employeeList.map(function(e){return Object($.a)({},e,{checked:!a.state.checkAll})}),checkAll:!a.state.checkAll})},a.export=function(){ue({month:a.state.month,employees:a.state.employeeList.filter(function(e){return e.checked}),includeNoHours:a.state.includeNoHours,includeInactive:a.state.includeInactive,includeArchived:a.state.includeArchived}).then(function(e){var t=e.headers["content-type"];Qe()(e.data,"Varpas 1.xlsx",t)})},a.onEnter=function(){a.setState({employeeList:a.props.employees.map(function(e){return Object($.a)({},e,{checked:!1})})})},a.state={month:new Date,employeeList:[],checkAll:!1,includeNoHours:!1,includeInactive:!1,includeArchived:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.exportExcel.show)return null;var t=this.state.employeeList.map(function(t,a){return r.a.createElement("tbody",{key:a},r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(I.a.Check,{type:"checkbox",checked:t.checked,onChange:function(){return e.onEmployeeCheck(a)}})),r.a.createElement("td",null,t.name+" "+t.surname),r.a.createElement("td",null,t.personalCode),r.a.createElement("td",null,t.position)))});return r.a.createElement(Pe.a,{size:"lg",show:this.props.exportExcel.show,onEnter:function(){return e.onEnter()},onHide:function(){return e.props.hideExportExcel()}},r.a.createElement(Pe.a.Header,{closeButton:!0},r.a.createElement(Pe.a.Title,null,"Eksports")),r.a.createElement(Pe.a.Body,null,r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement("h5",null,"Periods"),r.a.createElement(I.a.Group,{as:f.a,className:"ml-1"},r.a.createElement(I.a.Label,{column:!0,xs:"3"},"M\u0113nesis: "),r.a.createElement(v.a,null,r.a.createElement(Le.a,{dateFormat:"MM/yyyy",customInput:r.a.createElement(Fe,null),selected:this.state.month,onChange:this.handleDateChange,showMonthYearPicker:!0})))),r.a.createElement(v.a,null,r.a.createElement("h5",null,"Iek\u013caut"),r.a.createElement(I.a.Group,{as:f.a,className:"ml-1"},r.a.createElement(v.a,null,r.a.createElement(I.a.Check,{type:"checkbox",label:"darbiniekus bez nostr\u0101d\u0101t\u0101m stund\u0101m",checked:this.state.includeNoHours,onChange:this.onToggleIncludeNoHours}))),r.a.createElement(I.a.Group,{as:f.a,className:"ml-1"},r.a.createElement(v.a,null,r.a.createElement(I.a.Check,{type:"checkbox",label:"deaktiviz\u0113tus darbiniekus",checked:this.state.includeInactive,onChange:this.onToggleIncludeInactive}))),r.a.createElement(I.a.Group,{as:f.a,className:"ml-1"},r.a.createElement(v.a,null,r.a.createElement(I.a.Check,{type:"checkbox",label:"arhiv\u0113tus darbiniekus",checked:this.state.includeArchived,onChange:this.onToggleIncludeArchived}))))),r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement("h5",null,"Atlas\u012bt Darbiniekus"),r.a.createElement(Ue.a,{size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(I.a.Check,{type:"checkbox",checked:this.state.checkAll,onChange:function(){return e.onCheckAll()}})),r.a.createElement("th",null,"V\u0101rds"),r.a.createElement("th",null,"Personas Kods"),r.a.createElement("th",null,"Amats"))),t)))),r.a.createElement(Pe.a.Footer,null,r.a.createElement(D.a,{variant:"success",onClick:function(){e.export()}},"Eksport\u0113t")))}}]),t}(r.a.Component);var et=Object(o.b)(function(e){return{exportExcel:e.employees.exportExcel,employees:e.employees.employees}},function(e){return{showExportExcel:function(){return e(U())},hideExportExcel:function(){return e(Y())}}})(Ze),tt=a(72),at=a.n(tt),nt=function(){return ae.post("/checkSession")},rt=function(e,t,a){return ae.post("/authenticate",{username:e,password:t,rememberMe:a})},ot=function(){return ae.post("/logOut")},lt=function(){return ae.post("/getUserByKey")},st=!1,it=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).onUsernameChange=function(t){e.setState({username:t.target.value})},e.onPasswordChange=function(t){e.setState({password:t.target.value})},e.onRememberMeChange=function(){e.setState({rememberMe:!e.state.rememberMe})},e.logIn=function(t){!1===st&&t.preventDefault(),rt(e.state.username,e.state.password,e.state.rememberMe).then(function(t){t.data?window.location.reload():e.setState({authenticationError:!0})})},e.state={username:st?"nils.asejevs":"",password:st?"EvoNils112":"",rememberMe:!0,authenticationError:!1},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){st&&this.logIn()}},{key:"render",value:function(){var e=this;return r.a.createElement(Pe.a,{centered:!0,show:!0,onHide:function(){return null}},r.a.createElement(I.a,{onSubmit:function(t){return e.logIn(t)}},r.a.createElement(Pe.a.Header,{className:"justify-content-center"},r.a.createElement(Pe.a.Title,null,r.a.createElement("img",{src:at.a,alt:"",width:"auto",height:"40px",className:"d-inline-block align-top mr-2",style:{filter:"invert(100%)"}}),"Autentifik\u0101cija")),r.a.createElement(Pe.a.Body,null,r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Label,null,"Lietot\u0101jv\u0101rds"),r.a.createElement(I.a.Control,{required:!0,value:this.state.username,onChange:this.onUsernameChange,name:"username"})),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Label,null,"Parole"),r.a.createElement(I.a.Control,{required:!0,value:this.state.password,onChange:this.onPasswordChange,name:"password",type:"password"})),r.a.createElement(I.a.Group,{controlId:"formBasicChecbox"},r.a.createElement(I.a.Check,{type:"checkbox",label:"Atcer\u0113ties mani",name:"rememberMe",checked:this.state.rememberMe,onChange:this.onRememberMeChange})),r.a.createElement(Me.a,{variant:"danger",show:this.state.authenticationError,onClose:function(){return null}},"Nepareizs lietot\u0101jv\u0101rds un/vai parole.")),r.a.createElement(Pe.a.Footer,null,r.a.createElement(D.a,{variant:"success",type:"submit"},"Ielogoties"))))}}]),t}(r.a.Component);var ct=Object(o.b)(function(e){return{}},function(e){return{}})(it),ut=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).checkCard=function(t){t?de(t).then(function(t){e.props.checkCard.show&&(e.hideModal(),e.props.showEmployeeWorkLog(t.data.id))}).catch(function(){e.props.checkCard.show&&e.checkCard(t)}):de(t)},e.hideModal=function(){e.props.hideCheckCard(),e.checkCard(!1),e.setState({cardScanned:!1,employee:{}})},e.state={cardScanned:!1,employee:{}},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Pe.a,{show:this.props.checkCard.show,onHide:this.hideModal,onEntered:function(){return e.checkCard(!0)}},r.a.createElement(Pe.a.Header,{closeButton:!0},r.a.createElement(Pe.a.Title,null,"Atrast darbinieku p\u0113c kartes")),r.a.createElement(Pe.a.Body,null,r.a.createElement(Me.a,{variant:"primary",show:!this.state.cardScanned},"Nosken\u0113jiet v\u0113lamo NFC karti."),this.state.cardScanned&&!1!==this.state.employee?r.a.createElement("div",null,"V\u0101rds: ",this.state.employee.name+" "+this.state.employee.surname):null,this.state.cardScanned&&!1===this.state.employee?r.a.createElement("div",null,"Uz \u0161\u012bs karti\u0146as nav re\u0123istr\u0113ts neviens darbinieks."):null))}}]),t}(r.a.Component);var mt=Object(o.b)(function(e){return{checkCard:e.employees.checkCard}},function(e){return{showCheckCard:function(){return e(B())},hideCheckCard:function(){return e(V())},showEmployeeWorkLog:function(t){return e(A(t))}}})(ut),dt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).onExited=function(){a.props.hideCommentEmployee(),a.setState(Object($.a)({},a.initialState))},a.onCommentChange=function(e){a.setState({comment:Object($.a)({},a.state.comment,{text:e.target.value})})},a.onExpiryDateChange=function(e){console.log(e),a.setState({comment:Object($.a)({},a.state.comment,{expires:e})})},a.onManualDeleteChange=function(){a.setState({comment:Object($.a)({},a.state.comment,{manualDelete:!a.state.comment.manualDelete})})},a.initialState={comment:{text:"",expires:new Date,manualDelete:!1}},a.state=Object($.a)({},a.initialState),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Pe.a,{show:this.props.commentEmployee.show,onExited:function(){return e.onExited()},onHide:function(){return e.props.hideCommentEmployee()}},r.a.createElement(Pe.a.Header,{closeButton:!0},r.a.createElement(Pe.a.Title,null,this.props.employee.name+" "+this.props.employee.surname)),r.a.createElement(Pe.a.Body,null,r.a.createElement(I.a.Group,{as:f.a},r.a.createElement(I.a.Label,{column:!0,xs:2},"Koment\u0101rs"),r.a.createElement(v.a,{xs:10},r.a.createElement(I.a.Control,{as:"textarea",rows:"3",value:this.state.comment.text,onChange:this.onCommentChange}))),r.a.createElement(I.a.Group,{as:f.a},r.a.createElement(I.a.Label,{column:!0,xs:2},"Dz\u0113st"),r.a.createElement(v.a,{xs:10},r.a.createElement(Le.a,{disabled:this.state.comment.manualDelete,dateFormat:"yyyy.MM.dd HH:mm",customInput:r.a.createElement(Fe,null),selected:this.state.comment.expires,onChange:this.onExpiryDateChange,maxDate:new Date,showTimeSelect:!0,timeFormat:"HH:mm"}))),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Check,{type:"checkbox",label:"Tikai manu\u0101li dz\u0113\u0161ams",name:"manualDelete",checked:this.state.comment.manualDelete,onChange:this.onManualDeleteChange}))),r.a.createElement(Pe.a.Footer,null,r.a.createElement(D.a,{variant:"success",onClick:function(){var t,a;t=e.props.employee,a=e.state.comment,ae.post("/addEmployeeComment",{employee:t,comment:a}),e.props.hideCommentEmployee(),ye()}},"Pievienot")))}}]),t}(r.a.Component);var ht=Object(o.b)(function(e){return{commentEmployee:e.employees.commentEmployee,employee:e.employees.commentEmployee.employee}},function(e){return{showCommentEmployee:function(){return e(K())},hideCommentEmployee:function(){return e(X())}}})(dt),pt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).establishConnection=function(){fe().then(function(t){e.setState({serverConnectionEstablished:t.data.server,scannerConnectionEstablished:t.data.scanner},function(){nt().then(function(t){!0===e.state.serverConnectionEstablished&&!0===e.state.scannerConnectionEstablished&&(clearInterval(e.state.pingInterval),e.setState({loading:!1,authenticated:t.data},function(){e.state.authenticated&&lt().then(function(t){e.setState({user:t.data})})}))})})})},e.logOut=function(){ot(),window.location.reload()},e.state={pingInterval:null,serverConnectionEstablished:!1,scannerConnectionEstablished:!1,loading:!0,authenticated:!1,user:{username:""}},window.scanCard=me,e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("env: ","production"),this.establishConnection(),this.setState({pingInterval:setInterval(function(){e.establishConnection()},1e3)})}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",{className:"text-center"},r.a.createElement(g.a,{animation:"border"}),this.state.serverConnectionEstablished?this.state.scannerConnectionEstablished?null:r.a.createElement("div",null,"Veido savienojumu ar NFC skeneri..."):r.a.createElement("div",null,"Veido savienojumu ar serveri...")):this.state.authenticated?r.a.createElement(h.a,null,r.a.createElement(y.a,{className:"container"},r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(b.a,{bg:"dark",variant:"dark",fixed:"top",expand:"md"},r.a.createElement(b.a.Brand,null,r.a.createElement("img",{src:at.a,alt:"",width:"30",height:"30",className:"d-inline-block align-top"})," V\u0100RPAS 1"),r.a.createElement(b.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(b.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(C.a,{className:"mr-auto"},r.a.createElement(k.LinkContainer,{exact:!0,to:"/"},r.a.createElement(C.a.Link,null,"Darbinieki")),r.a.createElement(k.LinkContainer,{exact:!0,to:"/report"},r.a.createElement(C.a.Link,null,"Atskaites"))),r.a.createElement(C.a,null,r.a.createElement(b.a.Text,{className:"ml-md-4"},r.a.createElement("u",null,this.state.user.username)),r.a.createElement(C.a.Link,{className:"ml-md-2",onClick:this.logOut},"Iziet",r.a.createElement(De.d,{className:"ml-1"}))))))),r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(p.a,null,r.a.createElement(E.a,{exact:!0,path:"/",component:je}),r.a.createElement(E.a,{exact:!0,path:"/report",component:Ae}),r.a.createElement(E.a,{component:Ge})),r.a.createElement(Be,null),r.a.createElement(ze,null),r.a.createElement(Ke,null),r.a.createElement(Je,null),r.a.createElement(et,null),r.a.createElement(mt,null),r.a.createElement(ht,null))),r.a.createElement(f.a,null,r.a.createElement(v.a,{className:"footer"},"V\u0101rpas 1 \xa9 2019")))):r.a.createElement(ct,null)}}]),t}(r.a.Component);var Et=Object(o.b)(function(e){return{}},function(e){return{}})(pt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(o.a,{store:ee},r.a.createElement(Et,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},55:function(e,t,a){},72:function(e,t,a){e.exports=a.p+"static/media/logo.96ebfbf9.png"}},[[143,2,1]]]);
//# sourceMappingURL=main.e88fddaa.chunk.js.map